YUI.add("intl-format",function(e,t){UnsupportedOperationException=function(e){this.message=e,this.toString=function(){return"UnsupportedOperationException: "+this.message}},Formatter=function(e){this.values=e},Formatter.createInstance=function(e){throw new UnsupportedOperationException("Not implemented")},Formatter.prototype.getValue=function(t){return e.Lang.isArray(this.values)&&(t=parseInt(t)),this.values[t]},Formatter.prototype.getParams=function(e){if(!e||!e.key)return!1;var t=this.getValue(e.key);return t!=null?(e.value=t,!0):!1},Formatter.prototype.format=function(e,t){throw new UnsupportedOperationException("Not implemented")},e.mix(Formatter,{getCurrentTimeZone:function(){var t=(new Date).getTimezoneOffset()*-60;return e.Date.Timezone.getTimezoneIdForOffset(t)}}),String.prototype.trim==null&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),StringFormatter=function(e){StringFormatter.superclass.constructor.call(this,e),this.regex="{\\s*([a-zA-Z0-9_]+)\\s*}"},e.extend(StringFormatter,Formatter),StringFormatter.createInstance=function(e){return new StringFormatter(e)},StringFormatter.prototype.getParams=function(e,t){if(t&&t[1]){e.key=t[1];if(Formatter.prototype.getParams.call(this,e))return!0}return!1},StringFormatter.prototype.format=function(e){var t=new RegExp(this.regex,"gm"),n=null;while(n=t.exec(e)){var r={};this.getParams(r,n)&&(e=e.replace(n[0],r.value))}return e},DateFormatter=function(t){DateFormatter.superclass.constructor.call(this,t),this.styles={"short":[e.Date.DATE_FORMATS.YMD_SHORT,0,0],medium:[e.Date.DATE_FORMATS.YMD_ABBREVIATED,0,0],"long":[e.Date.DATE_FORMATS.YMD_LONG,0,0],full:[e.Date.DATE_FORMATS.WYMD_LONG,0,0]},this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*date\\s*(,\\s*(\\w+)\\s*)?}"},e.extend(DateFormatter,Formatter),DateFormatter.createInstance=function(e){return new DateFormatter(e)},DateFormatter.prototype.getParams=function(e,t){return t&&(t[1]&&(e.key=t[1]),t[3]&&(e.style=t[3])),e.style||(e.style="medium"),this.styles[e.style]?e.key&&Formatter.prototype.getParams.call(this,e)?!0:!1:!1},DateFormatter.prototype.format=function(t,n){var r=new RegExp(this.regex,"gm"),i=null;while(i=r.exec(t)){var s={};if(this.getParams(s,i)){var o=this.styles[s.style],u=e.Date.format(new Date(s.value),{timezone:n.timezone||Formatter.getCurrentTimeZone(),dateFormat:o[0],timeFormat:o[1],timezoneFormat:o[2]});t=t.replace(i[0],u)}}return t},TimeFormatter=function(t){TimeFormatter.superclass.constructor.call(this,t),this.styles={"short":[0,e.Date.TIME_FORMATS.HM_SHORT,e.Date.TIMEZONE_FORMATS.NONE],medium:[0,e.Date.TIME_FORMATS.HM_ABBREVIATED,e.Date.TIMEZONE_FORMATS.NONE],"long":[0,e.Date.TIME_FORMATS.HM_ABBREVIATED,e.Date.TIMEZONE_FORMATS.Z_SHORT],full:[0,e.Date.TIME_FORMATS.HM_ABBREVIATED,e.Date.TIMEZONE_FORMATS.Z_ABBREVIATED]},this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*time\\s*(,\\s*(\\w+)\\s*)?}"},e.extend(TimeFormatter,DateFormatter),TimeFormatter.createInstance=function(e){return new TimeFormatter(e)},NumberFormatter=function(t){NumberFormatter.superclass.constructor.call(this,t),this.styles={integer:e.Number.STYLES.NUMBER_STYLE,percent:e.Number.STYLES.PERCENT_STYLE,currency:e.Number.STYLES.CURRENCY_STYLE},this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*number\\s*(,\\s*(\\w+)\\s*)?}"},e.extend(NumberFormatter,Formatter),NumberFormatter.createInstance=function(e){return new NumberFormatter(e)},NumberFormatter.prototype.getParams=function(e,t){return t&&(t[1]&&(e.key=t[1]),t[3]&&(e.style=t[3])),e.style||(e.style="integer",e.showDecimal=!0),this.styles[e.style]?e.key&&Formatter.prototype.getParams.call(this,e)?!0:!1:!1},NumberFormatter.prototype.format=function(t){var n=new RegExp(this.regex,"gm"),r=null;while(r=n.exec(t)){var i={};if(this.getParams(i,r)){var s={style:this.styles[i.style]};i.style=="integer"&&!i.showDecimal&&(s.parseIntegerOnly=!0),t=t.replace(r[0],e.Number.format(i.value,s))}}return t},SelectFormatter=function(e){SelectFormatter.superclass.constructor.call(this,e),this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*select\\s*,\\s*"},e.extend(SelectFormatter,Formatter),SelectFormatter.createInstance=function(e){return new SelectFormatter(e)},SelectFormatter.prototype.getParams=function(e,t){return t&&t[1]&&(e.key=t[1]),e.key&&Formatter.prototype.getParams.call(this,e)?!0:!1},SelectFormatter.prototype.parseOptions=function(e,t){var n={},r="",i="",s="";for(var o=t;o<e.length;o++){var u=e.charAt(o);if(u=="\\")s+=u+e.charAt(o+1),o++;else if(u=="}"){if(s==""){o++;break}i=s,n[r.trim()]=i,s=r=i=""}else u=="{"?(r=s,s=""):s+=u}return s!=""?null:{options:n,next:o}},SelectFormatter.prototype.select=function(e,t){for(var n in e){if(n=="other")continue;if(n==t.value)return e[n]}return e.other},SelectFormatter.prototype.format=function(e){var t=new RegExp(this.regex,"gm"),n=null;while(n=t.exec(e)){var r={};if(this.getParams(r,n)){var i=this.parseOptions(e,t.lastIndex);if(!i)continue;t.lastIndex=i.next,i=i.options;var s=this.select(i,r);if(s){var o=e.indexOf(n[0]);e=e.slice(0,o)+s+e.slice(t.lastIndex)}}}return e},PluralFormatter=function(e){PluralFormatter.superclass.constructor.call(this,e),this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*plural\\s*,\\s*"},e.extend(PluralFormatter,SelectFormatter),PluralFormatter.createInstance=function(e){return new PluralFormatter(e)},PluralFormatter.prototype.select=function(e,t){var n=e.other;return t.value==0&&e.zero&&(n=e.zero),t.value==1&&e.one&&(n=e.one),t.value==2&&e.two&&(n=e.two),n=n.replace("#",(new NumberFormatter({VAL:t.value})).format("{VAL, number, integer}")),n},ChoiceFormatter=function(e){ChoiceFormatter.superclass.constructor.call(this,e),this.regex="{\\s*([a-zA-Z0-9_]+)\\s*,\\s*choice\\s*,\\s*(.+)}"},e.extend(ChoiceFormatter,SelectFormatter),ChoiceFormatter.createInstance=function(e){return new ChoiceFormatter(e)},ChoiceFormatter.prototype.parseOptions=function(e){var t=[],n=e.split("|");for(var r=0;r<n.length;r++){var i=n[r],s=["#","<","\u2264"];for(var o=0;o<s.length;o++){var u=s[o];if(i.indexOf(u)!=-1){var a=i.split(u),f={value:a[0],result:a[1],relation:u};t.push(f);break}}}return t},ChoiceFormatter.prototype.getParams=function(e,t){return SelectFormatter.prototype.getParams.call(this,e,t)&&t[2]?(e.choices=this.parseOptions(t[2]),e.choices===[]?!1:!0):!1},ChoiceFormatter.prototype.select=function(e){for(var t=0;t<e.choices.length;t++){var n=e.choices[t],r=n.value,i=n.result,s=n.relation;if(s=="#"&&r==e.value||s=="<"&&r<e.value||s=="\u2264"&&r<=e.value)return i}return""},ChoiceFormatter.prototype.format=function(e){var t=new RegExp(this.regex,"gm"),n=null;while(n=t.exec(e)){var r={};if(this.getParams(r,n)){var i=this.select(r);i&&(e=e.replace(n[0],i))}}return e};var n=[StringFormatter,DateFormatter,TimeFormatter,NumberFormatter,ChoiceFormatter,PluralFormatter,SelectFormatter];e.mix(e.Intl,{formatMessage:function(e,t,r){r=r||{};for(var i=0;i<n.length;i++){var s=n[i].createInstance(t);e=s.format(e,r)}return e}})},"@VERSION@",{requires:["datatype-date-advanced-format","datatype-number-advanced-format","intl"]});
