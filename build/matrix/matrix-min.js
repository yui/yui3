YUI.add("matrix",function(d,c){var a={_rounder:100000,_round:function(e){e=Math.round(e*a._rounder)/a._rounder;return e;},rad2deg:function(e){var f=e*(180/Math.PI);return f;},deg2rad:function(f){var e=f*(Math.PI/180);return e;},angle2rad:function(e){if(typeof e==="string"&&e.indexOf("rad")>-1){e=parseFloat(e);}else{e=a.deg2rad(parseFloat(e));}return e;},convertTransformToArray:function(e){var f=[[e.a,e.c,e.dx],[e.b,e.d,e.dy],[0,0,1]];return f;},getDeterminant:function(g){var f=0,e=g.length,h=0,j;if(e==2){return g[0][0]*g[1][1]-g[0][1]*g[1][0];}for(;h<e;++h){j=g[h][0];if(h%2===0||h===0){f+=j*a.getDeterminant(a.getMinors(g,h,0));}else{f-=j*a.getDeterminant(a.getMinors(g,h,0));}}return f;},inverse:function(h){var g=0,e=h.length,m=0,l,f,k=[],n=[];if(e===2){g=h[0][0]*h[1][1]-h[0][1]*h[1][0];f=[[h[1][1]*g,-h[1][0]*g],[-h[0][1]*g,h[0][0]*g]];}else{g=a.getDeterminant(h);for(;m<e;++m){k[m]=[];for(l=0;l<e;++l){n=a.getMinors(h,l,m);k[m][l]=a.getDeterminant(n);if((m+l)%2!==0&&(m+l)!==0){k[m][l]*=-1;}}}f=a.scalarMultiply(k,1/g);}return f;},scalarMultiply:function(f,k){var h=0,g,e=f.length;for(;h<e;++h){for(g=0;g<e;++g){f[h][g]=a._round(f[h][g]*k);}}return f;},transpose:function(f){var e=f.length,h=0,g=0,k=[];for(;h<e;++h){k[h]=[];for(g=0;g<e;++g){k[h].push(f[g][h]);}}return k;},getMinors:function(f,m,n){var k=[],e=f.length,h=0,g,l;for(;h<e;++h){if(h!==m){l=[];for(g=0;g<e;++g){if(g!==n){l.push(f[h][g]);}}k.push(l);}}return k;},sign:function(e){return e===0?1:e/Math.abs(e);},vectorMatrixProduct:function(g,h){var l,k,f=g.length,m=[],e;for(l=0;l<f;++l){e=0;for(k=0;k<f;++k){e+=g[l]*h[l][k];}m[l]=e;}return m;},decompose:function(l){var m=parseFloat(l[0][0]),j=parseFloat(l[1][0]),h=parseFloat(l[0][1]),g=parseFloat(l[1][1]),o=parseFloat(l[0][2]),n=parseFloat(l[1][2]),f,k,i,e;if((m*g-j*h)===0){return false;}k=a._round(Math.sqrt(m*m+j*j));m/=k;j/=k;e=a._round(m*h+j*g);h-=m*e;g-=j*e;i=a._round(Math.sqrt(h*h+g*g));h/=i;g/=i;e/=i;e=a._round(a.rad2deg(Math.atan(e)));f=a._round(a.rad2deg(Math.atan2(l[1][0],l[0][0])));return[["translate",o,n],["rotate",f],["skewX",e],["scale",k,i]];},getTransformArray:function(h){var k=/\s*([a-z]*)\(([\w,\.,\-,\s]*)\)/gi,j=[],g,e,i,f=a.transformMethods;while((e=k.exec(h))){if(f.hasOwnProperty(e[1])){g=e[2].split(",");g.unshift(e[1]);j.push(g);}else{if(e[1]=="matrix"){g=e[2].split(",");i=a.decompose([[g[0],g[2],g[4]],[g[1],g[3],g[5]],[0,0,1]]);j.push(i[0]);j.push(i[1]);j.push(i[2]);j.push(i[3]);}}}return j;},getTransformFunctionArray:function(e){var f;switch(e){case"skew":f=[e,0,0];break;case"scale":f=[e,1,1];break;case"scaleX":f=[e,1];break;case"scaleY":f=[e,1];break;case"translate":f=[e,0,0];break;default:f=[e,0];break;}return f;},compareTransformSequence:function(f,k){var h=0,e=f.length,g=k.length,j=e===g;if(j){for(;h<e;++h){if(f[h][0]!=k[h][0]){j=false;break;}}}return j;},transformMethods:{rotate:"rotate",skew:"skew",skewX:"skewX",skewY:"skewY",translate:"translate",translateX:"translateX",translateY:"tranlsateY",scale:"scale",scaleX:"scaleX",scaleY:"scaleY"}};d.MatrixUtil=a;var b=function(e){this.init(e);};b.prototype={_rounder:100000,multiply:function(m,k,j,i,q,p){var l=this,h=l.a*m+l.c*k,g=l.b*m+l.d*k,f=l.a*j+l.c*i,e=l.b*j+l.d*i,o=l.a*q+l.c*p+l.dx,n=l.b*q+l.d*p+l.dy;l.a=this._round(h);l.b=this._round(g);l.c=this._round(f);l.d=this._round(e);l.dx=this._round(o);l.dy=this._round(n);return this;},applyCSSText:function(h){var g=/\s*([a-z]*)\(([\w,\.,\-,\s]*)\)/gi,f,e;h=h.replace(/matrix/g,"multiply");while((e=g.exec(h))){if(typeof this[e[1]]==="function"){f=e[2].split(",");this[e[1]].apply(this,f);}}},getTransformArray:function(i){var h=/\s*([a-z]*)\(([\w,\.,\-,\s]*)\)/gi,g=[],f,e;i=i.replace(/matrix/g,"multiply");while((e=h.exec(i))){if(typeof this[e[1]]==="function"){f=e[2].split(",");f.unshift(e[1]);g.push(f);}}return g;},_defaults:{a:1,b:0,c:0,d:1,dx:0,dy:0},_round:function(e){e=Math.round(e*this._rounder)/this._rounder;return e;},init:function(e){var f=this._defaults,g;e=e||{};for(g in f){if(f.hasOwnProperty(g)){this[g]=(g in e)?e[g]:f[g];}}this._config=e;},scale:function(e,f){this.multiply(e,0,0,f,0,0);return this;},skew:function(e,f){e=e||0;f=f||0;if(e!==undefined){e=Math.tan(this.angle2rad(e));}if(f!==undefined){f=Math.tan(this.angle2rad(f));}this.multiply(1,f,e,1,0,0);return this;},skewX:function(e){this.skew(e);return this;},skewY:function(e){this.skew(null,e);return this;},toCSSText:function(){var e=this,f="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.dx+","+e.dy+")";return f;},toFilterText:function(){var e=this,f="progid:DXImageTransform.Microsoft.Matrix(";f+="M11="+e.a+","+"M21="+e.b+","+"M12="+e.c+","+"M22="+e.d+","+'sizingMethod="auto expand")';f+="";return f;},rad2deg:function(e){var f=e*(180/Math.PI);return f;},deg2rad:function(f){var e=f*(Math.PI/180);return e;},angle2rad:function(e){if(typeof e==="string"&&e.indexOf("rad")>-1){e=parseFloat(e);}else{e=this.deg2rad(parseFloat(e));}return e;},rotate:function(h,f,j){var e=this.angle2rad(h),g=Math.sin(e),i=Math.cos(e);this.multiply(i,g,0-g,i,0,0);return this;},translate:function(e,f){e=parseFloat(e)||0;f=parseFloat(f)||0;this.multiply(1,0,0,1,e,f);return this;},translateX:function(e){this.translate(e);return this;},translateY:function(e){this.translate(null,e);return this;},identity:function(){var e=this._config,f=this._defaults,g;for(g in e){if(g in f){this[g]=f[g];}}return this;},getMatrixArray:function(){var e=this,f=[[e.a,e.c,e.dx],[e.b,e.d,e.dy],[0,0,1]];return f;},getContentRect:function(q,p,l,k){var i=!isNaN(l)?l:0,o=!isNaN(k)?k:0,z=i+q,j=o+p,s=this,C=s.a,B=s.b,A=s.c,w=s.d,n=s.dx,m=s.dy,v=(C*i+A*o+n),h=(B*i+w*o+m),u=(C*z+A*o+n),g=(B*z+w*o+m),t=(C*i+A*j+n),f=(B*i+w*j+m),r=(C*z+A*j+n),e=(B*z+w*j+m);return{left:Math.min(t,Math.min(v,Math.min(u,r))),right:Math.max(t,Math.max(v,Math.max(u,r))),top:Math.min(g,Math.min(e,Math.min(f,h))),bottom:Math.max(g,Math.max(e,Math.max(f,h)))};},getDeterminant:function(){return d.MatrixUtil.getDeterminant(this.getMatrixArray());},inverse:function(){return d.MatrixUtil.inverse(this.getMatrixArray());
},transpose:function(){return d.MatrixUtil.transpose(this.getMatrixArray());},decompose:function(){return d.MatrixUtil.decompose(this.getMatrixArray());}};d.Matrix=b;},"@VERSION@",{"requires":["yui-base"]});