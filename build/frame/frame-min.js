YUI.add("frame",function(e,d){var a=function(){a.superclass.constructor.apply(this,arguments);},c=":last-child",b="body";e.extend(a,e.Base,{_ready:null,_rendered:null,_iframe:null,_instance:null,_create:function(i){var l,n,m,g,j="",h=((this.get("extracss"))?'<style id="extra_css">'+this.get("extracss")+"</style>":"");this._iframe=e.Node.create(a.HTML);this._iframe.setStyle("visibility","hidden");this._iframe.set("src",this.get("src"));this.get("container").append(this._iframe);var k=(this.get("src")===a.ATTRS.src.value);this._iframe.set("height","99%");if(k){j=e.Lang.sub(a.PAGE_HTML,{DIR:this.get("dir"),LANG:this.get("lang"),TITLE:this.get("title"),META:a.META,LINKED_CSS:this.get("linkedcss"),CONTENT:this.get("content"),BASE_HREF:this.get("basehref"),DEFAULT_CSS:a.DEFAULT_CSS,EXTRA_CSS:h});if(e.config.doc.compatMode!="BackCompat"){j=a.getDocType()+"\n"+j;}else{}}m=this._resolveWinDoc();if(j){m.doc.open();m.doc.write(j);m.doc.close();}if(!m.doc.documentElement){var f=e.later(1,this,function(){if(m.doc&&m.doc.documentElement){i(m);f.cancel();}},null,true);}else{i(m);}},_resolveWinDoc:function(g){var f=(g)?g:{};f.win=e.Node.getDOMNode(this._iframe.get("contentWindow"));f.doc=e.Node.getDOMNode(this._iframe.get("contentWindow.document"));if(!f.doc){f.doc=e.config.doc;}if(!f.win){f.win=e.config.win;}return f;},_onDomEvent:function(h){var g,f;if(!e.Node.getDOMNode(this._iframe)){return;}h.frameX=h.frameY=0;if(h.pageX>0||h.pageY>0){if(h.type.substring(0,3)!=="key"){f=this._instance.one("win");g=this._iframe.getXY();h.frameX=g[0]+h.pageX-f.get("scrollLeft");h.frameY=g[1]+h.pageY-f.get("scrollTop");}}h.frameTarget=h.target;h.frameCurrentTarget=h.currentTarget;h.frameEvent=h;this.fire("dom:"+h.type,h);},initializer:function(){this.publish("ready",{emitFacade:true,defaultFn:this._defReadyFn});},destructor:function(){var f=this.getInstance();f.one("doc").detachAll();f=null;this._iframe.remove();},_DOMPaste:function(i){var g=this.getInstance(),f="",h=g.config.win;if(i._event.originalTarget){f=i._event.originalTarget;}if(i._event.clipboardData){f=i._event.clipboardData.getData("Text");}if(h.clipboardData){f=h.clipboardData.getData("Text");if(f===""){if(!h.clipboardData.setData("Text",f)){f=null;}}}i.frameTarget=i.target;i.frameCurrentTarget=i.currentTarget;i.frameEvent=i;if(f){i.clipboardData={data:f,getData:function(){return f;}};}else{i.clipboardData=null;}this.fire("dom:paste",i);},_defReadyFn:function(){var f=this.getInstance();e.each(a.DOM_EVENTS,function(h,g){var i=e.bind(this._onDomEvent,this),j=((e.UA.ie&&a.THROTTLE_TIME>0)?e.throttle(i,a.THROTTLE_TIME):i);if(!f.Node.DOM_EVENTS[g]){f.Node.DOM_EVENTS[g]=1;}if(h===1){if(g!=="focus"&&g!=="blur"&&g!=="paste"){if(g.substring(0,3)==="key"){f.on(g,j,f.config.doc);}else{f.on(g,i,f.config.doc);}}}},this);f.Node.DOM_EVENTS.paste=1;f.on("paste",e.bind(this._DOMPaste,this),f.one("body"));f.on("focus",e.bind(this._onDomEvent,this),f.config.win);f.on("blur",e.bind(this._onDomEvent,this),f.config.win);f.__use=f.use;f.use=e.bind(this.use,this);this._iframe.setStyles({visibility:"inherit"});f.one("body").setStyle("display","block");if(e.UA.ie){}},_fixIECursors:function(){var i=this.getInstance(),g=i.all("table"),h=i.all("br"),f;if(g.size()&&h.size()){f=g.item(0).get("sourceIndex");h.each(function(m){var k=m.get("parentNode"),l=k.get("children"),j=k.all(">br");if(k.test("div")){if(l.size()>2){m.replace(i.Node.create("<wbr>"));}else{if(m.get("sourceIndex")>f){if(j.size()){m.replace(i.Node.create("<wbr>"));}}else{if(j.size()>1){m.replace(i.Node.create("<wbr>"));}}}}});}},_onContentReady:function(h){if(!this._ready){this._ready=true;var g=this.getInstance(),f=e.clone(this.get("use"));this.fire("contentready");if(h){g.config.doc=e.Node.getDOMNode(h.target);}f.push(e.bind(function(){if(g.EditorSelection){g.EditorSelection.DEFAULT_BLOCK_TAG=this.get("defaultblock");}if(this.get("designMode")){if(e.UA.ie){g.config.doc.body.contentEditable="true";this._ieSetBodyHeight();g.on("keyup",e.bind(this._ieSetBodyHeight,this),g.config.doc);}else{g.config.doc.designMode="on";}}this.fire("ready");},this));g.use.apply(g,f);g.one("doc").get("documentElement").addClass("yui-js-enabled");}},_ieHeightCounter:null,_ieSetBodyHeight:function(k){if(!this._ieHeightCounter){this._ieHeightCounter=0;}this._ieHeightCounter++;var j=false;if(!k){j=true;}if(k){switch(k.keyCode){case 8:case 13:j=true;break;}if(k.ctrlKey||k.shiftKey){j=true;}}if(j){try{var i=this.getInstance();var g=this._iframe.get("offsetHeight");var f=i.config.doc.body.scrollHeight;if(g>f){g=(g-15)+"px";i.config.doc.body.style.height=g;}else{i.config.doc.body.style.height="auto";}}catch(k){if(this._ieHeightCounter<100){e.later(200,this,this._ieSetBodyHeight);}else{}}}},_resolveBaseHref:function(f){if(!f||f===""){f=e.config.doc.location.href;if(f.indexOf("?")!==-1){f=f.substring(0,f.indexOf("?"));}f=f.substring(0,f.lastIndexOf("/"))+"/";}return f;},_getHTML:function(f){if(this._ready){var g=this.getInstance();f=g.one("body").get("innerHTML");}return f;},_setHTML:function(f){if(this._ready){var g=this.getInstance();g.one("body").set("innerHTML",f);}else{this.on("contentready",e.bind(function(h,j){var i=this.getInstance();i.one("body").set("innerHTML",h);},this,f));}return f;},_getLinkedCSS:function(f){if(!e.Lang.isArray(f)){f=[f];}var g="";if(!this._ready){e.each(f,function(h){if(h!==""){g+='<link rel="stylesheet" href="'+h+'" type="text/css">';}});}else{g=f;}return g;},_setLinkedCSS:function(f){if(this._ready){var g=this.getInstance();g.Get.css(f);}return f;},_setExtraCSS:function(f){if(this._ready){var h=this.getInstance(),g=h.one("#extra_css");g.remove();h.one("head").append('<style id="extra_css">'+f+"</style>");}return f;},_instanceLoaded:function(g){this._instance=g;this._onContentReady();var h=this._instance.config.doc;if(this.get("designMode")){if(!e.UA.ie){try{h.execCommand("styleWithCSS",false,false);h.execCommand("insertbronreturn",false,false);}catch(f){}}}},use:function(){var h=this.getInstance(),g=e.Array(arguments),f=false;
if(e.Lang.isFunction(g[g.length-1])){f=g.pop();}if(f){g.push(function(){f.apply(h,arguments);});}h.__use.apply(h,g);},delegate:function(h,g,f,j){var i=this.getInstance();if(!i){return false;}if(!j){j=f;f="body";}return i.delegate(h,g,f,j);},getInstance:function(){return this._instance;},render:function(f){if(this._rendered){return this;}this._rendered=true;if(f){this.set("container",f);}this._create(e.bind(function(j){var l,m,g=e.bind(function(n){this._instanceLoaded(n);},this),i=e.clone(this.get("use")),h={debug:false,win:j.win,doc:j.doc},k=e.bind(function(){h=this._resolveWinDoc(h);l=YUI(h);l.host=this.get("host");try{l.use("node-base",g);if(m){clearInterval(m);}}catch(n){m=setInterval(function(){k();},350);}},this);i.push(k);e.use.apply(e,i);},this));return this;},_handleFocus:function(){var i=this.getInstance(),h=new i.EditorSelection();if(h.anchorNode){var k=h.anchorNode,j;if(k.test("p")&&k.get("innerHTML")===""){k=k.get("parentNode");}j=k.get("childNodes");if(j.size()){if(j.item(0).test("br")){h.selectNode(k,true,false);}else{if(j.item(0).test("p")){k=j.item(0).one("br.yui-cursor");if(k){k=k.get("parentNode");}if(!k){k=j.item(0).get("firstChild");}if(!k){k=j.item(0);}if(k){h.selectNode(k,true,false);}}else{var f=i.one("br.yui-cursor");if(f){var g=f.get("parentNode");if(g){h.selectNode(g,true,false);}}}}}}},focus:function(f){if(e.UA.ie&&e.UA.ie<9){try{e.one("win").focus();if(this.getInstance()){if(this.getInstance().one("win")){this.getInstance().one("win").focus();}}}catch(h){}if(f===true){this._handleFocus();}if(e.Lang.isFunction(f)){f();}}else{try{e.one("win").focus();e.later(100,this,function(){if(this.getInstance()){if(this.getInstance().one("win")){this.getInstance().one("win").focus();}}if(f===true){this._handleFocus();}if(e.Lang.isFunction(f)){f();}});}catch(g){}}return this;},show:function(){this._iframe.setStyles({position:"static",left:""});if(e.UA.gecko){try{if(this.getInstance()){this.getInstance().config.doc.designMode="on";}}catch(f){}this.focus();}return this;},hide:function(){this._iframe.setStyles({position:"absolute",left:"-999999px"});return this;}},{THROTTLE_TIME:100,DOM_EVENTS:{dblclick:1,click:1,paste:1,mouseup:1,mousedown:1,keyup:1,keydown:1,keypress:1,activate:1,deactivate:1,beforedeactivate:1,focusin:1,focusout:1},DEFAULT_CSS:"body { background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } img { cursor: pointer !important; border: none; }",HTML:'<iframe border="0" frameBorder="0" marginWidth="0" marginHeight="0" leftMargin="0" topMargin="0" allowTransparency="true" width="100%" height="99%"></iframe>',PAGE_HTML:'<html dir="{DIR}" lang="{LANG}"><head><title>{TITLE}</title>{META}<base href="{BASE_HREF}"/>{LINKED_CSS}<style id="editor_css">{DEFAULT_CSS}</style>{EXTRA_CSS}</head><body>{CONTENT}</body></html>',getDocType:function(){var f=e.config.doc.doctype,g=a.DOC_TYPE;if(f){g="<!DOCTYPE "+f.name+((f.publicId)?" "+f.publicId:"")+((f.systemId)?" "+f.systemId:"")+">";}else{if(e.config.doc.all){f=e.config.doc.all[0];if(f.nodeType){if(f.nodeType===8){if(f.nodeValue){if(f.nodeValue.toLowerCase().indexOf("doctype")!==-1){g="<!"+f.nodeValue+">";}}}}}}return g;},DOC_TYPE:'<!DOCTYPE HTML PUBLIC "-/'+"/W3C/"+"/DTD HTML 4.01/"+'/EN" "http:/'+'/www.w3.org/TR/html4/strict.dtd">',META:'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=7">',NAME:"frame",ATTRS:{title:{value:"Blank Page"},dir:{value:"ltr"},lang:{value:"en-US"},src:{value:"javascript"+((e.UA.ie)?":false":":")+";"},designMode:{writeOnce:true,value:false},content:{value:"<br>",setter:"_setHTML",getter:"_getHTML"},basehref:{value:false,getter:"_resolveBaseHref"},use:{writeOnce:true,value:["node","node-style","selector-css3"]},container:{value:"body",setter:function(f){return e.one(f);}},node:{readOnly:true,value:null,getter:function(){return this._iframe;}},id:{writeOnce:true,getter:function(f){if(!f){f="iframe-"+e.guid();}return f;}},linkedcss:{value:"",getter:"_getLinkedCSS",setter:"_setLinkedCSS"},extracss:{value:"",setter:"_setExtraCSS"},host:{value:false},defaultblock:{value:"p"}}});e.Frame=a;},"@VERSION@",{"requires":["base","node","selector-css3","yui-throttle"]});