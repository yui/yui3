YUI.add("dd-delegate",function(f,e){var d=function(g){d.superclass.constructor.apply(this,arguments);},c="container",b="nodes",a=f.Node.create("<div>Temp Node</div>");f.extend(d,f.Base,{_bubbleTargets:f.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(g){this.set("dragNode",g.newVal);},_afterDragEnd:function(g){f.DD.DDM._noShim=this._shimState;this.set("lastNode",this.dd.get("node"));this.get("lastNode").removeClass(f.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",a);},_delMouseDown:function(j){var h=j.currentTarget,g=this.dd,k=h,i=this.get("dragConfig");if(h.test(this.get(b))&&!h.test(this.get("invalid"))){this._shimState=f.DD.DDM._noShim;f.DD.DDM._noShim=true;this.set("currentNode",h);g.set("node",h);if(i&&i.dragNode){k=i.dragNode;}else{if(g.proxy){k=f.DD.DDM._proxy;}}g.set("dragNode",k);g._prep();g.fire("drag:mouseDown",{ev:j});}},_onMouseEnter:function(g){this._shimState=f.DD.DDM._noShim;f.DD.DDM._noShim=true;},_onMouseLeave:function(g){f.DD.DDM._noShim=this._shimState;},initializer:function(h){this._handles=[];var i=this.get("dragConfig")||{},g=this.get(c);i.node=a.cloneNode(true);i.bubbleTargets=this;if(this.get("handles")){i.handles=this.get("handles");}this.dd=new f.DD.Drag(i);this.dd.after("drag:end",f.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",f.bind(this._onNodeChange,this));this.dd.after("drag:mouseup",function(){this._unprep();});this._handles.push(f.delegate(f.DD.Drag.START_EVENT,f.bind(this._delMouseDown,this),g,this.get(b)));this._handles.push(f.on("mouseenter",f.bind(this._onMouseEnter,this),g));this._handles.push(f.on("mouseleave",f.bind(this._onMouseLeave,this),g));f.later(50,this,this.syncTargets);f.DD.DDM.regDelegate(this);},syncTargets:function(){if(!f.Plugin.Drop||this.get("destroyed")){return;}var h,g,i;if(this.get("target")){h=f.one(this.get(c)).all(this.get(b));g=this.dd.get("groups");i=this.get("dragConfig");if(i&&i.groups){g=i.groups;}h.each(function(j){this.createDrop(j,g);},this);}return this;},createDrop:function(i,g){var h={useShim:false,bubbleTargets:this};if(!i.drop){i.plug(f.Plugin.Drop,h);}i.drop.set("groups",g);return i;},destructor:function(){if(this.dd){this.dd.destroy();}if(f.Plugin.Drop){var g=f.one(this.get(c)).all(this.get(b));g.unplug(f.Plugin.Drop);}f.each(this._handles,function(h){h.detach();});}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:a},currentNode:{value:a},dragNode:{value:a},over:{value:false},target:{value:false},dragConfig:{value:null},handles:{value:null}}});f.mix(f.DD.DDM,{_delegates:[],regDelegate:function(g){this._delegates.push(g);},getDelegate:function(h){var g=null;h=f.one(h);f.each(this._delegates,function(i){if(h.test(i.get(c))){g=i;}},this);return g;}});f.namespace("DD");f.DD.Delegate=d;},"@VERSION@",{"requires":["dd-drag","dd-drop-plugin","event-mouseenter"]});