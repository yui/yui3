YUI.add("datatable-scroll",function(f){var d=f.Lang,a=d.isString,e=d.isNumber,c=d.isArray,b;f.DataTable.Scrollable=b=function(){};b.ATTRS={scrollable:{value:false,setter:"_setScrollable"}};f.mix(b.prototype,{SCROLLING_CONTAINER_TEMPLATE:'<div class="{classes}"><table></table></div>',scrollTo:function(h){var g;if(h&&this._tbodyNode&&(this._yScrollNode||this._xScrollNode)){if(c(h)){g=this.getCell(h);}else{if(e(h)){g=this.getRow(h);}else{if(a(h)){g=this._tbodyNode.one("#"+h);}else{if(h instanceof f.Node&&h.ancestor(".yui3-datatable")===this.get("boundingBox")){g=h;}}}}g&&g.scrollIntoView();}},_afterContentChange:function(g){this._mergeYScrollContent();this._syncScrollUI();},_afterScrollableChange:function(g){this._uiSetScrollable();this._syncScrollUI();},_afterScrollHeightChange:function(g){this._yScroll&&this._syncScrollUI();},_bindScrollUI:function(){this.after(["dataChange","columnsChange","captionChange","heightChange"],f.bind("_afterContentChange",this));this.data.after(["add","remove","reset","*:change"],f.bind("_afterContentChange",this));},_calcScrollHeight:function(){var g=this._yScrollNode;return this.get("contentBox").get("clientHeight")-g.get("offsetTop")-g.get("offsetHeight")+g.get("clientHeight");},_createYScrollNode:function(){if(!this._yScrollNode){this._yScrollNode=f.Node.create(f.Lang.sub(this.SCROLLING_CONTAINER_TEMPLATE,{classes:this.getClassName("data","container")}));}},_fixColumnWidths:function(){var k=this._tbodyNode,n=k.get("parentNode"),h=k.one("tr"),o=h&&h.all("td"),p=f.DOM.getScrollbarWidth(),g=[],j,l,m;if(o){this._tableNode.appendChild(this._tbodyNode);j=o.size()-1;m=o.item(j);this._setColumnWidth(j,(m.get("offsetWidth")+p)+"px");o.pop();g=o.get("offsetWidth");for(j=0,l=g.length;j<l;++j){this._setColumnWidth(j,g[j]+"px");}n.appendChild(this._tbodyNode);}},initializer:function(){this._setScrollProperties();this.after(["scrollableChange","heightChange","widthChange"],this._setScrollProperties);f.Do.after(this._bindScrollUI,this,"bindUI");f.Do.after(this._syncScrollUI,this,"syncUI");},_mergeYScrollContent:function(){this.get("boundingBox").removeClass(this.getClassName("scrollable-y"));if(this._yScrollNode){this._tableNode.append(this._tbodyNode);this._yScrollNode.remove().destroy(true);this._yScrollNode=null;this._removeHeaderScrollPadding();this._setARIARoles();}this._uiSetWidth(this.get("width"));this._uiSetColumns();},_removeHeaderScrollPadding:function(){var k=this._theadNode.all("> tr").getDOMNodes(),h,j,g;for(j=0,g=k.length;j<g;j+=(h.rowSpan||1)){h=f.one(k[j].cells[k[j].cells.length-1]).setStyle("paddingRight","");}},_setARIARoles:function(){var g=this.get("contentBox");if(this._yScrollNode){this._tableNode.setAttribute("role","presentation");this._yScrollNode.one("> table").setAttribute("role","presentation");g.setAttribute("role","grid");}else{this._tableNode.setAttribute("role","grid");g.removeAttribute("role");}},_setHeaderScrollPadding:function(){var k=this._theadNode.all("> tr").getDOMNodes(),l,h,j,g;h=f.one(k[0].cells[k[0].cells.length-1]);l=(f.DOM.getScrollbarWidth()+parseInt(h.getComputedStyle("paddingRight"),10))+"px";for(j=0,g=k.length;j<g;j+=(h.rowSpan||1)){h=f.one(k[j].cells[k[j].cells.length-1]).setStyle("paddingRight",l);}},_setScrollable:function(g){if(g===true){g="xy";}if(a(g)){g=g.toLowerCase();}return(g===false||g==="y"||g==="x"||g==="xy")?g:f.Attribute.INVALID_VALUE;},_setScrollProperties:function(){var i=this.get("scrollable")||"",h=this.get("width"),g=this.get("height");this._xScroll=h&&i.indexOf("x")>-1;this._yScroll=g&&i.indexOf("y")>-1;},_setYScrollColWidths:function(){var j=this._yScrollNode,i=j&&j.one("> table"),h,g;if(i){j.all("colgroup,col").remove();h=this._colgroupNode.cloneNode(true);h.set("id",f.stamp(h));if(!f.Features.test("table","badColWidth")){g=h.all("col").pop();g.setStyle("width",(parseInt(g.getStyle("width"),10)-1-f.DOM.getScrollbarWidth())+"px");}i.insertBefore(h,i.one("> thead, > tfoot, > tbody"));}},_splitYScrollContent:function(){var i=this._tableNode,j=this._yScrollTable,k=f.DOM.getScrollbarWidth(),g,h;this.get("boundingBox").addClass(this.getClassName("scrollable-y"));if(!j){this._fixColumnWidths();this._setHeaderScrollPadding();h=parseInt(i.getComputedStyle("width"),10);i.setStyle("width",h+"px");this._createYScrollNode();j=this._yScrollNode;g=j.one("table");g.append(this._tbodyNode);i.insert(j,"after");j.setStyles({height:this._calcScrollHeight()+"px",width:(h-2)+"px"});g.setStyle("width",(h-k-1)+"px");this._setARIARoles();}this._setYScrollColWidths();},_syncScrollUI:function(){var k=this._xScroll||this._yScroll,h=this.get("contentBox"),j=this._yScrollNode||h,i=j.one("table"),g=this._yScroll&&(i.get("scrollHeight")>j.get("clientHeight"));this._uiSetScrollable();if(k){if(g){this._splitYScrollContent();}else{this._mergeYScrollContent();}}else{this._mergeYScrollContent();}},_uiSetWidth:function(g){var h=parseInt(g,10)&&(this.get("scrollable")||"").indexOf("x")>-1;if(e(g)){g+=this.DEF_UNIT;}this._uiSetDim("width",g);this._tableNode.setStyle("width",h?"":g);this.get("contentBox").setStyle("width",h?g:"");if(this._yScrollNode){this._mergeYScrollContent();this._syncScrollUI();}},_uiSetScrollable:function(){this.get("boundingBox").toggleClass(this.getClassName("scrollable","x"),this._xScroll).toggleClass(this.getClassName("scrollable","y"),this._yScroll);}},true);f.Base.mix(f.DataTable,[b]);},"@VERSION@",{skinnable:true,requires:["datatable-base","dom-screen"]});