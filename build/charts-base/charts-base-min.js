YUI.add("charts-base",function(b,i){var C=b.config,w=C.win,g=C.doc,r=b.Lang,n=r.isString,B=b.DOM,l,q,v,a,c=b.ClassNameManager.getClassName,o=c("seriesmarker"),s,E,x,A,u;s=function(F){s.superclass.constructor.apply(this,arguments);};s.NAME="shapeGroup";b.extend(s,b.Path,{_draw:function(){var M=this.get("xvalues"),J=this.get("yvalues"),Q,P,G,I,X=0,Y,U=[],K=this.get("dimensions"),V=K.width,R=K.height,H=K.radius,L=K.yRadius,S=this.get("id"),F=this.node.className,W=r.isArray(V),T=r.isArray(R),N=r.isArray(H),O=r.isArray(L);if(M&&J&&M.length>0){this.clear();Y=M.length;for(;X<Y;++X){Q=M[X];P=J[X];G=N?H[X]:H;I=O?L[X]:L;if(!isNaN(Q)&&!isNaN(P)&&!isNaN(G)){this.drawShape({x:Q,y:P,width:W?V[X]:V,height:T?R[X]:R,radius:G,yRadius:I});this.closePath();U[X]={id:S+"_"+X,className:F,coords:(Q-this._left)+", "+(P-this._top)+", "+H,shape:"circle"};}}this._closePath();}},_getRadiusCollection:function(I){var G=0,F=I.length,H=[];for(;G<F;++G){H[G]=I[G]*0.5;}return H;}});s.ATTRS=b.merge(b.Path.ATTRS,{dimensions:{getter:function(){var J=this._dimensions,H,G,I,F;if(J.hasOwnProperty("radius")){return J;}else{I=J.width;F=J.height;H=r.isArray(I)?this._getRadiusCollection(I):(I*0.5);G=r.isArray(F)?this._getRadiusCollection(F):(F*0.5);return{width:I,height:F,radius:H,yRadius:G};}},setter:function(F){this._dimensions=F;return F;}},xvalues:{getter:function(){return this._xvalues;},setter:function(F){this._xvalues=F;}},yvalues:{getter:function(){return this._yvalues;},setter:function(F){this._yvalues=F;}}});b.ShapeGroup=s;E=function(F){E.superclass.constructor.apply(this,arguments);};E.NAME="circleGroup";b.extend(E,b.ShapeGroup,{drawShape:function(F){this.drawCircle(F.x,F.y,F.radius);}});E.ATTRS=b.merge(b.ShapeGroup.ATTRS,{dimensions:{getter:function(){var J=this._dimensions,H,G,I,F;if(J.hasOwnProperty("radius")){return J;}else{I=J.width;F=J.height;H=r.isArray(I)?this._getRadiusCollection(I):(I*0.5);G=H;return{width:I,height:F,radius:H,yRadius:G};}}}});E.ATTRS=b.ShapeGroup.ATTRS;b.CircleGroup=E;x=function(F){x.superclass.constructor.apply(this,arguments);};x.NAME="rectGroup";b.extend(x,b.ShapeGroup,{drawShape:function(F){this.drawRect(F.x,F.y,F.width,F.height);}});x.ATTRS=b.ShapeGroup.ATTRS;b.RectGroup=x;u=function(F){u.superclass.constructor.apply(this,arguments);};u.NAME="diamondGroup";b.extend(u,b.ShapeGroup,{drawShape:function(F){this.drawDiamond(F.x,F.y,F.width,F.height);}});u.ATTRS=b.ShapeGroup.ATTRS;b.DiamondGroup=u;A=function(F){A.superclass.constructor.apply(this,arguments);};A.NAME="diamondGroup";b.extend(A,b.ShapeGroup,{drawShape:function(F){this.drawEllipse(F.x,F.y,F.width,F.height);}});A.ATTRS=b.ShapeGroup.ATTRS;b.EllipseGroup=A;function t(){}t.ATTRS={styles:{getter:function(){this._styles=this._styles||this._getDefaultStyles();return this._styles;},setter:function(F){this._styles=this._setStyles(F);}},graphic:{}};t.NAME="renderer";t.prototype={_styles:null,_setStyles:function(G){var F=this.get("styles");return this._mergeStyles(G,F);},_mergeStyles:function(G,F){if(!F){F={};}var H=b.merge(F,{});b.Object.each(G,function(K,J,I){if(F.hasOwnProperty(J)&&r.isObject(K)&&!r.isFunction(K)&&!r.isArray(K)){H[J]=this._mergeStyles(K,F[J]);}else{H[J]=K;}},this);return H;},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}};}};b.augment(t,b.Attribute);b.Renderer=t;l=function(){};l.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:4,bottom:0};},setTickOffsets:function(){var H=this,J=H.get("styles").majorTicks,G=J.length,F=G*0.5,I=J.display;H.set("topTickOffset",0);H.set("bottomTickOffset",0);switch(I){case"inside":H.set("rightTickOffset",G);H.set("leftTickOffset",0);break;case"outside":H.set("rightTickOffset",0);H.set("leftTickOffset",G);break;case"cross":H.set("rightTickOffset",F);H.set("leftTickOffset",F);break;default:H.set("rightTickOffset",0);H.set("leftTickOffset",0);break;}},drawTick:function(M,N,I){var L=this,F=L.get("styles"),K=F.padding,J=I.length,G={x:K.left,y:N.y},H={x:J+K.left,y:N.y};L.drawLine(M,G,H);},getLineStart:function(){var F=this.get("styles"),J=F.padding,K=F.majorTicks,G=K.length,I=K.display,H={x:J.left,y:0};if(I==="outside"){H.x+=G;}else{if(I==="cross"){H.x+=G/2;}}return H;},getLabelPoint:function(F){return{x:F.x-this.get("leftTickOffset"),y:F.y};},updateMaxLabelSize:function(J,H){var N=this,K=this._labelRotationProps,F=K.rot,I=K.absRot,M=K.sinRadians,G=K.cosRadians,L;if(F===0){L=J;}else{if(I===90){L=H;}else{L=(G*J)+(M*H);}}N._maxLabelSize=Math.max(N._maxLabelSize,L);},getExplicitlySized:function(I){if(this._explicitWidth){var H=this,F=H._explicitWidth,G=H._totalTitleSize,K=H.get("leftTickOffset"),J=I.label.margin.right;H._maxLabelSize=F-(K+J+G);return true;}return false;},positionTitle:function(M){var O=this,F=O._titleBounds,G=O.get("styles").title.margin,J=O._titleRotationProps,N=F.right-F.left,I=M.offsetWidth,H=M.offsetHeight,L=(I*-0.5)+(N*0.5),K=(O.get("height")*0.5)-(H*0.5);J.labelWidth=I;J.labelHeight=H;if(G&&G.left){L+=G.left;}J.x=L;J.y=K;J.transformOrigin=[0.5,0.5];O._rotate(M,J);},positionLabel:function(P,T,R,K){var S=this,Q=S.get("leftTickOffset"),M=this._totalTitleSize,H=T.x+M-Q,L=T.y,O=this._labelRotationProps,G=O.rot,J=O.absRot,F=S._maxLabelSize,N=this._labelWidths[K],I=this._labelHeights[K];if(G===0){H-=N;L-=I*0.5;}else{if(G===90){H-=N*0.5;}else{if(G===-90){H-=N*0.5;L-=I;}else{H-=N+(I*J/360);L-=I*0.5;}}}O.labelWidth=N;O.labelHeight=I;O.x=Math.round(F+H);O.y=Math.round(L);this._rotate(P,O);},_setRotationCoords:function(J){var G=J.rot,H=J.absRot,K,I,F=J.labelWidth,L=J.labelHeight;if(G===0){K=F;I=L*0.5;}else{if(G===90){I=0;K=F*0.5;}else{if(G===-90){K=F*0.5;I=L;}else{K=F+(L*H/360);I=L*0.5;}}}J.x-=K;J.y-=I;},_getTransformOrigin:function(F){var G;if(F===0){G=[0,0];}else{if(F===90){G=[0.5,0];}else{if(F===-90){G=[0.5,1];}else{G=[1,0.5];}}}return G;},offsetNodeForTick:function(F){},setCalculatedSize:function(){var K=this,M=this.get("graphic"),J=K.get("styles"),I=J.label,L=K.get("leftTickOffset"),G=K._maxLabelSize,H=this._totalTitleSize,F=Math.round(H+L+G+I.margin.right);
if(this._explicitWidth){F=this._explicitWidth;}this.set("calculatedWidth",F);M.set("x",F-L);}};b.LeftAxisLayout=l;q=function(){};q.prototype={_getDefaultMargins:function(){return{top:0,left:4,right:0,bottom:0};},setTickOffsets:function(){var H=this,J=H.get("styles").majorTicks,G=J.length,F=G*0.5,I=J.display;H.set("topTickOffset",0);H.set("bottomTickOffset",0);switch(I){case"inside":H.set("leftTickOffset",G);H.set("rightTickOffset",0);break;case"outside":H.set("leftTickOffset",0);H.set("rightTickOffset",G);break;case"cross":H.set("rightTickOffset",F);H.set("leftTickOffset",F);break;default:H.set("leftTickOffset",0);H.set("rightTickOffset",0);break;}},drawTick:function(M,N,I){var L=this,F=L.get("styles"),K=F.padding,J=I.length,G={x:K.left,y:N.y},H={x:K.left+J,y:N.y};L.drawLine(M,G,H);},getLineStart:function(){var H=this,F=H.get("styles"),K=F.padding,L=F.majorTicks,G=L.length,J=L.display,I={x:K.left,y:K.top};if(J==="inside"){I.x+=G;}else{if(J==="cross"){I.x+=G/2;}}return I;},getLabelPoint:function(F){return{x:F.x+this.get("rightTickOffset"),y:F.y};},updateMaxLabelSize:function(J,H){var N=this,K=this._labelRotationProps,F=K.rot,I=K.absRot,M=K.sinRadians,G=K.cosRadians,L;if(F===0){L=J;}else{if(I===90){L=H;}else{L=(G*J)+(M*H);}}N._maxLabelSize=Math.max(N._maxLabelSize,L);},getExplicitlySized:function(I){if(this._explicitWidth){var H=this,F=H._explicitWidth,G=this._totalTitleSize,K=H.get("rightTickOffset"),J=I.label.margin.right;H._maxLabelSize=F-(K+J+G);return true;}return false;},positionTitle:function(M){var O=this,F=O._titleBounds,G=O.get("styles").title.margin,J=O._titleRotationProps,I=M.offsetWidth,H=M.offsetHeight,N=F.right-F.left,L=this.get("width")-(I*0.5)-(N*0.5),K=(O.get("height")*0.5)-(H*0.5);J.labelWidth=I;J.labelHeight=H;if(G&&G.right){L-=G.left;}J.x=L;J.y=K;J.transformOrigin=[0.5,0.5];O._rotate(M,J);},positionLabel:function(P,T,R,K){var S=this,Q=S.get("rightTickOffset"),O=R.label,H=0,G=T.x,L=T.y,N=this._labelRotationProps,F=N.rot,J=N.absRot,M=this._labelWidths[K],I=this._labelHeights[K];if(O.margin&&O.margin.left){H=O.margin.left;}if(F===0){L-=I*0.5;}else{if(F===90){G-=M*0.5;L-=I;}else{if(F===-90){G-=M*0.5;}else{L-=I*0.5;G+=I/2*J/90;}}}G+=H;G+=Q;N.labelWidth=M;N.labelHeight=I;N.x=Math.round(G);N.y=Math.round(L);this._rotate(P,N);},_setRotationCoords:function(J){var G=J.rot,H=J.absRot,K=0,I=0,F=J.labelWidth,L=J.labelHeight;if(G===0){I=L*0.5;}else{if(G===90){K=F*0.5;I=L;}else{if(G===-90){K=F*0.5;}else{I=L*0.5;K=L/2*H/90;}}}J.x-=K;J.y-=I;},_getTransformOrigin:function(F){var G;if(F===0){G=[0,0];}else{if(F===90){G=[0.5,1];}else{if(F===-90){G=[0.5,0];}else{G=[0,0.5];}}}return G;},offsetNodeForTick:function(F){var G=this,I=G.get("leftTickOffset"),H=0-I;F.setStyle("left",H);},setCalculatedSize:function(){var J=this,I=J.get("styles"),G=I.label,H=this._totalTitleSize,F=Math.round(J.get("rightTickOffset")+J._maxLabelSize+H+G.margin.left);if(this._explicitWidth){F=this._explicitWidth;}J.set("calculatedWidth",F);J.get("contentBox").setStyle("width",F);}};b.RightAxisLayout=q;v=function(){};v.prototype={_getDefaultMargins:function(){return{top:4,left:0,right:0,bottom:0};},setTickOffsets:function(){var H=this,J=H.get("styles").majorTicks,G=J.length,F=G*0.5,I=J.display;H.set("leftTickOffset",0);H.set("rightTickOffset",0);switch(I){case"inside":H.set("topTickOffset",G);H.set("bottomTickOffset",0);break;case"outside":H.set("topTickOffset",0);H.set("bottomTickOffset",G);break;case"cross":H.set("topTickOffset",F);H.set("bottomTickOffset",F);break;default:H.set("topTickOffset",0);H.set("bottomTickOffset",0);break;}},getLineStart:function(){var F=this.get("styles"),J=F.padding,K=F.majorTicks,G=K.length,I=K.display,H={x:0,y:J.top};if(I==="inside"){H.y+=G;}else{if(I==="cross"){H.y+=G/2;}}return H;},drawTick:function(M,N,I){var L=this,F=L.get("styles"),K=F.padding,J=I.length,G={x:N.x,y:K.top},H={x:N.x,y:J+K.top};L.drawLine(M,G,H);},getLabelPoint:function(F){return{x:F.x,y:F.y+this.get("bottomTickOffset")};},updateMaxLabelSize:function(J,H){var N=this,K=this._labelRotationProps,F=K.rot,I=K.absRot,M=K.sinRadians,G=K.cosRadians,L;if(F===0){L=H;}else{if(I===90){L=J;}else{L=(M*J)+(G*H);}}N._maxLabelSize=Math.max(N._maxLabelSize,L);},getExplicitlySized:function(J){if(this._explicitHeight){var I=this,G=I._explicitHeight,F=I._totalTitleSize,H=I.get("bottomTickOffset"),K=J.label.margin.right;I._maxLabelSize=G-(H+K+F);return true;}return false;},positionTitle:function(N){var O=this,F=O._titleBounds,G=O.get("styles").title.margin,K=O._titleRotationProps,I=F.bottom-F.top,J=N.offsetWidth,H=N.offsetHeight,M=(O.get("width")*0.5)-(J*0.5),L=O.get("height")-H/2-I/2;K.labelWidth=J;K.labelHeight=H;if(G&&G.bottom){L-=G.bottom;}K.x=M;K.y=L;K.transformOrigin=[0.5,0.5];O._rotate(N,K);},positionLabel:function(P,T,R,K){var S=this,Q=S.get("bottomTickOffset"),O=R.label,H=0,N=S._labelRotationProps,G=N.rot,J=N.absRot,F=Math.round(T.x),L=Math.round(T.y),M=S._labelWidths[K],I=S._labelHeights[K];if(O.margin&&O.margin.top){H=O.margin.top;}if(G>0){L-=I/2*G/90;}else{if(G<0){F-=M;L-=I/2*J/90;}else{F-=M*0.5;}}L+=H;L+=Q;N.labelWidth=M;N.labelHeight=I;N.x=F;N.y=L;S._rotate(P,N);},_setRotationCoords:function(J){var G=J.rot,H=J.absRot,F=J.labelWidth,L=J.labelHeight,K,I;if(G>0){K=0;I=L/2*G/90;}else{if(G<0){K=F;I=L/2*H/90;}else{K=F*0.5;I=0;}}J.x-=K;J.y-=I;},_getTransformOrigin:function(F){var G;if(F>0){G=[0,0.5];}else{if(F<0){G=[1,0.5];}else{G=[0,0];}}return G;},offsetNodeForTick:function(F){var G=this;G.get("contentBox").setStyle("top",0-G.get("topTickOffset"));},setCalculatedSize:function(){var J=this,I=J.get("styles"),G=I.label,H=J._totalTitleSize,F=Math.round(J.get("bottomTickOffset")+J._maxLabelSize+G.margin.top+H);if(J._explicitHeight){F=J._explicitHeight;}J.set("calculatedHeight",F);}};b.BottomAxisLayout=v;a=function(){};a.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:0,bottom:4};},setTickOffsets:function(){var H=this,J=H.get("styles").majorTicks,G=J.length,F=G*0.5,I=J.display;H.set("leftTickOffset",0);H.set("rightTickOffset",0);
switch(I){case"inside":H.set("bottomTickOffset",G);H.set("topTickOffset",0);break;case"outside":H.set("bottomTickOffset",0);H.set("topTickOffset",G);break;case"cross":H.set("topTickOffset",F);H.set("bottomTickOffset",F);break;default:H.set("topTickOffset",0);H.set("bottomTickOffset",0);break;}},getLineStart:function(){var H=this,F=H.get("styles"),K=F.padding,L=F.majorTicks,G=L.length,J=L.display,I={x:0,y:K.top};if(J==="outside"){I.y+=G;}else{if(J==="cross"){I.y+=G/2;}}return I;},drawTick:function(M,N,I){var L=this,F=L.get("styles"),K=F.padding,J=I.length,G={x:N.x,y:K.top},H={x:N.x,y:J+K.top};L.drawLine(M,G,H);},getLabelPoint:function(F){return{x:F.x,y:F.y-this.get("topTickOffset")};},updateMaxLabelSize:function(J,H){var N=this,K=this._labelRotationProps,F=K.rot,I=K.absRot,M=K.sinRadians,G=K.cosRadians,L;if(F===0){L=H;}else{if(I===90){L=J;}else{L=(M*J)+(G*H);}}N._maxLabelSize=Math.max(N._maxLabelSize,L);},getExplicitlySized:function(I){if(this._explicitHeight){var H=this,G=H._explicitHeight,F=H._totalTitleSize,K=H.get("topTickOffset"),J=I.label.margin.right;H._maxLabelSize=G-(K+J+F);return true;}return false;},positionTitle:function(N){var O=this,F=O._titleBounds,G=O.get("styles").title.margin,K=O._titleRotationProps,J=N.offsetWidth,H=N.offsetHeight,I=F.bottom-F.top,M=(O.get("width")*0.5)-(J*0.5),L=I/2-H/2;K.labelWidth=J;K.labelHeight=H;if(G&&G.top){L+=G.top;}K.x=M;K.y=L;K.transformOrigin=[0.5,0.5];O._rotate(N,K);},positionLabel:function(P,S,Q,K){var R=this,M=this._totalTitleSize,F=R._maxLabelSize,H=S.x,L=S.y+M+F,O=this._labelRotationProps,G=O.rot,J=O.absRot,N=this._labelWidths[K],I=this._labelHeights[K];if(G===0){H-=N*0.5;L-=I;}else{if(G===90){H-=N;L-=(I*0.5);}else{if(G===-90){L-=(I*0.5);}else{if(G>0){H-=N;L-=I-(I*G/180);}else{L-=I-(I*J/180);}}}}O.x=Math.round(H);O.y=Math.round(L);O.labelWidth=N;O.labelHeight=I;this._rotate(P,O);},_setRotationCoords:function(J){var G=J.rot,H=J.absRot,F=J.labelWidth,L=J.labelHeight,K,I;if(G===0){K=F*0.5;I=L;}else{if(G===90){K=F;I=(L*0.5);}else{if(G===-90){I=(L*0.5);}else{if(G>0){K=F;I=L-(L*G/180);}else{I=L-(L*H/180);}}}}J.x-=K;J.y-=I;},_getTransformOrigin:function(F){var G;if(F===0){G=[0,0];}else{if(F===90){G=[1,0.5];}else{if(F===-90){G=[0,0.5];}else{if(F>0){G=[1,0.5];}else{G=[0,0.5];}}}}return G;},offsetNodeForTick:function(F){},setCalculatedSize:function(){var J=this,M=J.get("graphic"),I=J.get("styles"),H=I.label.margin,L=H.bottom+J._maxLabelSize,G=J._totalTitleSize,K=this.get("topTickOffset"),F=Math.round(K+L+G);if(this._explicitHeight){F=this._explicitWidth;}J.set("calculatedHeight",F);M.set("y",F-K);}};b.TopAxisLayout=a;b.Axis=b.Base.create("axis",b.Widget,[b.Renderer],{_calculatedWidth:0,_calculatedHeight:0,_dataChangeHandler:function(F){if(this.get("rendered")){this._drawAxis();}},_positionChangeHandler:function(F){this._updateGraphic(F.newVal);this._updateHandler();},_updateGraphic:function(F){var G=this.get("graphic");if(F=="none"){if(G){G.destroy();}}else{if(!G){this._setCanvas();}}},_updateHandler:function(F){if(this.get("rendered")){this._drawAxis();}},renderUI:function(){this._updateGraphic(this.get("position"));},syncUI:function(){var J=this._layout,I,H,F,K,G;if(J){I=J._getDefaultMargins();H=this.get("styles");F=H.label.margin;K=H.title.margin;for(G in I){if(I.hasOwnProperty(G)){F[G]=F[G]===undefined?I[G]:F[G];K[G]=K[G]===undefined?I[G]:K[G];}}}this._drawAxis();},_setCanvas:function(){var F=this.get("contentBox"),K=this.get("boundingBox"),J=this.get("position"),H=this._parentNode,G=this.get("width"),I=this.get("height");K.setStyle("position","absolute");K.setStyle("zIndex",2);G=G?G+"px":H.getStyle("width");I=I?I+"px":H.getStyle("height");if(J==="top"||J==="bottom"){F.setStyle("width",G);}else{F.setStyle("height",I);}F.setStyle("position","relative");F.setStyle("left","0px");F.setStyle("top","0px");this.set("graphic",new b.Graphic());this.get("graphic").render(F);},_getDefaultStyles:function(){var F={majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},title:{color:"#808080",alpha:1,fontSize:"85%",rotation:undefined,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},hideOverlappingLabelTicks:false};return b.merge(b.Renderer.prototype._getDefaultStyles(),F);},_handleSizeChange:function(I){var H=I.attrName,K=this.get("position"),G=K=="left"||K=="right",F=this.get("contentBox"),J=K=="bottom"||K=="top";F.setStyle("width",this.get("width"));F.setStyle("height",this.get("height"));if((J&&H=="width")||(G&&H=="height")){this._drawAxis();}},_layoutClasses:{top:a,bottom:v,left:l,right:q},drawLine:function(H,G,F){H.moveTo(G.x,G.y);H.lineTo(F.x,F.y);},_getTextRotationProps:function(J){if(J.rotation===undefined){switch(this.get("position")){case"left":J.rotation=-90;break;case"right":J.rotation=90;break;default:J.rotation=0;break;}}var G=Math.min(90,Math.max(-90,J.rotation)),I=Math.abs(G),H=Math.PI/180,K=parseFloat(parseFloat(Math.sin(I*H)).toFixed(8)),F=parseFloat(parseFloat(Math.cos(I*H)).toFixed(8));return{rot:G,absRot:I,radCon:H,sinRadians:K,cosRadians:F,textAlpha:J.alpha};},_drawAxis:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;if(this._layout){var N=this.get("styles"),P=N.line,L=N.label,ab=N.majorTicks,F=ab.display!="none",O,I=N.majorUnit,Y,W,X=0,Z=this._layout,V,ac,R,M,aa,G,K=this.get("labelFunction"),H=this.get("labelFunctionScope"),J=this.get("labelFormat"),Q=this.get("graphic"),S=this.get("path"),T,U;this._labelWidths=[];this._labelHeights=[];Q.set("autoDraw",false);S.clear();S.set("stroke",{weight:P.weight,color:P.color,opacity:P.alpha});this._labelRotationProps=this._getTextRotationProps(L);this._labelRotationProps.transformOrigin=Z._getTransformOrigin(this._labelRotationProps.rot);
Z.setTickOffsets.apply(this);V=this.getLength();R=Z.getLineStart.apply(this);Y=this.getTotalMajorUnits(I);W=this.getMajorUnitDistance(Y,V,I);this.set("edgeOffset",this.getEdgeOffset(Y,V)*0.5);if(Y<1){this._clearLabelCache();}else{O=this.getFirstPoint(R);this.drawLine(S,R,this.getLineEnd(O));if(F){T=this.get("tickPath");T.clear();T.set("stroke",{weight:ab.weight,color:ab.color,opacity:ab.alpha});Z.drawTick.apply(this,[T,O,ab]);}this._createLabelCache();this._tickPoints=[];this._maxLabelSize=0;this._totalTitleSize=0;this._titleSize=0;this._setTitle();U=Z.getExplicitlySized.apply(this,[N]);for(;X<Y;++X){if(F){Z.drawTick.apply(this,[T,O,ab]);}ac=this.getPosition(O);M=this.getLabel(O,L);this._labels.push(M);this._tickPoints.push({x:O.x,y:O.y});this.get("appendLabelFunction")(M,K.apply(H,[this.getLabelByIndex(X,Y),J]));aa=Math.round(M.offsetWidth);G=Math.round(M.offsetHeight);if(!U){this._layout.updateMaxLabelSize.apply(this,[aa,G]);}this._labelWidths.push(aa);this._labelHeights.push(G);O=this.getNextPoint(O,W);}this._clearLabelCache();if(this.get("overlapGraph")){Z.offsetNodeForTick.apply(this,[this.get("contentBox")]);}Z.setCalculatedSize.apply(this);if(this._titleTextField){this._layout.positionTitle.apply(this,[this._titleTextField]);}for(X=0;X<Y;++X){Z.positionLabel.apply(this,[this.get("labels")[X],this._tickPoints[X],N,X]);}}}this._drawing=false;if(this._callLater){this._drawAxis();}else{this._updatePathElement();this.fire("axisRendered");}},_setTotalTitleSize:function(N){var L=this._titleTextField,M=L.offsetWidth,J=L.offsetHeight,G=this._titleRotationProps.rot,F,O,H=N.margin,I=this.get("position"),K=new b.Matrix();K.rotate(G);F=K.getContentRect(M,J);if(I=="left"||I=="right"){O=F.right-F.left;if(H){O+=H.left+H.right;}}else{O=F.bottom-F.top;if(H){O+=H.top+H.bottom;}}this._titleBounds=F;this._totalTitleSize=O;},_updatePathElement:function(){var F=this._path,I=this._tickPath,G=false,H=this.get("graphic");if(F){G=true;F.end();}if(I){G=true;I.end();}if(G){H._redraw();}},_setTitle:function(){var H,J,I,K=this.get("title"),G=this._titleTextField,F;if(K!==null&&K!==undefined){I={rotation:"rotation",margin:"margin",alpha:"alpha"};J=this.get("styles").title;if(!G){G=g.createElement("span");G.style.display="block";G.style.whiteSpace="nowrap";G.setAttribute("class","axisTitle");this.get("contentBox").append(G);}else{if(!g.createElementNS){if(G.style.filter){G.style.filter=null;}}}G.style.position="absolute";for(H in J){if(J.hasOwnProperty(H)&&!I.hasOwnProperty(H)){G.style[H]=J[H];}}this.get("appendTitleFunction")(G,K);this._titleTextField=G;this._titleRotationProps=this._getTextRotationProps(J);this._setTotalTitleSize(J);}else{if(G){F=G.parentNode;if(F){F.removeChild(G);}this._titleTextField=null;this._totalTitleSize=0;}}},getLabel:function(K,I){var G,F,J=this._labelCache,H={rotation:"rotation",margin:"margin",alpha:"alpha"};if(J&&J.length>0){F=J.shift();}else{F=g.createElement("span");F.className=b.Lang.trim([F.className,"axisLabel"].join(" "));this.get("contentBox").append(F);}if(!g.createElementNS){if(F.style.filter){F.style.filter=null;}}F.style.display="block";F.style.whiteSpace="nowrap";F.style.position="absolute";for(G in I){if(I.hasOwnProperty(G)&&!H.hasOwnProperty(G)){F.style[G]=I[G];}}return F;},_createLabelCache:function(){if(this._labels){while(this._labels.length>0){this._labelCache.push(this._labels.shift());}}else{this._clearLabelCache();}this._labels=[];},_clearLabelCache:function(){if(this._labelCache){var F=this._labelCache.length,H=0,G;for(;H<F;++H){G=this._labelCache[H];this._removeChildren(G);b.Event.purgeElement(G,true);G.parentNode.removeChild(G);}}this._labelCache=[];},getLineEnd:function(H){var F=this.get("width"),G=this.get("height"),I=this.get("position");if(I==="top"||I==="bottom"){return{x:F,y:H.y};}else{return{x:H.x,y:G};}},getLength:function(){var G,I=this.get("styles"),J=I.padding,F=this.get("width"),H=this.get("height"),K=this.get("position");if(K==="top"||K==="bottom"){G=F-(J.left+J.right);}else{G=H-(J.top+J.bottom);}return G;},getFirstPoint:function(I){var F=this.get("styles"),J=this.get("position"),H=F.padding,G={x:I.x,y:I.y};if(J==="top"||J==="bottom"){G.x+=H.left+this.get("edgeOffset");}else{G.y+=this.get("height")-(H.top+this.get("edgeOffset"));}return G;},getNextPoint:function(F,G){var H=this.get("position");if(H==="top"||H==="bottom"){F.x=F.x+G;}else{F.y=F.y-G;}return F;},getLastPoint:function(){var G=this.get("styles"),H=G.padding,F=this.get("width"),I=this.get("position");if(I==="top"||I==="bottom"){return{x:F-H.right,y:H.top};}else{return{x:H.left,y:H.top};}},getPosition:function(F){var K,I=this.get("height"),H=this.get("styles"),J=H.padding,L=this.get("position"),G=this.get("dataType");if(L==="left"||L==="right"){if(G==="numeric"){K=(I-(J.top+J.bottom))-(F.y-J.top);}else{K=F.y-J.top;}}else{K=F.x-J.left;}return K;},_rotate:function(L,I){var F=I.rot,N=I.x,K=I.y,H,O,M=new b.Matrix(),G=I.transformOrigin||[0,0],J;if(g.createElementNS){M.translate(N,K);M.rotate(F);B.setStyle(L,"transformOrigin",(G[0]*100)+"% "+(G[1]*100)+"%");B.setStyle(L,"transform",M.toCSSText());}else{O=I.textAlpha;if(r.isNumber(O)&&O<1&&O>-1&&!isNaN(O)){H="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(O*100)+")";}if(F!==0){M.rotate(F);J=M.getContentRect(I.labelWidth,I.labelHeight);M.init();M.translate(J.left,J.top);M.translate(N,K);this._simulateRotateWithTransformOrigin(M,F,G,I.labelWidth,I.labelHeight);if(H){H+=" ";}else{H="";}H+=M.toFilterText();L.style.left=M.dx+"px";L.style.top=M.dy+"px";}else{L.style.left=N+"px";L.style.top=K+"px";}if(H){L.style.filter=H;}}},_simulateRotateWithTransformOrigin:function(H,G,I,F,J){var L=I[0]*F,K=I[1]*J;L=!isNaN(L)?L:0;K=!isNaN(K)?K:0;H.translate(L,K);H.rotate(G);H.translate(-L,-K);},getMaxLabelBounds:function(){return this._getLabelBounds(this.getMaximumValue());},getMinLabelBounds:function(){return this._getLabelBounds(this.getMinimumValue());},_getLabelBounds:function(K){var J=this._layout,I=this.get("styles").label,F=new b.Matrix(),G,H=this._getTextRotationProps(I);
H.transformOrigin=J._getTransformOrigin(H.rot);G=this.getLabel({x:0,y:0},I);this.get("appendLabelFunction")(G,this.get("labelFunction").apply(this,[K,this.get("labelFormat")]));H.labelWidth=G.offsetWidth;H.labelHeight=G.offsetHeight;this._removeChildren(G);b.Event.purgeElement(G,true);G.parentNode.removeChild(G);H.x=0;H.y=0;J._setRotationCoords(H);F.translate(H.x,H.y);this._simulateRotateWithTransformOrigin(F,H.rot,H.transformOrigin,H.labelWidth,H.labelHeight);return F.getContentRect(H.labelWidth,H.labelHeight);},_removeChildren:function(F){if(F.hasChildNodes()){var G;while(F.firstChild){G=F.firstChild;this._removeChildren(G);F.removeChild(G);}}},destructor:function(){var G=this.get("contentBox").getDOMNode(),J=this.get("labels"),I=this.get("graphic"),H,F=J?J.length:0;if(F>0){while(J.length>0){H=J.shift();this._removeChildren(H);G.removeChild(H);H=null;}}if(I){I.destroy();}},_maxLabelSize:0,_setText:function(F,G){F.innerHTML="";if(r.isNumber(G)){G=G+"";}else{if(!G){G="";}}if(n(G)){G=g.createTextNode(G);}F.appendChild(G);}},{ATTRS:{width:{lazyAdd:false,getter:function(){if(this._explicitWidth){return this._explicitWidth;}return this._calculatedWidth;},setter:function(F){this._explicitWidth=F;return F;}},height:{lazyAdd:false,getter:function(){if(this._explicitHeight){return this._explicitHeight;}return this._calculatedHeight;},setter:function(F){this._explicitHeight=F;return F;}},calculatedWidth:{getter:function(){return this._calculatedWidth;},setter:function(F){this._calculatedWidth=F;return F;}},calculatedHeight:{getter:function(){return this._calculatedHeight;},setter:function(F){this._calculatedHeight=F;return F;}},edgeOffset:{value:0},graphic:{},path:{readOnly:true,getter:function(){if(!this._path){var F=this.get("graphic");if(F){this._path=F.addShape({type:"path"});}}return this._path;}},tickPath:{readOnly:true,getter:function(){if(!this._tickPath){var F=this.get("graphic");if(F){this._tickPath=F.addShape({type:"path"});}}return this._tickPath;}},node:{},position:{setter:function(G){var F=this._layoutClasses[G];if(G&&G!="none"){this._layout=new F();}return G;}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:true,getter:function(){return this._labels;}},tickPoints:{readOnly:true,getter:function(){if(this.get("position")=="none"){return this.get("styles").majorUnit.count;}return this._tickPoints;}},overlapGraph:{value:true,validator:function(F){return r.isBoolean(F);}},labelFunctionScope:{},maxLabelSize:{getter:function(){return this._maxLabelSize;},setter:function(F){this._maxLabelSize=F;return F;}},title:{value:null},labelFunction:{value:function(G,F){return G;}},appendLabelFunction:{valueFn:function(){return this._setText;}},appendTitleFunction:{valueFn:function(){return this._setText;}}}});b.AxisType=b.Base.create("baseAxis",b.Axis,[],{initializer:function(){this.after("dataReady",b.bind(this._dataChangeHandler,this));this.after("dataUpdate",b.bind(this._dataChangeHandler,this));this.after("minimumChange",b.bind(this._keyChangeHandler,this));this.after("maximumChange",b.bind(this._keyChangeHandler,this));this.after("keysChange",this._keyChangeHandler);this.after("dataProviderChange",this._dataProviderChangeHandler);this.after("alwaysShowZeroChange",this._keyChangeHandler);this.after("roundingMethodChange",this._keyChangeHandler);},bindUI:function(){this.after("stylesChange",this._updateHandler);this.after("overlapGraphChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);this.after("calculatedWidthChange",this._handleSizeChange);this.after("calculatedHeightChange",this._handleSizeChange);},_dataProviderChangeHandler:function(I){var F=this.get("keyCollection").concat(),H=this.get("keys"),G;if(H){for(G in H){if(H.hasOwnProperty(G)){delete H[G];}}}if(F&&F.length){this.set("keys",F);}},GUID:"yuibaseaxis",_type:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_data:null,_updateTotalDataFlag:true,_dataReady:false,addKey:function(F){this.set("keys",F);},_getKeyArray:function(I,J){var H=0,K,G=[],F=J.length;for(;H<F;++H){K=J[H];G[H]=K[I];}return G;},_setDataByKey:function(J,K){var I,L,G=[],H=this._dataClone.concat(),F=H.length;for(I=0;I<F;++I){L=H[I];G[I]=L[J];}this.get("keys")[J]=G;this._updateTotalDataFlag=true;},_updateTotalData:function(){var G=this.get("keys"),F;this._data=[];for(F in G){if(G.hasOwnProperty(F)){this._data=this._data.concat(G[F]);}}this._updateTotalDataFlag=false;},removeKey:function(G){var F=this.get("keys");if(F.hasOwnProperty(G)){delete F[G];this._keyChangeHandler();}},getKeyValueAt:function(G,F){var I=NaN,H=this.get("keys");if(H[G]&&r.isNumber(parseFloat(H[G][F]))){I=H[G][F];}return parseFloat(I);},getDataByKey:function(G){var F=this.get("keys");if(F[G]){return F[G];}return null;},_updateMinAndMax:function(){var K=this.get("data"),G=0,J=0,F,H,I;if(K&&K.length&&K.length>0){F=K.length;G=J=K[0];if(F>1){for(I=1;I<F;I++){H=K[I];if(isNaN(H)){continue;}G=Math.max(H,G);J=Math.min(H,J);}}}this._dataMaximum=G;this._dataMinimum=J;},getTotalMajorUnits:function(){var G,H=this.get("styles").majorUnit,F=this.get("length");if(H.determinant==="count"){G=H.count;}else{if(H.determinant==="distance"){G=(F/H.distance)+1;}}return G;},getMajorUnitDistance:function(F,I,G){var H;if(G.determinant==="count"){H=I/(F-1);}else{if(G.determinant==="distance"){H=G.distance;}}return H;},getEdgeOffset:function(G,F){return 0;},getLabelByIndex:function(J,G){var I=this.get("minimum"),F=this.get("maximum"),K=(F-I)/(G-1),H;G-=1;H=I+(J*K);return H;},_keyChangeHandler:function(F){this._updateMinAndMax();this.fire("dataUpdate");},_hasDataOverflow:function(){if(this.get("setMin")||this.get("setMax")){return true;}return false;},getMinimumValue:function(){return this.get("minimum");},getMaximumValue:function(){return this.get("maximum");}},{ATTRS:{keys:{value:{},setter:function(J){var H={},G,F,I=this.get("dataProvider");
if(r.isArray(J)){F=J.length;for(G=0;G<F;++G){H[J[G]]=this._getKeyArray(J[G],I);}}else{if(r.isString(J)){H=this.get("keys");H[J]=this._getKeyArray(J,I);}else{for(G in J){if(J.hasOwnProperty(G)){H[G]=this._getKeyArray(G,I);}}}}this._updateTotalDataFlag=true;return H;}},roundingMethod:{value:"niceNumber"},type:{readOnly:true,getter:function(){return this._type;}},dataProvider:{setter:function(F){return F;}},dataMaximum:{getter:function(){if(!this._dataMaximum){this._updateMinAndMax();}return this._dataMaximum;}},maximum:{lazyAdd:false,getter:function(){var F=this.get("dataMaximum"),G=this.get("minimum");if(G===0&&F===0){F=10;}if(r.isNumber(this._setMaximum)){F=this._setMaximum;}return parseFloat(F);},setter:function(F){this._setMaximum=parseFloat(F);return F;}},dataMinimum:{getter:function(){if(!this._dataMinimum){this._updateMinAndMax();}return this._dataMinimum;}},minimum:{lazyAdd:false,getter:function(){var F=this.get("dataMinimum");if(r.isNumber(this._setMinimum)){F=this._setMinimum;}return parseFloat(F);},setter:function(F){this._setMinimum=parseFloat(F);return F;}},setMax:{readOnly:true,getter:function(){return r.isNumber(this._setMaximum);}},setMin:{readOnly:true,getter:function(){return r.isNumber(this._setMinimum);}},data:{getter:function(){if(!this._data||this._updateTotalDataFlag){this._updateTotalData();}return this._data;}},keyCollection:{getter:function(){var H=this.get("keys"),G,F=[];for(G in H){if(H.hasOwnProperty(G)){F.push(G);}}return F;},readOnly:true}}});function m(F){m.superclass.constructor.apply(this,arguments);}m.NAME="numericAxis";m.ATTRS={alwaysShowZero:{value:true},labelFunction:{value:function(G,F){if(F){return b.DataType.Number.format(G,F);}return G;}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};b.extend(m,b.AxisType,{formatLabel:function(G,F){if(F){return b.DataType.Number.format(G,F);}return G;},getTotalByKey:function(I){var J=0,G=this.getDataByKey(I),H=0,K,F=G?G.length:0;for(;H<F;++H){K=parseFloat(G[H]);if(!isNaN(K)){J+=K;}}return J;},_type:"numeric",_getMinimumUnit:function(F,H,G){return this._getNiceNumber(Math.ceil((F-H)/G));},_getNiceNumber:function(H){var J=H,F=Math.ceil(Math.log(J)*0.4342944819032518),I=Math.pow(10,F),G;if(I/2>=J){G=Math.floor((I/2-J)/(Math.pow(10,F-1)/2));J=I/2-G*Math.pow(10,F-1)/2;}else{J=I;}if(!isNaN(J)){return J;}return H;},_updateMinAndMax:function(){var G=this.get("data"),L,F,J,I,H=0,M,N=this.get("setMax"),K=this.get("setMin");if(!N||!K){if(G&&G.length&&G.length>0){J=G.length;for(;H<J;H++){I=G[H];if(isNaN(I)){if(r.isObject(I)){F=L=0;for(M in I){if(I.hasOwnProperty(M)){L=Math.max(I[M],L);F=Math.min(I[M],F);}}}L=N?this._setMaximum:L;F=K?this._setMinimum:F;continue;}if(K){F=this._setMinimum;}else{if(F===undefined){F=I;}else{F=Math.min(I,F);}}if(N){L=this._setMaximum;}else{if(L===undefined){L=I;}else{L=Math.max(I,L);}}this._actualMaximum=L;this._actualMinimum=F;}}this._roundMinAndMax(F,L,K,N);}},_roundMinAndMax:function(L,O,M,R){var G,X,U=L>=0,I=O>0,W,F,T,N,P,V,S,K=this.getTotalMajorUnits()-1,Q=this.get("alwaysShowZero"),H=this.get("roundingMethod"),J=(O-L)/K>=1;if(H){if(H=="niceNumber"){G=this._getMinimumUnit(O,L,K);if(U&&I){if((Q||L<G)&&!M){L=0;G=this._getMinimumUnit(O,L,K);}else{L=this._roundDownToNearest(L,G);}if(R){if(!Q){L=O-(G*K);}}else{if(M){O=L+(G*K);}else{O=this._roundUpToNearest(O,G);}}}else{if(I&&!U){if(Q){N=Math.round(K/((-1*L)/O+1));N=Math.max(Math.min(N,K-1),1);P=K-N;V=Math.ceil(O/N);S=Math.floor(L/P)*-1;if(M){while(S<V&&P>=0){P--;N++;V=Math.ceil(O/N);S=Math.floor(L/P)*-1;}if(P>0){O=S*N;}else{O=L+(G*K);}}else{if(R){while(V<S&&N>=0){P++;N--;S=Math.floor(L/P)*-1;V=Math.ceil(O/N);}if(N>0){L=V*P*-1;}else{L=O-(G*K);}}else{G=Math.max(V,S);G=this._getNiceNumber(G);O=G*N;L=G*P*-1;}}}else{if(R){L=O-(G*K);}else{if(M){O=L+(G*K);}else{L=this._roundDownToNearest(L,G);O=this._roundUpToNearest(O,G);}}}}else{if(M){if(Q){O=0;}else{O=L+(G*K);}}else{if(!R){if(Q||O===0||O+G>0){O=0;G=this._getMinimumUnit(O,L,K);L=O-(G*K);}else{L=this._roundDownToNearest(L,G);O=this._roundUpToNearest(O,G);}}else{L=O-(G*K);}}}}}else{if(H=="auto"){if(U&&I){if((Q||L<(O-L)/K)&&!M){L=0;}G=(O-L)/K;if(J){G=Math.ceil(G);}O=L+(G*K);}else{if(I&&!U){if(Q){N=Math.round(K/((-1*L)/O+1));N=Math.max(Math.min(N,K-1),1);P=K-N;if(J){V=Math.ceil(O/N);S=Math.floor(L/P)*-1;}else{V=O/N;S=L/P*-1;}G=Math.max(V,S);O=G*N;L=G*P*-1;}else{G=(O-L)/K;if(J){G=Math.ceil(G);}L=this._roundDownToNearest(L,G);O=this._roundUpToNearest(O,G);}}else{G=(O-L)/K;if(J){G=Math.ceil(G);}if(Q||O===0||O+G>0){O=0;G=(O-L)/K;if(J){Math.ceil(G);}L=O-(G*K);}else{L=this._roundDownToNearest(L,G);O=this._roundUpToNearest(O,G);}}}}else{if(!isNaN(H)&&isFinite(H)){G=H;X=G*K;W=(O-L)>X;T=this._roundDownToNearest(L,G);F=this._roundUpToNearest(O,G);if(R){L=O-X;}else{if(M){O=L+X;}else{if(U&&I){if(Q||T<=0){L=0;}else{L=T;}O=L+X;}else{if(I&&!U){L=T;O=F;}else{if(Q||F>=0){O=0;}else{O=F;}L=O-X;}}}}}}}}this._dataMaximum=O;this._dataMinimum=L;},getLabelByIndex:function(J,G){var I=this.get("minimum"),F=this.get("maximum"),L=(F-I)/(G-1),H,K=this.get("roundingMethod");G-=1;if(J===0){H=I;}else{if(J===G){H=F;}else{H=(J*L);if(K=="niceNumber"){H=this._roundToNearest(H,L);}H+=I;}}return parseFloat(H);},_roundToNearest:function(H,G){G=G||1;if(G===0){return H;}var F=Math.round(this._roundToPrecision(H/G,10))*G;return this._roundToPrecision(F,10);},_roundUpToNearest:function(G,F){F=F||1;if(F===0){return G;}return Math.ceil(this._roundToPrecision(G/F,10))*F;},_roundDownToNearest:function(G,F){F=F||1;if(F===0){return G;}return Math.floor(this._roundToPrecision(G/F,10))*F;},_roundToPrecision:function(H,F){F=F||0;var G=Math.pow(10,F);return Math.round(G*H)/G;},_hasDataOverflow:function(){var H,G,F;if(this.get("setMin")||this.get("setMax")){return true;}H=this.get("roundingMethod");G=this._actualMinimum;F=this._actualMaximum;if(r.isNumber(H)&&((r.isNumber(F)&&F>this._dataMaximum)||(r.isNumber(G)&&G<this._dataMinimum))){return true;}return false;}});b.NumericAxis=m;function e(F){e.superclass.constructor.apply(this,arguments);
}e.NAME="stackedAxis";b.extend(e,b.NumericAxis,{_updateMinAndMax:function(){var M=0,G=0,L=0,F=0,J=0,H=0,N,I,O=this.get("keys"),K=this.get("setMin"),P=this.get("setMax");for(N in O){if(O.hasOwnProperty(N)){J=Math.max(J,O[N].length);}}for(;H<J;++H){L=0;F=0;for(N in O){if(O.hasOwnProperty(N)){I=O[N][H];if(isNaN(I)){continue;}if(I>=0){L+=I;}else{F+=I;}}}if(L>0){M=Math.max(M,L);}else{M=Math.max(M,F);}if(F<0){G=Math.min(G,F);}else{G=Math.min(G,L);}}this._actualMaximum=M;this._actualMinimum=G;if(P){M=this._setMaximum;}if(K){G=this._setMinimum;}this._roundMinAndMax(G,M,K,P);}});b.StackedAxis=e;function d(F){d.superclass.constructor.apply(this,arguments);}d.NAME="timeAxis";d.ATTRS={setMax:{readOnly:true,getter:function(){var F=this._getNumber(this._setMaximum);return(r.isNumber(F));}},setMin:{readOnly:true,getter:function(){var F=this._getNumber(this._setMinimum);return(r.isNumber(F));}},maximum:{getter:function(){var F=this._getNumber(this._setMaximum);if(!r.isNumber(F)){F=this._getNumber(this.get("dataMaximum"));}return parseFloat(F);},setter:function(F){this._setMaximum=this._getNumber(F);return F;}},minimum:{getter:function(){var F=this._getNumber(this._setMinimum);if(!r.isNumber(F)){F=this._getNumber(this.get("dataMinimum"));}return parseFloat(F);},setter:function(F){this._setMinimum=this._getNumber(F);return F;}},labelFunction:{value:function(G,F){G=b.DataType.Date.parse(G);if(F){return b.DataType.Date.format(G,{format:F});}return G;}},labelFormat:{value:"%b %d, %y"}};b.extend(d,b.AxisType,{formatLabel:function(G,F){G=b.DataType.Date.parse(G);if(F){return b.DataType.Date.format(G,{format:F});}return G;},GUID:"yuitimeaxis",_dataType:"time",getLabelByIndex:function(K,H){var J=this.get("minimum"),G=this.get("maximum"),F=this.get("position"),L,I;H-=1;L=((G-J)/H)*K;if(F=="bottom"||F=="top"){I=J+L;}else{I=G-L;}return I;},_getKeyArray:function(I,J){var K,G=[],H=0,L,F=J.length;for(;H<F;++H){K=J[H][I];if(r.isDate(K)){L=K.valueOf();}else{L=new Date(K);if(r.isDate(L)){L=L.valueOf();}else{if(!r.isNumber(K)){if(r.isNumber(parseFloat(K))){L=parseFloat(K);}else{if(typeof K!="string"){K=K;}L=new Date(K).valueOf();}}else{L=K;}}}G[H]=L;}return G;},_setDataByKey:function(J,K){var L,G=[],I=this._dataClone.concat(),H,M,F=I.length;for(H=0;H<F;++H){L=I[H][J];if(r.isDate(L)){M=L.valueOf();}else{M=new Date(L);if(r.isDate(M)){M=M.valueOf();}else{if(!r.isNumber(L)){if(r.isNumber(parseFloat(L))){M=parseFloat(L);}else{if(typeof L!="string"){L=L.toString();}M=new Date(L).valueOf();}}else{M=L;}}}G[H]=M;}this.get("keys")[J]=G;this._updateTotalDataFlag=true;},_getNumber:function(F){if(r.isDate(F)){F=F.valueOf();}else{if(!r.isNumber(F)&&F){F=new Date(F).valueOf();}}return F;}});b.TimeAxis=d;function f(F){f.superclass.constructor.apply(this,arguments);}f.NAME="categoryAxis";b.extend(f,b.AxisType,{formatLabel:function(G,F){return G;},_indices:null,GUID:"yuicategoryaxis",_type:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0;},_getKeyArray:function(I,J){var H=0,K,G=[],L=[],F=J.length;if(!this._indices){this._indices={};}for(;H<F;++H){K=J[H];G[H]=H;L[H]=K[I];}this._indices[I]=G;return L;},_setDataByKey:function(J){var I,K,G=[],L=[],H=this._dataClone.concat(),F=H.length;if(!this._indices){this._indices={};}for(I=0;I<F;++I){K=H[I];G[I]=I;L[I]=K[J];}this._indices[J]=G;this.get("keys")[J]=L.concat();this._updateTotalDataFlag=true;},getDataByKey:function(G){if(!this._indices){this.get("keys");}var F=this._indices;if(F[G]){return F[G];}return null;},getTotalMajorUnits:function(G,F){return this.get("data").length;},getMajorUnitDistance:function(F,I,G){var H;if(G.determinant==="count"){H=I/F;}else{if(G.determinant==="distance"){H=G.distance;}}return H;},getEdgeOffset:function(G,F){return F/G;},getKeyValueAt:function(G,F){var I=NaN,H=this.get("keys");if(H[G]&&H[G][F]){I=H[G][F];}return I;},getLabelByIndex:function(I,G){var H,J=this.get("data"),F=this.get("position");if(F=="bottom"||F=="top"){H=J[I];}else{H=J[G-(I+1)];}return H;},getMinimumValue:function(){var G=this.get("data"),F=G[0];return F;},getMaximumValue:function(){var H=this.get("data"),F=H.length-1,G=H[F];return G;}});b.CategoryAxis=f;function k(){}k.prototype={getCurveControlPoints:function(I,L){var J=[],H=1,G=I.length-1,F=[],K=[];if(G<1){return null;}J[0]={startx:I[0],starty:L[0],endx:I[1],endy:L[1]};if(G===1){J[0].ctrlx1=(2*I[0]+I[1])/3;J[0].ctrly2=(2*L[0]+L[1])/3;J[0].ctrlx2=2*J[0].ctrlx1-I[0];J[0].ctrly2=2*J[0].ctrly1-L[0];return J;}for(;H<G;++H){J.push({startx:Math.round(I[H]),starty:Math.round(L[H]),endx:Math.round(I[H+1]),endy:Math.round(L[H+1])});F[H]=4*I[H]+2*I[H+1];K[H]=4*L[H]+2*L[H+1];}F[0]=I[0]+(2*I[1]);F[G-1]=(8*I[G-1]+I[G])/2;F=this.getControlPoints(F.concat());K[0]=L[0]+(2*L[1]);K[G-1]=(8*L[G-1]+L[G])/2;K=this.getControlPoints(K.concat());for(H=0;H<G;++H){J[H].ctrlx1=Math.round(F[H]);J[H].ctrly1=Math.round(K[H]);if(H<G-1){J[H].ctrlx2=Math.round(2*I[H+1]-F[H+1]);J[H].ctrly2=Math.round(2*L[H+1]-K[H+1]);}else{J[H].ctrlx2=Math.round((I[G]+F[G-1])/2);J[H].ctrly2=Math.round((L[G]+K[G-1])/2);}}return J;},getControlPoints:function(K){var H=K.length,G=[],J=[],F=2,I=1;G[0]=K[0]/F;for(;I<H;++I){J[I]=1/F;F=(I<H-1?4:3.5)-J[I];G[I]=(K[I]-G[I-1])/F;}for(I=1;I<H;++I){G[H-I-1]-=J[H-I]*G[H-I];}return G;}};b.CurveUtil=k;function j(){}j.prototype={_stacked:true,_stackCoordinates:function(){if(this.get("direction")=="vertical"){this._stackXCoords();}else{this._stackYCoords();}},_stackXCoords:function(){var I=this.get("order"),R=this.get("type"),T=this.get("graph"),H=T.seriesTypes[R],L=0,S=this.get("xcoords"),K=this.get("ycoords"),P,O,J,U,M=S.concat(),N,G,F=[],Q;if(I>0){N=H[I-1].get("stackedXCoords");G=H[I-1].get("stackedYCoords");P=N.length;}else{P=S.length;}for(;L<P;L=L+1){if(r.isNumber(S[L])){if(I>0){J=N[L];if(!r.isNumber(J)){U=I;while(U>-1&&!r.isNumber(J)){U=U-1;if(U>-1){J=H[U].get("stackedXCoords")[L];}else{J=this._leftOrigin;}}}S[L]=S[L]+J;}M[L]=S[L];}else{F.push(L);}}this._cleanXNaN(M,K);P=F.length;if(P>0){for(L=0;
L<P;L=L+1){Q=F[L];O=I>0?N[Q]:this._leftOrigin;M[Q]=Math.max(M[Q],O);}}this.set("stackedXCoords",M);this.set("stackedYCoords",K);},_stackYCoords:function(){var J=this.get("order"),S=this.get("type"),U=this.get("graph"),N=U.get("height"),I=U.seriesTypes[S],M=0,T=this.get("xcoords"),L=this.get("ycoords"),Q,P,K,V,G=L.concat(),O,H,F=[],R;if(J>0){O=I[J-1].get("stackedXCoords");H=I[J-1].get("stackedYCoords");Q=H.length;}else{Q=L.length;}for(;M<Q;M=M+1){if(r.isNumber(L[M])){if(J>0){K=H[M];if(!r.isNumber(K)){V=J;while(V>-1&&!r.isNumber(K)){V=V-1;if(V>-1){K=I[V].get("stackedYCoords")[M];}else{K=this._bottomOrigin;}}}L[M]=K-(N-L[M]);}G[M]=L[M];}else{F.push(M);}}this._cleanYNaN(T,G);Q=F.length;if(Q>0){for(M=0;M<Q;M=M+1){R=F[M];P=J>0?H[R]:N;G[R]=Math.min(G[R],P);}}this.set("stackedXCoords",T);this.set("stackedYCoords",G);},_cleanXNaN:function(O,L){var R,Q,J,I,P,N,H,F,S=r.isNumber,G,K=0,M=L.length;for(;K<M;++K){P=O[K];N=L[K];if(!S(P)&&K>0&&K<M-1){I=L[K-1];J=this._getPreviousValidCoordValue(O,K);F=L[K+1];H=this._getNextValidCoordValue(O,K);if(S(J)&&S(H)){G=(F-I)/(H-J);O[K]=(N+(G*J)-I)/G;}R=NaN;Q=NaN;}}},_getPreviousValidCoordValue:function(I,H){var J,G=r.isNumber,F=-1;while(!G(J)&&H>F){H=H-1;J=I[H];}return J;},_getNextValidCoordValue:function(I,H){var J,G=r.isNumber,F=I.length;while(!G(J)&&H<F){H=H+1;J=I[H];}return J;},_cleanYNaN:function(O,L){var R,Q,J,I,P,N,H,F,S=r.isNumber,G,K=0,M=O.length;for(;K<M;++K){P=O[K];N=L[K];if(!S(N)&&K>0&&K<M-1){J=O[K-1];I=this._getPreviousValidCoordValue(L,K);H=O[K+1];F=this._getNextValidCoordValue(L,K);if(S(I)&&S(F)){G=(F-I)/(H-J);L[K]=I+((G*P)-(G*J));}R=NaN;Q=NaN;}}}};b.StackingUtil=j;function h(){}h.prototype={_lineDefaults:null,_getGraphic:function(){var F=this.get("graphic")||this.get("graph").get("graphic");if(!this._lineGraphic){this._lineGraphic=F.addShape({type:"path"});}this._lineGraphic.clear();return this._lineGraphic;},_toggleVisible:function(F){if(this._lineGraphic){this._lineGraphic.set("visible",F);}},drawLines:function(){if(this.get("xcoords").length<1){return;}var M=r.isNumber,N,ac,Y=this.get("direction"),T,aa,F,I=true,ab,Z,X,U,S,J=this.get("styles").line,V=J.lineType,Q=J.color||this._getDefaultColor(this.get("graphOrder"),"line"),O=J.alpha,W=J.dashLength,L=J.gapSpace,K=J.connectDiscontinuousPoints,G=J.discontinuousType,H=J.discontinuousDashLength,R=J.discontinuousGapSpace,P=this._getGraphic();if(this._stacked){N=this.get("stackedXCoords");ac=this.get("stackedYCoords");}else{N=this.get("xcoords");ac=this.get("ycoords");}T=Y==="vertical"?ac.length:N.length;P.set("stroke",{weight:J.weight,color:Q,opacity:O});for(S=0;S<T;S=++S){X=N[S];U=ac[S];F=M(X)&&M(U);if(!F){aa=F;continue;}if(I){I=false;P.moveTo(X,U);}else{if(aa){if(V!="dashed"){P.lineTo(X,U);}else{this.drawDashedLine(P,ab,Z,X,U,W,L);}}else{if(!K){P.moveTo(X,U);}else{if(G!="solid"){this.drawDashedLine(P,ab,Z,X,U,H,R);}else{P.lineTo(X,U);}}}}ab=X;Z=U;aa=true;}P.end();},drawSpline:function(){if(this.get("xcoords").length<1){return;}var P=this.get("xcoords"),J=this.get("ycoords"),R=this.getCurveControlPoints(P,J),K=R.length,M,L,G,F,Q,O,I=0,S=this.get("styles").line,T=this._getGraphic(),N=S.alpha,H=S.color||this._getDefaultColor(this.get("graphOrder"),"line");T.set("stroke",{weight:S.weight,color:H,opacity:N});T.moveTo(P[0],J[0]);for(;I<K;I=++I){Q=R[I].endx;O=R[I].endy;M=R[I].ctrlx1;L=R[I].ctrlx2;G=R[I].ctrly1;F=R[I].ctrly2;T.curveTo(M,G,L,F,Q,O);}T.end();},drawDashedLine:function(T,P,U,F,R,H,G){H=H||10;G=G||10;var J=H+G,M=F-P,Q=R-U,S=Math.sqrt(Math.pow(M,2)+Math.pow(Q,2)),K=Math.floor(Math.abs(S/J)),I=Math.atan2(Q,M),O=P,N=U,L;M=Math.cos(I)*J;Q=Math.sin(I)*J;for(L=0;L<K;++L){T.moveTo(O,N);T.lineTo(O+Math.cos(I)*H,N+Math.sin(I)*H);O+=M;N+=Q;}T.moveTo(O,N);S=Math.sqrt((F-O)*(F-O)+(R-N)*(R-N));if(S>H){T.lineTo(O+Math.cos(I)*H,N+Math.sin(I)*H);}else{if(S>0){T.lineTo(O+Math.cos(I)*S,N+Math.sin(I)*S);}}T.moveTo(F,R);},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:true,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10};}};b.augment(h,b.Attribute);b.Lines=h;function z(F){var G={area:{getter:function(){return this._defaults||this._getAreaDefaults();},setter:function(I){var H=this._defaults||this._getAreaDefaults();this._defaults=b.merge(H,I);}}};this.addAttrs(G,F);this.get("styles");}z.prototype={_getPath:function(){var F=this._path;if(!F){F=this.get("graph").get("graphic").addShape({type:"path"});this._path=F;}return F;},_toggleVisible:function(F){if(this._path){this._path.set("visible",F);}},drawFill:function(P,K){if(P.length<1){return;}var S=r.isNumber,N=P.length,H=P[0],F=K[0],M=H,L=F,U,R,G,O=true,J=0,Q=this.get("styles").area,T=this._getPath(),I=Q.color||this._getDefaultColor(this.get("graphOrder"),"slice");T.clear();T.set("fill",{color:I,opacity:Q.alpha});T.set("stroke",{weight:0});for(;J<N;J=++J){U=P[J];R=K[J];G=S(U)&&S(R);if(!G){continue;}if(O){this._firstValidX=U;this._firstValidY=R;O=false;T.moveTo(U,R);}else{T.lineTo(U,R);}M=U;L=R;}this._lastValidX=M;this._lastValidY=L;T.end();},drawAreaSpline:function(){if(this.get("xcoords").length<1){return;}var Q=this.get("xcoords"),L=this.get("ycoords"),S=this.getCurveControlPoints(Q,L),M=S.length,O,N,I,H,R,P,K=0,G=Q[0],F=L[0],T=this.get("styles").area,U=this._getPath(),J=T.color||this._getDefaultColor(this.get("graphOrder"),"slice");U.set("fill",{color:J,opacity:T.alpha});U.set("stroke",{weight:0});U.moveTo(G,F);for(;K<M;K=++K){R=S[K].endx;P=S[K].endy;O=S[K].ctrlx1;N=S[K].ctrlx2;I=S[K].ctrly1;H=S[K].ctrly2;U.curveTo(O,I,N,H,R,P);}if(this.get("direction")==="vertical"){U.lineTo(this._leftOrigin,P);U.lineTo(this._leftOrigin,F);}else{U.lineTo(R,this._bottomOrigin);U.lineTo(G,this._bottomOrigin);}U.lineTo(G,F);U.end();},drawStackedAreaSpline:function(){if(this.get("xcoords").length<1){return;}var P=this.get("xcoords"),aa=this.get("ycoords"),O,V=this.get("order"),H=this.get("type"),F=this.get("graph"),I=F.seriesTypes[H],G,S,X,R,Q,Z,Y,M,K,W=0,N,L,J=this.get("styles").area,T=this._getPath(),U=J.color||this._getDefaultColor(this.get("graphOrder"),"slice");
N=P[0];L=aa[0];O=this.getCurveControlPoints(P,aa);X=O.length;T.set("fill",{color:U,opacity:J.alpha});T.set("stroke",{weight:0});T.moveTo(N,L);for(;W<X;W=++W){M=O[W].endx;K=O[W].endy;R=O[W].ctrlx1;Q=O[W].ctrlx2;Z=O[W].ctrly1;Y=O[W].ctrly2;T.curveTo(R,Z,Q,Y,M,K);}if(V>0){G=I[V-1].get("xcoords").concat().reverse();S=I[V-1].get("ycoords").concat().reverse();O=this.getCurveControlPoints(G,S);W=0;X=O.length;T.lineTo(G[0],S[0]);for(;W<X;W=++W){M=O[W].endx;K=O[W].endy;R=O[W].ctrlx1;Q=O[W].ctrlx2;Z=O[W].ctrly1;Y=O[W].ctrly2;T.curveTo(R,Z,Q,Y,M,K);}}else{if(this.get("direction")==="vertical"){T.lineTo(this._leftOrigin,aa[aa.length-1]);T.lineTo(this._leftOrigin,L);}else{T.lineTo(P[P.length-1],this._bottomOrigin);T.lineTo(N,this._bottomOrigin);}}T.lineTo(N,L);T.end();},_defaults:null,_getClosingPoints:function(){var F=this.get("xcoords").concat(),I=this.get("ycoords").concat(),H,G;if(this.get("direction")==="vertical"){G=this._getLastValidIndex(F);H=this._getFirstValidIndex(F);I.push(I[G]);I.push(I[H]);F.push(this._leftOrigin);F.push(this._leftOrigin);}else{G=this._getLastValidIndex(I);H=this._getFirstValidIndex(I);F.push(F[G]);F.push(F[H]);I.push(this._bottomOrigin);I.push(this._bottomOrigin);}F.push(F[0]);I.push(I[0]);return[F,I];},_getHighestValidOrder:function(K,G,F,I){var H=I=="vertical"?"stackedXCoords":"stackedYCoords",J;while(isNaN(J)&&F>-1){F=F-1;if(F>-1){J=K[F].get(H)[G];}}return F;},_getCoordsByOrderAndIndex:function(K,I,F,J){var H,G;if(J=="vertical"){H=F<0?this._leftOrigin:K[F].get("stackedXCoords")[I];G=this.get("stackedYCoords")[I];}else{H=this.get("stackedXCoords")[I];G=F<0?this._bottomOrigin:K[F].get("stackedYCoords")[I];}return[H,G];},_getStackedClosingPoints:function(){var V=this.get("order"),J=this.get("type"),H=this.get("graph"),Y=this.get("direction"),M=H.seriesTypes[J],G,Q,P=this.get("stackedXCoords"),Z=this.get("stackedYCoords"),X,R,O,L,K,I,W,U,T,F,N,S;if(V<1){return this._getClosingPoints();}R=M[V-1];K=R.get("stackedXCoords").concat();I=R.get("stackedYCoords").concat();if(Y=="vertical"){G=this._getFirstValidIndex(P);Q=this._getLastValidIndex(P);O=R._getFirstValidIndex(K);L=R._getLastValidIndex(K);}else{G=this._getFirstValidIndex(Z);Q=this._getLastValidIndex(Z);O=R._getFirstValidIndex(I);L=R._getLastValidIndex(I);}if(L>=G&&O<=Q){O=Math.max(G,O);L=Math.min(Q,L);K=K.slice(O,L+1);I=I.slice(O,L+1);X=O;}else{X=Q;}U=[P[G]];T=[Z[G]];F=G;while((isNaN(N)||N<V-1)&&F<=X){S=N;N=this._getHighestValidOrder(M,F,V,Y);if(!isNaN(S)&&N>S){W=this._getCoordsByOrderAndIndex(M,F,S,Y);U.push(W[0]);T.push(W[1]);}W=this._getCoordsByOrderAndIndex(M,F,N,Y);U.push(W[0]);T.push(W[1]);F=F+1;}if(K&&K.length>0&&L>G&&O<Q){U=U.concat(K);T=T.concat(I);N=V-1;}F=Math.max(G,L);V=V-1;N=NaN;while(F<=Q){S=N;N=this._getHighestValidOrder(M,F,V,Y);if(!isNaN(S)){if(N>S){W=this._getCoordsByOrderAndIndex(M,F,S,Y);U.push(W[0]);T.push(W[1]);}else{if(N<S){W=this._getCoordsByOrderAndIndex(M,F-1,N,Y);U.push(W[0]);T.push(W[1]);}}}W=this._getCoordsByOrderAndIndex(M,F,N,Y);U.push(W[0]);T.push(W[1]);F=F+1;}U.reverse();T.reverse();return[P.concat(U),Z.concat(T)];},_getAreaDefaults:function(){return{};}};b.augment(z,b.Attribute);b.Fills=z;function y(F){var G={markers:{getter:function(){return this._markers;}}};this.addAttrs(G,F);}y.prototype={_plotDefaults:null,drawPlots:function(){if(!this.get("xcoords")||this.get("xcoords").length<1){return;}var P=r.isNumber,W=b.clone(this.get("styles").marker),O=W.width,V=W.height,Q=this.get("xcoords"),X=this.get("ycoords"),T=0,U=Q.length,R=X[0],I,L,S=O/2,H=V/2,M,J,G=null,K=null,N=this.get("graphOrder"),F=this.get("groupMarkers");if(F){M=[];J=[];for(;T<U;++T){M.push(parseFloat(Q[T]-S));J.push(parseFloat(X[T]-H));}this._createGroupMarker({xvalues:M,yvalues:J,fill:W.fill,border:W.border,dimensions:{width:O,height:V},graphOrder:N,shape:W.shape});return;}if(r.isArray(W.fill.color)){G=W.fill.color.concat();}if(r.isArray(W.border.color)){K=W.border.color.concat();}this._createMarkerCache();for(;T<U;++T){R=parseFloat(X[T]-H);I=parseFloat(Q[T]-S);if(!P(I)||!P(R)){this._markers.push(null);continue;}if(G){W.fill.color=G[T%G.length];}if(K){W.border.color=K[T%K.length];}W.x=I;W.y=R;L=this.getMarker(W,N,T);}this._clearMarkerCache();},_groupShapes:{circle:b.CircleGroup,rect:b.RectGroup,ellipse:b.EllipseGroup,diamond:b.DiamondGroup},_getGroupShape:function(F){if(r.isString(F)){F=this._groupShapes[F];}return F;},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;},_markers:null,_markerCache:null,getMarker:function(J,F,I){var G,H=J.border;J.id=this.get("chart").get("id")+"_"+F+"_"+I;H.opacity=H.alpha;J.stroke=H;J.fill.opacity=J.fill.alpha;if(this._markerCache.length>0){while(!G){if(this._markerCache.length<1){G=this._createMarker(J,F,I);break;}G=this._markerCache.shift();}G.set(J);}else{G=this._createMarker(J,F,I);}this._markers.push(G);return G;},_createMarker:function(J,F,I){var K=this.get("graphic"),H,G=b.clone(J);K.set("autoDraw",false);G.type=G.shape;H=K.addShape(G);H.addClass(o);return H;},_createMarkerCache:function(){if(this._groupMarker){this._groupMarker.destroy();this._groupMarker=null;}if(this._markers&&this._markers.length>0){this._markerCache=this._markers.concat();}else{this._markerCache=[];}this._markers=[];},_createGroupMarker:function(J){var G,K=this.get("markers"),I=J.border,L,F,H;if(K&&K.length>0){while(K.length>0){G=K.shift();G.destroy();}this.set("markers",[]);}I.opacity=I.alpha;F={id:this.get("chart").get("id")+"_"+J.graphOrder,stroke:I,fill:J.fill,dimensions:J.dimensions,xvalues:J.xvalues,yvalues:J.yvalues};F.fill.opacity=J.fill.alpha;H=this._getGroupShape(J.shape);if(H){F.type=H;}if(J.hasOwnProperty("radius")&&!isNaN(J.radius)){F.dimensions.radius=J.radius;}if(this._groupMarker){this._groupMarker.destroy();}L=this.get("graphic");this._groupMarker=L.addShape(F);
L._redraw();},_toggleVisible:function(J){var G,I=this.get("markers"),H=0,F;if(I){F=I.length;for(;H<F;++H){G=I[H];if(G){G.set("visible",J);}}}},_clearMarkerCache:function(){var F;while(this._markerCache.length>0){F=this._markerCache.shift();if(F){F.destroy();}}},updateMarkerState:function(L,J){if(this._markers&&this._markers[J]){var N,K,O=b.clone(this.get("styles").marker),F=this._getState(L),M=this.get("xcoords"),I=this.get("ycoords"),H=this._markers[J],G=F=="off"||!O[F]?O:O[F];G.fill.color=this._getItemColor(G.fill.color,J);G.border.color=this._getItemColor(G.border.color,J);G.stroke=G.border;H.set(G);N=G.width;K=G.height;H.set("x",(M[J]-N/2));H.set("y",(I[J]-K/2));H.set("visible",this.get("visible"));}},_getItemColor:function(G,F){if(r.isArray(G)){return G[F%G.length];}return G;},_setStyles:function(F){F=this._parseMarkerStyles(F);return b.Renderer.prototype._setStyles.apply(this,[F]);},_parseMarkerStyles:function(G){if(G.marker){var F=this._getPlotDefaults();G.marker=this._mergeStyles(G.marker,F);if(G.marker.over){G.marker.over=this._mergeStyles(G.marker.over,G.marker);}if(G.marker.down){G.marker.down=this._mergeStyles(G.marker.down,G.marker);}}return G;},_getState:function(F){var G;switch(F){case"mouseout":G="off";break;case"mouseover":G="over";break;case"mouseup":G="over";break;case"mousedown":G="down";break;}return G;},_stateSyles:null};b.augment(y,b.Attribute);b.Plots=y;function D(){}D.prototype={drawSeries:function(){if(this.get("xcoords").length<1){return;}var ah=b.clone(this.get("styles").marker),X,T,P=this.get("xcoords"),Q=this.get("ycoords"),ai=0,M=P.length,I=Q[0],ao=this.get("type"),ac=this.get("graph"),aa=ac.seriesTypes[ao],G=aa.length,af=0,ak=0,ad=0,ae,V,W=this.get("order"),am=this.get("graphOrder"),H,an,R,S,Y,aj=null,F=null,Z=[],J=[],N,O,U,al,ab={width:[],height:[]},L=[],K=[],ag=this.get("groupMarkers");if(r.isArray(ah.fill.color)){aj=ah.fill.color.concat();}if(r.isArray(ah.border.color)){F=ah.border.color.concat();}if(this.get("direction")=="vertical"){R="height";S="width";}else{R="width";S="height";}X=ah[R];T=ah[S];this._createMarkerCache();for(;ai<G;++ai){V=aa[ai];af+=V.get("styles").marker[R];if(W>ai){ad=af;}}ak=M*af;this._maxSize=ac.get(R);if(ak>this._maxSize){ae=ac.get(R)/ak;af*=ae;ad*=ae;X*=ae;X=Math.max(X,1);this._maxSize=X;}ad-=af/2;for(ai=0;ai<M;++ai){N=P[ai]-af/2;O=N+af;U=Q[ai]-af/2;al=U+af;Z.push({start:N,end:O});J.push({start:U,end:al});if(isNaN(P[ai])||isNaN(Q[ai])){this._markers.push(null);continue;}Y=this._getMarkerDimensions(P[ai],Q[ai],T,ad);if(!isNaN(Y.calculatedSize)&&Y.calculatedSize>0){I=Y.top;H=Y.left;if(ag){ab[R][ai]=X;ab[S][ai]=Y.calculatedSize;L.push(H);K.push(I);}else{ah[R]=X;ah[S]=Y.calculatedSize;ah.x=H;ah.y=I;if(aj){ah.fill.color=aj[ai%aj.length];}if(F){ah.border.color=F[ai%F.length];}an=this.getMarker(ah,am,ai);}}else{if(!ag){this._markers.push(null);}}}this.set("xMarkerPlane",Z);this.set("yMarkerPlane",J);if(ag){this._createGroupMarker({fill:ah.fill,border:ah.border,dimensions:ab,xvalues:L,yvalues:K,shape:ah.shape});}else{this._clearMarkerCache();}},_defaultFillColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}};b.Histogram=D;b.CartesianSeries=b.Base.create("cartesianSeries",b.Base,[b.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();this.addListeners();this.set("rendered",true);this.validate();},addListeners:function(){var G=this.get("xAxis"),F=this.get("yAxis");if(G){this._xDataReadyHandle=G.after("dataReady",b.bind(this._xDataChangeHandler,this));this._xDataUpdateHandle=G.after("dataUpdate",b.bind(this._xDataChangeHandler,this));}if(F){this._yDataReadyHandle=F.after("dataReady",b.bind(this._yDataChangeHandler,this));this._yDataUpdateHandle=F.after("dataUpdate",b.bind(this._yDataChangeHandler,this));}this._xAxisChangeHandle=this.after("xAxisChange",this._xAxisChangeHandler);this._yAxisChangeHandle=this.after("yAxisChange",this._yAxisChangeHandler);this._stylesChangeHandle=this.after("stylesChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this._widthChangeHandle=this.after("widthChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this._heightChangeHandle=this.after("heightChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this._visibleChangeHandle=this.after("visibleChange",this._handleVisibleChange);},_xAxisChangeHandler:function(G){var F=this.get("xAxis");F.after("dataReady",b.bind(this._xDataChangeHandler,this));F.after("dataUpdate",b.bind(this._xDataChangeHandler,this));},_yAxisChangeHandler:function(G){var F=this.get("yAxis");F.after("dataReady",b.bind(this._yDataChangeHandler,this));F.after("dataUpdate",b.bind(this._yDataChangeHandler,this));},GUID:"yuicartesianseries",_xDataChangeHandler:function(F){var G=this._updateAxisData();if(G){this.draw();}},_yDataChangeHandler:function(F){var G=this._updateAxisData();if(G){this.draw();}},_updateAxisData:function(){var J=this.get("xAxis"),G=this.get("yAxis"),H=this.get("xKey"),F=this.get("yKey"),I,K;if(!J||!G||!H||!F){return false;}K=J.getDataByKey(H);I=G.getDataByKey(F);if(!K||!I){return false;}this.set("xData",K.concat());this.set("yData",I.concat());return true;},validate:function(){if((this.get("xData")&&this.get("yData"))||this._updateAxisData()){this.draw();}else{this.fire("drawingComplete");}},_setCanvas:function(){var F=this.get("graph"),G=F.get("graphic");this.set("graphic",G);},setAreaData:function(){var W=r.isNumber,ak,ai,J=this.get("graph"),S=J.get("width"),ad=J.get("height"),Q=this.get("xAxis"),G=this.get("yAxis"),L=this.get("xData").concat(),ag=this.get("yData").concat(),aa,ae,an=Q.getEdgeOffset(L.length,S),P=G.getEdgeOffset(ag.length,ad),X=this.get("styles").padding,Z=X.left,ah=X.top,N=S-(Z+X.right+an),ac=ad-(ah+X.bottom+P),V=[],am=[],al=Q.get("maximum"),af=Q.get("minimum"),I=G.get("maximum"),F=G.get("minimum"),M=N/(al-af),T=ac/(I-F),O,aj=this.get("direction"),ab=0,R=[],Y=[],K=this.get("xMarkerPlaneOffset"),H=this.get("yMarkerPlaneOffset"),U=this.get("graphic");
U.set("width",S);U.set("height",ad);O=L.length;an*=0.5;P*=0.5;if(aj==="vertical"){ag=ag.reverse();}this._leftOrigin=Math.round(((0-af)*M)+Z+an);this._bottomOrigin=Math.round((ac+ah+P));if(F<0){this._bottomOrigin=this._bottomOrigin-((0-F)*T);}for(;ab<O;++ab){aa=parseFloat(L[ab]);ae=parseFloat(ag[ab]);if(W(aa)){ak=(((aa-af)*M)+Z+an);}else{ak=NaN;}if(W(ae)){ai=((ac+ah+P)-(ae-F)*T);}else{ai=NaN;}V.push(ak);am.push(ai);R.push({start:ak-K,end:ak+K});Y.push({start:ai-H,end:ai+H});}this.set("xcoords",V);this.set("ycoords",am);this.set("xMarkerPlane",R);this.set("yMarkerPlane",Y);this._dataLength=O;},_getFirstValidIndex:function(H){var I,G=-1,F=H.length;while(!r.isNumber(I)&&G<F){G+=1;I=H[G];}return G;},_getLastValidIndex:function(H){var I,G=H.length,F=-1;while(!r.isNumber(I)&&G>F){G-=1;I=H[G];}return G;},draw:function(){var H=this.get("graph"),F=H.get("width"),G=H.get("height");if(this.get("rendered")){if((isFinite(F)&&isFinite(G)&&F>0&&G>0)&&((this.get("xData")&&this.get("yData"))||this._updateAxisData())){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.setAreaData();if(this.get("xcoords")&&this.get("ycoords")){this.drawSeries();}this._drawing=false;if(this._callLater){this.draw();}else{this._toggleVisible(this.get("visible"));this.fire("drawingComplete");}}}},_defaultPlaneOffset:4,_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}};},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(I,J){var G={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},H=G[J],F=H.length;I=I||0;if(I>=F){I=I%F;}J=J||"fill";return G[J][I];},_handleVisibleChange:function(F){this._toggleVisible(this.get("visible"));},getTotalValues:function(){var F=this.get("valueAxis").getTotalByKey(this.get("valueKey"));return F;},destructor:function(){var F,G=this.get("markers");if(this.get("rendered")){if(this._xDataReadyHandle){this._xDataReadyHandle.detach();}if(this._xDataUpdateHandle){this._xDataUpdateHandle.detach();}if(this._yDataReadyHandle){this._yDataReadyHandle.detach();}if(this._yDataUpdateHandle){this._yDataUpdateHandle.detach();}this._xAxisChangeHandle.detach();this._yAxisChangeHandle.detach();this._stylesChangeHandle.detach();this._widthChangeHandle.detach();this._heightChangeHandle.detach();this._visibleChangeHandle.detach();}while(G&&G.length>0){F=G.shift();if(F&&F instanceof b.Shape){F.destroy();}}if(this._path){this._path.destroy();this._path=null;}if(this._lineGraphic){this._lineGraphic.destroy();this._lineGraphic=null;}if(this._groupMarker){this._groupMarker.destroy();this._groupMarker=null;}}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey");},setter:function(F){this._xDisplayName=F.toString();return F;}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey");},setter:function(F){this._yDisplayName=F.toString();return F;}},categoryDisplayName:{lazyAdd:false,getter:function(){return this.get("direction")=="vertical"?this.get("yDisplayName"):this.get("xDisplayName");},setter:function(F){if(this.get("direction")=="vertical"){this._yDisplayName=F;}else{this._xDisplayName=F;}return F;}},valueDisplayName:{lazyAdd:false,getter:function(){return this.get("direction")=="vertical"?this.get("xDisplayName"):this.get("yDisplayName");},setter:function(F){if(this.get("direction")=="vertical"){this._xDisplayName=F;}else{this._yDisplayName=F;}return F;}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},chart:{readOnly:true,getter:function(){return this.get("graph").get("chart");}},graph:{},xAxis:{},yAxis:{},xKey:{setter:function(F){return F.toString();}},yKey:{setter:function(F){return F.toString();}},xData:{},yData:{},rendered:{value:false},width:{readOnly:true,getter:function(){this.get("graph").get("width");}},height:{readOnly:true,getter:function(){this.get("graph").get("height");}},visible:{value:true},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var F=this.get("styles").marker;if(F&&F.width&&isFinite(F.width)){return F.width*0.5;}return this._defaultPlaneOffset;}},yMarkerPlaneOffset:{getter:function(){var F=this.get("styles").marker;if(F&&F.height&&isFinite(F.height)){return F.height*0.5;}return this._defaultPlaneOffset;}},direction:{value:"horizontal"},groupMarkers:{getter:function(){if(this._groupMarkers===undefined){return this.get("graph").get("groupMarkers");}else{return this._groupMarkers;}},setter:function(F){this._groupMarkers=F;return F;}}}});b.MarkerSeries=b.Base.create("markerSeries",b.CartesianSeries,[b.Plots],{drawSeries:function(){this.drawPlots();},_setStyles:function(F){if(!F.marker){F={marker:F};}F=this._parseMarkerStyles(F);return b.MarkerSeries.superclass._mergeStyles.apply(this,[F,this._getDefaultStyles()]);},_getDefaultStyles:function(){var F=this._mergeStyles({marker:this._getPlotDefaults()},b.MarkerSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"marker"}}});b.LineSeries=b.Base.create("lineSeries",b.CartesianSeries,[b.Lines],{drawSeries:function(){this.drawLines();},_setStyles:function(F){if(!F.line){F={line:F};}return b.LineSeries.superclass._setStyles.apply(this,[F]);},_getDefaultStyles:function(){var F=this._mergeStyles({line:this._getLineDefaults()},b.LineSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"line"}}});b.SplineSeries=b.Base.create("splineSeries",b.LineSeries,[b.CurveUtil,b.Lines],{drawSeries:function(){this.drawSpline();}},{ATTRS:{type:{value:"spline"}}});
b.StackedSplineSeries=b.Base.create("stackedSplineSeries",b.SplineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedSpline"}}});b.StackedMarkerSeries=b.Base.create("stackedMarkerSeries",b.MarkerSeries,[b.StackingUtil],{setAreaData:function(){b.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedMarker"}}});b.ColumnSeries=b.Base.create("columnSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(G,F,I,J){var H={left:G+J};if(this._bottomOrigin>=F){H.top=F;H.calculatedSize=this._bottomOrigin-H.top;}else{H.top=this._bottomOrigin;H.calculatedSize=F-this._bottomOrigin;}return H;},updateMarkerState:function(H,T){if(this._markers&&this._markers[T]){var N=b.clone(this.get("styles").marker),X,I=this._getState(H),P=this.get("xcoords"),Y=this.get("ycoords"),K=this._markers[T],V,F=this.get("graph"),G,L=F.seriesTypes[this.get("type")],U=L.length,O=0,J=0,R,Q=0,M=[],S=this.get("order"),W;X=I=="off"||!N[I]?b.clone(N):b.clone(N[I]);X.fill.color=this._getItemColor(X.fill.color,T);X.border.color=this._getItemColor(X.border.color,T);W=this._getMarkerDimensions(P[T],Y[T],N.width,J);X.height=W.calculatedSize;X.width=Math.min(this._maxSize,X.width);K.set(X);for(;Q<U;++Q){M[Q]=P[T]+O;G=L[Q].get("styles").marker;O+=Math.min(this._maxSize,G.width);if(S>Q){J=O;}J-=O/2;}for(Q=0;Q<U;++Q){V=L[Q].get("markers");if(V){R=V[T];if(R&&R!==undefined){R.set("x",(M[Q]-O/2));}}}}}},{ATTRS:{type:{value:"column"}}});b.BarSeries=b.Base.create("barSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(G,F,I,J){var H={top:F+J};if(G>=this._leftOrigin){H.left=this._leftOrigin;H.calculatedSize=G-H.left;}else{H.left=G;H.calculatedSize=this._leftOrigin-G;}return H;},updateMarkerState:function(H,T){if(this._markers&&this._markers[T]){var M=b.clone(this.get("styles").marker),X,I=this._getState(H),O=this.get("xcoords"),Y=this.get("ycoords"),K=this._markers[T],V,F=this.get("graph"),L=F.seriesTypes[this.get("type")],U=L.length,G,N=0,J=0,Q,P=0,S=[],R=this.get("order"),W;X=I=="off"||!M[I]?M:M[I];X.fill.color=this._getItemColor(X.fill.color,T);X.border.color=this._getItemColor(X.border.color,T);W=this._getMarkerDimensions(O[T],Y[T],M.height,J);X.width=W.calculatedSize;X.height=Math.min(this._maxSize,X.height);K.set(X);for(;P<U;++P){S[P]=Y[T]+N;G=L[P].get("styles").marker;N+=Math.min(this._maxSize,G.height);if(R>P){J=N;}J-=N/2;}for(P=0;P<U;++P){V=L[P].get("markers");if(V){Q=V[T];if(Q&&Q!==undefined){Q.set("y",(S[P]-N/2));}}}}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});b.AreaSeries=b.Base.create("areaSeries",b.CartesianSeries,[b.Fills],{drawSeries:function(){this.drawFill.apply(this,this._getClosingPoints());},_setStyles:function(F){if(!F.area){F={area:F};}return b.AreaSeries.superclass._setStyles.apply(this,[F]);},_getDefaultStyles:function(){var F=this._mergeStyles({area:this._getAreaDefaults()},b.AreaSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"area"}}});b.AreaSplineSeries=b.Base.create("areaSplineSeries",b.AreaSeries,[b.CurveUtil],{drawSeries:function(){this.drawAreaSpline();}},{ATTRS:{type:{value:"areaSpline"}}});b.StackedAreaSplineSeries=b.Base.create("stackedAreaSplineSeries",b.AreaSeries,[b.CurveUtil,b.StackingUtil],{drawSeries:function(){this._stackCoordinates();this.drawStackedAreaSpline();}},{ATTRS:{type:{value:"stackedAreaSpline"}}});b.ComboSeries=b.Base.create("comboSeries",b.CartesianSeries,[b.Fills,b.Lines,b.Plots],{drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}},_toggleVisible:function(J){var I,G,F,H;if(this.get("showAreaFill")&&this._path){this._path.set("visible",J);}if(this.get("showLines")&&this._lineGraphic){this._lineGraphic.set("visible",J);}if(this.get("showMarkers")){I=this.get("markers");if(I){H=0;F=I.length;for(;H<F;++H){G=I[H];if(G){G.set("visible",J);}}}}},_getDefaultStyles:function(){var F=b.ComboSeries.superclass._getDefaultStyles();F.line=this._getLineDefaults();F.marker=this._getPlotDefaults();F.area=this._getAreaDefaults();return F;}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:false},showLines:{value:true},showMarkers:{value:true},marker:{lazyAdd:false,getter:function(){return this.get("styles").marker;},setter:function(F){this.set("styles",{marker:F});}},line:{lazyAdd:false,getter:function(){return this.get("styles").line;},setter:function(F){this.set("styles",{line:F});}},area:{lazyAdd:false,getter:function(){return this.get("styles").area;},setter:function(F){this.set("styles",{area:F});}}}});b.StackedComboSeries=b.Base.create("stackedComboSeries",b.ComboSeries,[b.StackingUtil],{setAreaData:function(){b.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getStackedClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:true}}});b.ComboSplineSeries=b.Base.create("comboSplineSeries",b.ComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"comboSpline"}}});b.StackedComboSplineSeries=b.Base.create("stackedComboSplineSeries",b.StackedComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawStackedAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedComboSpline"},showAreaFill:{value:true}}});b.StackedLineSeries=b.Base.create("stackedLineSeries",b.LineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedLineSeries.superclass.setAreaData.apply(this);
this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedLine"}}});b.StackedAreaSeries=b.Base.create("stackedAreaSeries",b.AreaSeries,[b.StackingUtil],{setAreaData:function(){b.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.drawFill.apply(this,this._getStackedClosingPoints());}},{ATTRS:{type:{value:"stackedArea"}}});b.StackedColumnSeries=b.Base.create("stackedColumnSeries",b.ColumnSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var X=r.isNumber,af=b.clone(this.get("styles").marker),W=af.width,ae=af.height,Y=this.get("xcoords"),ag=this.get("ycoords"),ac=0,ad=Y.length,Z=ag[0],K=this.get("type"),I=this.get("graph"),T=I.seriesTypes[K],R,ab=this.get("order"),V=this.get("graphOrder"),L,S,G,Q,O,U,aa,H=ab===0,J=ad*W,N={width:[],height:[]},P=[],M=[],F=this.get("groupMarkers");if(r.isArray(af.fill.color)){G=af.fill.color.concat();}if(r.isArray(af.border.color)){Q=af.border.color.concat();}this._createMarkerCache();if(J>this.get("width")){R=this.width/J;W*=R;W=Math.max(W,1);}if(!H){O=T[ab-1];U=O.get("negativeBaseValues");aa=O.get("positiveBaseValues");if(!U||!aa){H=true;aa=[];U=[];}}else{U=[];aa=[];}this.set("negativeBaseValues",U);this.set("positiveBaseValues",aa);for(ac=0;ac<ad;++ac){L=Y[ac];Z=ag[ac];if(!X(Z)||!X(L)){if(H){U[ac]=this._bottomOrigin;aa[ac]=this._bottomOrigin;}this._markers.push(null);continue;}if(H){ae=Math.abs(this._bottomOrigin-Z);if(Z<this._bottomOrigin){aa[ac]=Z;U[ac]=this._bottomOrigin;}else{if(Z>this._bottomOrigin){aa[ac]=this._bottomOrigin;U[ac]=Z;Z-=ae;}else{aa[ac]=Z;U[ac]=Z;}}}else{if(Z>this._bottomOrigin){Z+=(U[ac]-this._bottomOrigin);ae=Z-U[ac];U[ac]=Z;Z-=ae;}else{if(Z<=this._bottomOrigin){Z=aa[ac]-(this._bottomOrigin-Z);ae=aa[ac]-Z;aa[ac]=Z;}}}if(!isNaN(ae)&&ae>0){L-=W/2;if(F){N.width[ac]=W;N.height[ac]=ae;P.push(L);M.push(Z);}else{af.width=W;af.height=ae;af.x=L;af.y=Z;if(G){af.fill.color=G[ac%G.length];}if(Q){af.border.color=Q[ac%Q.length];}S=this.getMarker(af,V,ac);}}else{if(!F){this._markers.push(null);}}}if(F){this._createGroupMarker({fill:af.fill,border:af.border,dimensions:N,xvalues:P,yvalues:M,shape:af.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(M,K){if(this._markers&&this._markers[K]){var O,H,F=this._getState(M),N=this.get("xcoords"),L=this._markers[K],J=0,G,I;O=this.get("styles").marker;J=O.width*0.5;H=F=="off"||!O[F]?b.clone(O):b.clone(O[F]);H.height=L.get("height");H.x=(N[K]-J);H.y=L.get("y");H.id=L.get("id");G=H.fill.color;I=H.border.color;if(r.isArray(G)){H.fill.color=G[K%G.length];}else{H.fill.color=this._getItemColor(H.fill.color,K);}if(r.isArray(I)){H.border.color=I[K%I.length];}else{H.border.color=this._getItemColor(H.border.color,K);}L.set(H);}},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}},{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.StackedBarSeries=b.Base.create("stackedBarSeries",b.BarSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var W=r.isNumber,ae=b.clone(this.get("styles").marker),V=ae.width,ad=ae.height,X=this.get("xcoords"),ag=this.get("ycoords"),ab=0,ac=X.length,Y=ag[0],J=this.get("type"),I=this.get("graph"),S=I.seriesTypes[J],Q,aa=this.get("order"),U=this.get("graphOrder"),K,R,N,T,Z,G,P,H=aa===0,af=ac*ad,M={width:[],height:[]},O=[],L=[],F=this.get("groupMarkers");if(r.isArray(ae.fill.color)){G=ae.fill.color.concat();}if(r.isArray(ae.border.color)){P=ae.border.color.concat();}this._createMarkerCache();if(af>this.get("height")){Q=this.height/af;ad*=Q;ad=Math.max(ad,1);}if(!H){N=S[aa-1];T=N.get("negativeBaseValues");Z=N.get("positiveBaseValues");if(!T||!Z){H=true;Z=[];T=[];}}else{T=[];Z=[];}this.set("negativeBaseValues",T);this.set("positiveBaseValues",Z);for(ab=0;ab<ac;++ab){Y=ag[ab];K=X[ab];if(!W(Y)||!W(K)){if(H){Z[ab]=this._leftOrigin;T[ab]=this._leftOrigin;}this._markers.push(null);continue;}if(H){V=Math.abs(K-this._leftOrigin);if(K>this._leftOrigin){Z[ab]=K;T[ab]=this._leftOrigin;K-=V;}else{if(K<this._leftOrigin){Z[ab]=this._leftOrigin;T[ab]=K;}else{Z[ab]=K;T[ab]=this._leftOrigin;}}}else{if(K<this._leftOrigin){K=T[ab]-(this._leftOrigin-X[ab]);V=T[ab]-K;T[ab]=K;}else{if(K>=this._leftOrigin){K+=(Z[ab]-this._leftOrigin);V=K-Z[ab];Z[ab]=K;K-=V;}}}if(!isNaN(V)&&V>0){Y-=ad/2;if(F){M.width[ab]=V;M.height[ab]=ad;O.push(K);L.push(Y);}else{ae.width=V;ae.height=ad;ae.x=K;ae.y=Y;if(G){ae.fill.color=G[ab%G.length];}if(P){ae.border.color=P[ab%P.length];}R=this.getMarker(ae,U,ab);}}else{if(!F){this._markers.push(null);}}}if(F){this._createGroupMarker({fill:ae.fill,border:ae.border,dimensions:M,xvalues:O,yvalues:L,shape:ae.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(N,K){if(this._markers[K]){var F=this._getState(N),J=this.get("ycoords"),L=this._markers[K],O=this.get("styles").marker,M=O.height,H=F=="off"||!O[F]?b.clone(O):b.clone(O[F]),G,I;H.y=(J[K]-M/2);H.x=L.get("x");H.width=L.get("width");H.id=L.get("id");G=H.fill.color;I=H.border.color;if(r.isArray(G)){H.fill.color=G[K%G.length];}else{H.fill.color=this._getItemColor(H.fill.color,K);}if(r.isArray(I)){H.border.color=I[K%I.length];}else{H.border.color=this._getItemColor(H.border.color,K);}L.set(H);}},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});
b.PieSeries=b.Base.create("pieSeries",b.MarkerSeries,[],{_map:null,_image:null,_setMap:function(){var H="pieHotSpotMapi_"+Math.round(100000*Math.random()),F=this.get("graph").get("contentBox"),G;if(this._image){F.removeChild(this._image);while(this._areaNodes&&this._areaNodes.length>0){G=this._areaNodes.shift();this._map.removeChild(G);}F.removeChild(this._map);}this._image=g.createElement("img");this._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAABCAYAAAD9yd/wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABJJREFUeNpiZGBgSGPAAgACDAAIkABoFyloZQAAAABJRU5ErkJggg==";F.appendChild(this._image);this._image.setAttribute("usemap","#"+H);this._image.style.zIndex=3;this._image.style.opacity=0;this._image.setAttribute("alt","imagemap");this._map=g.createElement("map");this._map.style.zIndex=5;F.appendChild(this._map);this._map.setAttribute("name",H);this._map.setAttribute("id",H);this._areaNodes=[];},_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var F=this.get("categoryAxis"),G=this.get("valueAxis");if(F){F.after("dataReady",b.bind(this._categoryDataChangeHandler,this));F.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));}if(G){G.after("dataReady",b.bind(this._valueDataChangeHandler,this));G.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));}this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler);},validate:function(){this.draw();this._renderered=true;},_categoryAxisChangeHandler:function(F){var G=this.get("categoryAxis");G.after("dataReady",b.bind(this._categoryDataChangeHandler,this));G.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));},_valueAxisChangeHandler:function(F){var G=this.get("valueAxis");G.after("dataReady",b.bind(this._valueDataChangeHandler,this));G.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));},GUID:"pieseries",_categoryDataChangeHandler:function(F){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},_valueDataChangeHandler:function(F){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},draw:function(){var H=this.get("graph"),F=H.get("width"),G=H.get("height");if(isFinite(F)&&isFinite(G)&&F>0&&G>0){this._rendered=true;if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.drawSeries();this._drawing=false;if(this._callLater){this.draw();}else{this.fire("drawingComplete");}}},drawPlots:function(){var H=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat(),I=this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat(),L=0,ak=H.length,T=this.get("styles").marker,F=T.fill.colors,al=T.fill.alphas||["1"],P=T.border.colors,J=[T.border.weight],K=[T.border.alpha],am=J.concat(),V=P.concat(),X=K.concat(),ah,aj,Y=T.padding,G=this.get("graph"),R=Math.min(G.get("width"),G.get("height")),W=R-(Y.left+Y.right),ag=R-(Y.top+Y.bottom),ae=-90,Q=W/2,Z=ag/2,M=Math.min(Q,Z),af=0,ac,ai=0,ab,ad,N,U,O,S=this.get("graphOrder"),aa=b.Graphic.NAME=="canvasGraphic";for(;af<ak;++af){ac=parseFloat(H[af]);H.push(ac);if(!isNaN(ac)){L+=ac;}}ah=F?F.concat():null;aj=al?al.concat():null;this._createMarkerCache();if(aa){this._setMap();this._image.width=W;this._image.height=ag;}for(af=0;af<ak;af++){ac=H[af];if(L===0){ai=360/H.length;}else{ai=360*(ac/L);}if(ah&&ah.length<1){ah=F.concat();}if(aj&&aj.length<1){aj=al.concat();}if(am&&am.length<1){am=J.concat();}if(am&&V.length<1){V=P.concat();}if(X&&X.length<1){X=K.concat();}N=am?am.shift():null;ab=V?V.shift():null;ad=X?X.shift():null;ae+=ai;U={border:{color:ab,weight:N,alpha:ad},fill:{color:ah?ah.shift():this._getDefaultColor(af,"slice"),alpha:aj?aj.shift():null},type:"pieslice",arc:ai,radius:M,startAngle:ae,cx:Q,cy:Z,width:W,height:ag};O=this.getMarker(U,S,af);if(aa){this._addHotspot(U,S,af);}}this._clearMarkerCache();},_addHotspot:function(I,V,J){var S=g.createElement("area"),U=1,O=I.cx,M=I.cy,L=I.arc,T=I.startAngle-L,R=I.startAngle,G=I.radius,P=O+Math.cos(T/180*Math.PI)*G,N=M+Math.sin(T/180*Math.PI)*G,X=O+Math.cos(R/180*Math.PI)*G,W=M+Math.sin(R/180*Math.PI)*G,aa=Math.floor(L/10)-1,H=(L/(Math.floor(L/10))/180)*Math.PI,K=Math.atan((N-M)/(P-O)),Z=O+", "+M+", "+P+", "+N,Y,Q,F;for(U=1;U<=aa;++U){F=H*U;Y=Math.cos(K+F);Q=Math.sin(K+F);if(T<=90){Z+=", "+(O+(G*Math.cos(K+(H*U))));Z+=", "+(M+(G*Math.sin(K+(H*U))));}else{Z+=", "+(O-(G*Math.cos(K+(H*U))));Z+=", "+(M-(G*Math.sin(K+(H*U))));}}Z+=", "+X+", "+W;Z+=", "+O+", "+M;this._map.appendChild(S);S.setAttribute("class",o);S.setAttribute("id","hotSpot_"+V+"_"+J);S.setAttribute("shape","polygon");S.setAttribute("coords",Z);this._areaNodes.push(S);},updateMarkerState:function(J,H){if(this._markers[H]){var L=this._getState(J),G,I,F=this._markers[H],K=this.get("styles").marker;G=L=="off"||!K[L]?K:K[L];I=this._mergeStyles(G,{});I.fill.color=I.fill.colors[H%I.fill.colors.length];I.fill.alpha=I.fill.alphas[H%I.fill.alphas.length];F.set(I);}},_createMarker:function(J,F,I){var K=this.get("graphic"),H,G=b.clone(J);K.set("autoDraw",false);H=K.addShape(G);H.addClass(o);return H;},_clearMarkerCache:function(){var F=this._markerCache.length,H=0,G;for(;H<F;++H){G=this._markerCache[H];if(G){G.destroy();}}this._markerCache=[];},_getPlotDefaults:function(){var F={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};F.fill.colors=this._defaultSliceColors;F.border.colors=this._defaultBorderColors;return F;},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(I,J){var G={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},H=G[J],F=H.length;
I=I||0;if(I>=F){I=I%F;}J=J||"fill";return G[J][I];}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,validator:function(F){return F!==this.get("categoryAxis");}},valueAxis:{value:null,validator:function(F){return F!==this.get("valueAxis");}},categoryKey:{value:null,validator:function(F){return F!==this.get("categoryKey");}},valueKey:{value:null,validator:function(F){return F!==this.get("valueKey");}},categoryDisplayName:{setter:function(F){this._categoryDisplayName=F;return F;},getter:function(){return this._categoryDisplayName||this.get("categoryKey");}},valueDisplayName:{setter:function(F){this._valueDisplayName=F;return F;},getter:function(){return this._valueDisplayName||this.get("valueKey");}},slices:null}});b.Gridlines=b.Base.create("gridlines",b.Base,[b.Renderer],{_path:null,remove:function(){var F=this._path;if(F){F.destroy();}},draw:function(){if(this.get("axis")&&this.get("graph")){this._drawGridlines();}},_drawGridlines:function(){var T,F=this.get("axis"),N=F.get("position"),Q,K=0,H,O=this.get("direction"),R=this.get("graph"),P=R.get("width"),M=R.get("height"),S=this.get("styles").line,J=S.color,L=S.weight,I=S.alpha,G=O=="vertical"?this._verticalLine:this._horizontalLine;if(isFinite(P)&&isFinite(M)&&P>0&&M>0){if(N!="none"&&F&&F.get("tickPoints")){Q=F.get("tickPoints");H=Q.length;}else{Q=[];H=F.get("styles").majorUnit.count;for(;K<H;++K){Q[K]={x:P*(K/(H-1)),y:M*(K/(H-1))};}K=0;}T=R.get("gridlines");T.set("width",P);T.set("height",M);T.set("stroke",{weight:L,color:J,opacity:I});for(;K<H;++K){G(T,Q[K],P,M);}T.end();}},_horizontalLine:function(I,H,F,G){I.moveTo(0,H.y);I.lineTo(F,H.y);},_verticalLine:function(I,H,F,G){I.moveTo(H.x,0);I.lineTo(H.x,G);},_getDefaultStyles:function(){var F={line:{color:"#f0efe9",weight:1,alpha:1}};return F;}},{ATTRS:{direction:{},axis:{},graph:{}}});b.Graph=b.Base.create("graph",b.Widget,[b.Renderer],{bindUI:function(){var F=this.get("boundingBox");F.setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles);this.after("groupMarkersChange",this._drawSeries);},syncUI:function(){var F,I,J,N=this.get("seriesCollection"),K,L=0,M=N?N.length:0,G=this.get("horizontalGridlines"),H=this.get("verticalGridlines");if(this.get("showBackground")){F=this.get("background");I=this.get("contentBox");J=this.get("styles").background;J.stroke=J.border;J.stroke.opacity=J.stroke.alpha;J.fill.opacity=J.fill.alpha;J.width=this.get("width");J.height=this.get("height");J.type=J.shape;F.set(J);}for(;L<M;++L){K=N[L];if(K instanceof b.CartesianSeries){K.render();}}if(G&&G instanceof b.Gridlines){G.draw();}if(H&&H instanceof b.Gridlines){H.draw();}},seriesTypes:null,getSeriesByIndex:function(H){var F=this.get("seriesCollection"),G;if(F&&F.length>H){G=F[H];}return G;},getSeriesByKey:function(H){var G=this._seriesDictionary,F;if(G&&G.hasOwnProperty(H)){F=G[H];}return F;},addDispatcher:function(F){if(!this._dispatchers){this._dispatchers=[];}this._dispatchers.push(F);},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(J){if(!J){return;}var G=J.length,I=0,H,F;this._seriesCollection=[];this._seriesDictionary={};this.seriesTypes=[];for(;I<G;++I){H=J[I];if(!(H instanceof b.CartesianSeries)&&!(H instanceof b.PieSeries)){this._createSeries(H);continue;}this._addSeries(H);}G=this._seriesCollection.length;for(I=0;I<G;++I){H=this.get("seriesCollection")[I];F=H.get("direction")=="horizontal"?"yKey":"xKey";this._seriesDictionary[H.get(F)]=H;}},_addSeries:function(H){var I=H.get("type"),K=this.get("seriesCollection"),J=K.length,G=this.seriesTypes,F;if(!H.get("graph")){H.set("graph",this);}K.push(H);if(!G.hasOwnProperty(I)){this.seriesTypes[I]=[];}F=this.seriesTypes[I];H.set("graphOrder",J);H.set("order",F.length);F.push(H);this.addDispatcher(H);H.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",H);},_createSeries:function(J){var K=J.type,L=this.get("seriesCollection"),H=this.seriesTypes,G,F,I;J.graph=this;if(!H.hasOwnProperty(K)){H[K]=[];}G=H[K];J.graph=this;J.order=G.length;J.graphOrder=L.length;F=this._getSeries(J.type);I=new F(J);this.addDispatcher(I);I.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));G.push(I);L.push(I);if(this.get("rendered")){I.render();}},_seriesMap:{line:b.LineSeries,column:b.ColumnSeries,bar:b.BarSeries,area:b.AreaSeries,candlestick:b.CandlestickSeries,ohlc:b.OHLCSeries,stackedarea:b.StackedAreaSeries,stackedline:b.StackedLineSeries,stackedcolumn:b.StackedColumnSeries,stackedbar:b.StackedBarSeries,markerseries:b.MarkerSeries,spline:b.SplineSeries,areaspline:b.AreaSplineSeries,stackedspline:b.StackedSplineSeries,stackedareaspline:b.StackedAreaSplineSeries,stackedmarkerseries:b.StackedMarkerSeries,pie:b.PieSeries,combo:b.ComboSeries,stackedcombo:b.StackedComboSeries,combospline:b.ComboSplineSeries,stackedcombospline:b.StackedComboSplineSeries},_getSeries:function(F){var G;if(r.isString(F)){G=this._seriesMap[F];}else{G=F;}return G;},_markerEventHandler:function(K){var I=K.type,F=K.currentTarget,J=F.getAttribute("id").split("_"),H=this.getSeriesByIndex(J[1]),G=J[2];H.updateMarkerState(I,G);},_dispatchers:null,_updateStyles:function(){var G=this.get("styles").background,F=G.border;F.opacity=F.alpha;G.stroke=F;G.fill.opacity=G.fill.alpha;this.get("background").set(G);this._sizeChangeHandler();},_sizeChangeHandler:function(L){var F=this.get("horizontalGridlines"),M=this.get("verticalGridlines"),G=this.get("width"),J=this.get("height"),I=this.get("styles").background,K,H;if(I&&I.border){K=I.border.weight||0;}if(this.get("showBackground")){H=this.get("background");if(G&&J){H.set("width",G);H.set("height",J);}}if(this._gridlines){this._gridlines.clear();}if(F&&F instanceof b.Gridlines){F.draw();}if(M&&M instanceof b.Gridlines){M.draw();}this._drawSeries();},_drawSeries:function(){if(this._drawing){this._callLater=true;return;}var H,G,F,I=this.get("graphic");
I.set("autoDraw",false);this._callLater=false;this._drawing=true;H=this.get("seriesCollection");G=0;F=H?H.length:0;for(;G<F;++G){H[G].draw();if((!H[G].get("xcoords")||!H[G].get("ycoords"))&&!H[G] instanceof b.PieSeries){this._callLater=true;break;}}this._drawing=false;if(this._callLater){this._drawSeries();}},_drawingCompleteHandler:function(H){var G=H.currentTarget,I,F=b.Array.indexOf(this._dispatchers,G);if(F>-1){this._dispatchers.splice(F,1);}if(this._dispatchers.length<1){I=this.get("graphic");if(!I.get("autoDraw")){I._redraw();}this.fire("chartRendered");}},_getDefaultStyles:function(){var F={background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}};return F;},destructor:function(){if(this._graphic){this._graphic.destroy();this._graphic=null;}if(this._background){this._background.get("graphic").destroy();this._background=null;}if(this._gridlines){this._gridlines.get("graphic").destroy();this._gridlines=null;}}},{ATTRS:{x:{setter:function(F){this.get("boundingBox").setStyle("left",F+"px");return F;}},y:{setter:function(F){this.get("boundingBox").setStyle("top",F+"px");return F;}},chart:{},seriesCollection:{getter:function(){return this._seriesCollection;},setter:function(F){this._parseSeriesCollection(F);return this._seriesCollection;}},showBackground:{value:true},seriesDictionary:{readOnly:true,getter:function(){return this._seriesDictionary;}},horizontalGridlines:{value:null,setter:function(G){var F=this.get("horizontalGridlines");if(F&&F instanceof b.Gridlines){F.remove();}if(G instanceof b.Gridlines){F=G;G.set("graph",this);return G;}else{if(G&&G.axis){F=new b.Gridlines({direction:"horizontal",axis:G.axis,graph:this,styles:G.styles});return F;}}}},verticalGridlines:{value:null,setter:function(G){var F=this.get("verticalGridlines");if(F&&F instanceof b.Gridlines){F.remove();}if(G instanceof b.Gridlines){F=G;G.set("graph",this);return G;}else{if(G&&G.axis){F=new b.Gridlines({direction:"vertical",axis:G.axis,graph:this,styles:G.styles});return F;}}}},background:{getter:function(){if(!this._background){this._backgroundGraphic=new b.Graphic({render:this.get("contentBox")});this._backgroundGraphic.get("node").style.zIndex=0;this._background=this._backgroundGraphic.addShape({type:"rect"});}return this._background;}},gridlines:{readOnly:true,getter:function(){if(!this._gridlines){this._gridlinesGraphic=new b.Graphic({render:this.get("contentBox")});this._gridlinesGraphic.get("node").style.zIndex=1;this._gridlines=this._gridlinesGraphic.addShape({type:"path"});}return this._gridlines;}},graphic:{readOnly:true,getter:function(){if(!this._graphic){this._graphic=new b.Graphic({render:this.get("contentBox")});this._graphic.get("node").style.zIndex=2;this._graphic.set("autoDraw",false);}return this._graphic;}},groupMarkers:{value:false}}});function p(){}p.ATTRS={dataProvider:{lazyAdd:false,valueFn:function(){var F=[];if(!this._seriesKeysExplicitlySet){this._seriesKeys=this._buildSeriesKeys(F);}return F;},setter:function(G){var F=this._setDataValues(G);if(!this._seriesKeysExplicitlySet){this._seriesKeys=this._buildSeriesKeys(F);}return F;}},seriesKeys:{getter:function(){return this._seriesKeys;},setter:function(F){this._seriesKeysExplicitlySet=true;this._seriesKeys=F;return F;}},ariaLabel:{value:"Chart Application",setter:function(G){var F=this.get("contentBox");if(F){F.setAttribute("aria-label",G);}return G;}},ariaDescription:{value:"Use the up and down keys to navigate between series. Use the left and right keys to navigate through items in a series.",setter:function(F){if(this._description){this._description.setContent("");this._description.appendChild(g.createTextNode(F));}return F;}},tooltip:{valueFn:"_getTooltip",setter:function(F){return this._updateTooltip(F);}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},axesCollection:{},graph:{valueFn:"_getGraph"},groupMarkers:{value:false}};p.prototype={_groupMarkersChangeHandler:function(H){var G=this.get("graph"),F=H.newVal;if(G){G.set("groupMarkers",F);}},_itemRendered:function(F){this._itemRenderQueue=this._itemRenderQueue.splice(1+b.Array.indexOf(this._itemRenderQueue,F.currentTarget),1);if(this._itemRenderQueue.length<1){this._redraw();}},_getGraph:function(){var F=new b.Graph({chart:this,groupMarkers:this.get("groupMarkers")});F.after("chartRendered",b.bind(function(G){this.fire("chartRendered");},this));return F;},getSeries:function(H){var F=null,G=this.get("graph");if(G){if(r.isNumber(H)){F=G.getSeriesByIndex(H);}else{F=G.getSeriesByKey(H);}}return F;},getAxisByKey:function(H){var F,G=this.get("axes");if(G&&G.hasOwnProperty(H)){F=G[H];}return F;},getCategoryAxis:function(){var G,F=this.get("categoryKey"),H=this.get("axes");if(H.hasOwnProperty(F)){G=H[F];}return G;},_direction:"horizontal",_dataProvider:null,_setDataValues:function(K){if(r.isArray(K[0])){var J,M=[],H=K[0],I=0,G=H.length,L,F=K.length;for(;I<G;++I){J={category:H[I]};for(L=1;L<F;++L){J["series"+L]=K[L][I];}M[I]=J;}return M;}return K;},_seriesCollection:null,_setSeriesCollection:function(F){this._seriesCollection=F;},_getAxisClass:function(F){return this._axisClass[F];},_axisClass:{stacked:b.StackedAxis,numeric:b.NumericAxis,category:b.CategoryAxis,time:b.TimeAxis},_axes:null,initializer:function(){this._itemRenderQueue=[];this._seriesIndex=-1;this._itemIndex=-1;this.after("dataProviderChange",this._dataProviderChangeHandler);},renderUI:function(){var G=this.get("tooltip"),H=this.get("boundingBox"),F=this.get("contentBox");H.setStyle("position","absolute");F.setStyle("position","absolute");this._addAxes();this._addSeries();if(G&&G.show){this._addTooltip();}this._setAriaElements(H,F);},_setAriaElements:function(I,G){var H=this._getAriaOffscreenNode(),J=this.get("id")+"_description",F=this._getAriaOffscreenNode();G.set("tabIndex",0);G.set("role","img");G.setAttribute("aria-label",this.get("ariaLabel"));G.setAttribute("aria-describedby",J);H.set("id",J);H.set("tabIndex",-1);H.appendChild(g.createTextNode(this.get("ariaDescription")));
F.set("id","live-region");F.set("aria-live","polite");F.set("aria-atomic","true");F.set("role","status");I.setAttribute("role","application");I.appendChild(H);I.appendChild(F);this._description=H;this._liveRegion=F;},_getAriaOffscreenNode:function(){var G=b.Node.create("<div></div>"),H=b.UA.ie,F=(H&&H<8)?"rect(1px 1px 1px 1px)":"rect(1px, 1px, 1px, 1px)";G.setStyle("position","absolute");G.setStyle("height","1px");G.setStyle("width","1px");G.setStyle("overflow","hidden");G.setStyle("clip",F);return G;},syncUI:function(){this._redraw();},bindUI:function(){this.after("tooltipChange",b.bind(this._tooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);this.after("groupMarkersChange",this._groupMarkersChangeHandler);var M=this.get("tooltip"),G="mouseout",N="mouseover",H=this.get("contentBox"),F=this.get("interactionType"),K=0,L,J="."+o,I=((w&&("ontouchstart" in w))&&!(b.UA.chrome&&b.UA.chrome<6));b.on("keydown",b.bind(function(Q){var P=Q.keyCode,O=parseFloat(P),R;if(O>36&&O<41){Q.halt();R=this._getAriaMessage(O);this._liveRegion.setContent("");this._liveRegion.appendChild(g.createTextNode(R));}},this),this.get("contentBox"));if(F=="marker"){G=M.hideEvent;N=M.showEvent;if(I){b.delegate("touchend",b.bind(this._markerEventDispatcher,this),H,J);b.on("touchend",b.bind(function(O){O.halt(true);if(this._activeMarker){this._activeMarker=null;this.hideTooltip(O);}},this));}else{b.delegate("mouseenter",b.bind(this._markerEventDispatcher,this),H,J);b.delegate("mousedown",b.bind(this._markerEventDispatcher,this),H,J);b.delegate("mouseup",b.bind(this._markerEventDispatcher,this),H,J);b.delegate("mouseleave",b.bind(this._markerEventDispatcher,this),H,J);b.delegate("click",b.bind(this._markerEventDispatcher,this),H,J);b.delegate("mousemove",b.bind(this._positionTooltip,this),H,J);}}else{if(F=="planar"){if(I){this._overlay.on("touchend",b.bind(this._planarEventDispatcher,this));}else{this._overlay.on("mousemove",b.bind(this._planarEventDispatcher,this));this.on("mouseout",this.hideTooltip);}}}if(M){this.on("markerEvent:touchend",b.bind(function(P){var O=P.series.get("markers")[P.index];if(this._activeMarker&&O===this._activeMarker){this._activeMarker=null;this.hideTooltip(P);}else{this._activeMarker=O;M.markerEventHandler.apply(this,[P]);}},this));if(G&&N&&G==N){this.on(F+"Event:"+G,this.toggleTooltip);}else{if(N){this.on(F+"Event:"+N,M[F+"EventHandler"]);}if(G){if(r.isArray(G)){L=G.length;for(;K<L;++K){this.on(F+"Event:"+G[K],this.hideTooltip);}}this.on(F+"Event:"+G,this.hideTooltip);}}}},_markerEventDispatcher:function(M){var O=M.type,F=this.get("contentBox"),S=M.currentTarget,R=S.getAttribute("id").split("_"),L=R.pop(),J=R.pop(),K=this.getSeries(parseInt(J,10)),N=this.getSeriesItems(K,L),H=M&&M.hasOwnProperty("changedTouches"),I=H?M.changedTouches[0].pageX:M.pageX,G=H?M.changedTouches[0].pageY:M.pageY,Q=I-F.getX(),P=G-F.getY();if(O=="mouseenter"){O="mouseover";}else{if(O=="mouseleave"){O="mouseout";}}K.updateMarkerState(O,L);M.halt();this.fire("markerEvent:"+O,{originEvent:M,pageX:I,pageY:G,categoryItem:N.category,valueItem:N.value,node:S,x:Q,y:P,series:K,index:L,seriesIndex:J});},_dataProviderChangeHandler:function(J){var G=J.newVal,I,F,H;this._seriesIndex=-1;this._itemIndex=-1;if(this instanceof b.CartesianChart){this.set("axes",this.get("axes"));this.set("seriesCollection",this.get("seriesCollection"));}I=this.get("axes");if(I){for(F in I){if(I.hasOwnProperty(F)){H=I[F];if(H instanceof b.Axis){if(H.get("position")!="none"){this._addToAxesRenderQueue(H);}H.set("dataProvider",G);}}}}},toggleTooltip:function(G){var F=this.get("tooltip");if(F.visible){this.hideTooltip();}else{F.markerEventHandler.apply(this,[G]);}},_showTooltip:function(I,F,J){var G=this.get("tooltip"),H=G.node;if(I){G.visible=true;G.setTextFunction(H,I);H.setStyle("top",J+"px");H.setStyle("left",F+"px");H.setStyle("visibility","visible");}},_positionTooltip:function(J){var H=this.get("tooltip"),I=H.node,G=this.get("contentBox"),F=(J.pageX+10)-G.getX(),K=(J.pageY+10)-G.getY();if(I){I.setStyle("left",F+"px");I.setStyle("top",K+"px");}},hideTooltip:function(){var F=this.get("tooltip"),G=F.node;F.visible=false;G.set("innerHTML","");G.setStyle("left",-10000);G.setStyle("top",-10000);G.setStyle("visibility","hidden");},_addTooltip:function(){var G=this.get("tooltip"),I=this.get("id")+"_tooltip",F=this.get("contentBox"),H=g.getElementById(I);if(H){F.removeChild(H);}G.node.set("id",I);G.node.setStyle("visibility","hidden");F.appendChild(G.node);},_updateTooltip:function(K){var H=this.get("tooltip")||this._getTooltip(),F,J,I,G={markerLabelFunction:"markerLabelFunction",planarLabelFunction:"planarLabelFunction",setTextFunction:"setTextFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler",show:"show"};if(r.isObject(K)){J=K.styles;I=b.one(K.node)||H.node;if(J){for(F in J){if(J.hasOwnProperty(F)){I.setStyle(F,J[F]);}}}for(F in G){if(K.hasOwnProperty(F)){H[F]=K[F];}}H.node=I;}return H;},_getTooltip:function(){var G=g.createElement("div"),H=c("chart-tooltip"),F={setTextFunction:this._setText,markerLabelFunction:this._tooltipLabelFunction,planarLabelFunction:this._planarLabelFunction,show:true,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(J){var I=this.get("tooltip"),K=I.markerLabelFunction.apply(this,[J.categoryItem,J.valueItem,J.index,J.series,J.seriesIndex]);this._showTooltip(K,J.x+10,J.y+10);},planarEventHandler:function(J){var I=this.get("tooltip"),L,K=this.get("categoryAxis");L=I.planarLabelFunction.apply(this,[K,J.valueItem,J.index,J.items,J.seriesIndex]);this._showTooltip(L,J.x+10,J.y+10);}};G=b.one(G);G.set("id",this.get("id")+"_tooltip");G.setStyle("fontSize","85%");G.setStyle("opacity","0.83");G.setStyle("position","absolute");G.setStyle("paddingTop","2px");G.setStyle("paddingRight","5px");G.setStyle("paddingBottom","4px");G.setStyle("paddingLeft","2px");G.setStyle("backgroundColor","#fff");
G.setStyle("border","1px solid #dbdccc");G.setStyle("pointerEvents","none");G.setStyle("zIndex",3);G.setStyle("whiteSpace","noWrap");G.setStyle("visibility","hidden");G.addClass(H);F.node=b.one(G);return F;},_planarLabelFunction:function(M,R,O,K,I){var G=g.createElement("div"),P,L=0,N=K.length,H,F,Q,J;if(M){F=M.get("labelFunction").apply(this,[M.getKeyValueAt(this.get("categoryKey"),O),M.get("labelFormat")]);if(!r.isObject(F)){F=g.createTextNode(F);}G.appendChild(F);}for(;L<N;++L){J=K[L];if(J.get("visible")){P=R[L];H=P.axis;Q=H.get("labelFunction").apply(this,[H.getKeyValueAt(P.key,O),H.get("labelFormat")]);G.appendChild(g.createElement("br"));G.appendChild(g.createTextNode(P.displayName));G.appendChild(g.createTextNode(": "));if(!r.isObject(Q)){Q=g.createTextNode(Q);}G.appendChild(Q);}}return G;},_tooltipLabelFunction:function(M,G,J,I,H){var L=g.createElement("div"),F=M.axis.get("labelFunction").apply(this,[M.value,M.axis.get("labelFormat")]),K=G.axis.get("labelFunction").apply(this,[G.value,G.axis.get("labelFormat")]);L.appendChild(g.createTextNode(M.displayName));L.appendChild(g.createTextNode(": "));if(!r.isObject(F)){F=g.createTextNode(F);}L.appendChild(F);L.appendChild(g.createElement("br"));L.appendChild(g.createTextNode(G.displayName));L.appendChild(g.createTextNode(": "));if(!r.isObject(K)){K=g.createTextNode(K);}L.appendChild(K);return L;},_tooltipChangeHandler:function(J){if(this.get("tooltip")){var H=this.get("tooltip"),I=H.node,G=H.show,F=this.get("contentBox");if(I&&G){if(!F.contains(I)){this._addTooltip();}}}},_setText:function(F,G){F.setContent("");if(r.isNumber(G)){G=G+"";}else{if(!G){G="";}}if(n(G)){G=g.createTextNode(G);}F.appendChild(G);},_getAllKeys:function(K){var H=0,F=K.length,J,G,I={};for(;H<F;++H){J=K[H];for(G in J){if(J.hasOwnProperty(G)){I[G]=true;}}}return I;},_buildSeriesKeys:function(G){var I,H=this.get("categoryKey"),J=[],F;if(this._seriesKeysExplicitlySet){return this._seriesKeys;}I=this._getAllKeys(G);for(F in I){if(I.hasOwnProperty(F)&&F!=H){J.push(F);}}return J;}};b.ChartBase=p;b.CartesianChart=b.Base.create("cartesianChart",b.Widget,[b.ChartBase],{renderUI:function(){var J=this.get("boundingBox"),F=this.get("contentBox"),I=this.get("tooltip"),G,H=c("overlay");J.setStyle("position","absolute");F.setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();if(I&&I.show){this._addTooltip();}this.get("styles");if(this.get("interactionType")=="planar"){G=g.createElement("div");this.get("contentBox").appendChild(G);this._overlay=b.one(G);this._overlay.set("id",this.get("id")+"_overlay");this._overlay.setStyle("position","absolute");this._overlay.setStyle("background","#fff");this._overlay.setStyle("opacity",0);this._overlay.addClass(H);this._overlay.setStyle("zIndex",4);}this._setAriaElements(J,F);this._redraw();},_planarEventDispatcher:function(ab){var I=this.get("graph"),M=this.get("boundingBox"),V=I.get("contentBox"),S=ab&&ab.hasOwnProperty("changedTouches"),H=S?ab.changedTouches[0].pageX:ab.pageX,F=S?ab.changedTouches[0].pageY:ab.pageY,Q=H-M.getX(),P=F-M.getY(),N={x:H-V.getX(),y:F-V.getY()},G=I.get("seriesCollection"),R,Z=0,O,L=this._selectedIndex,ad,U=[],J=[],T=[],ae=this.get("direction"),af,ac,X,W,K,aa,Y;ab.halt(true);if(ae=="horizontal"){ac="x";X="y";}else{X="x";ac="y";}W=N[ac];if(G){aa=G.length;while(Z<aa&&!K){if(G[Z]){K=G[Z].get(ac+"MarkerPlane");}Z++;}}if(K){aa=K.length;for(Z=0;Z<aa;++Z){if(W<=K[Z].end&&W>=K[Z].start){O=Z;break;}}aa=G.length;for(Z=0;Z<aa;++Z){R=G[Z];Y=R.get(X+"coords");af=R.get("markers");if(af&&!isNaN(L)&&L>-1){R.updateMarkerState("mouseout",L);}if(Y&&Y[O]>-1){if(af&&!isNaN(O)&&O>-1){R.updateMarkerState("mouseover",O);}ad=this.getSeriesItems(R,O);J.push(ad.category);T.push(ad.value);U.push(R);}}this._selectedIndex=O;if(O>-1){this.fire("planarEvent:mouseover",{categoryItem:J,valueItem:T,x:Q,y:P,pageX:H,pageY:F,items:U,index:O,originEvent:ab});}else{this.fire("planarEvent:mouseout");}}},_type:"combo",_itemRenderQueue:null,_addToAxesRenderQueue:function(F){if(!this._itemRenderQueue){this._itemRenderQueue=[];}if(b.Array.indexOf(this._itemRenderQueue,F)<0){this._itemRenderQueue.push(F);}},_addToAxesCollection:function(F,H){var G=this.get(F+"AxesCollection");if(!G){G=[];this.set(F+"AxesCollection",G);}G.push(H);},_getDefaultSeriesCollection:function(){var G,F=this.get("dataProvider");if(F){G=this._parseSeriesCollection();}return G;},_parseSeriesCollection:function(Z){var P=this.get("direction"),F=[],W,T,R=[],M,L=this.get("seriesKeys").concat(),V,K,S,J=this.get("type"),X,O,Y,H,G=[],I=this.get("categoryKey"),U=this.get("showMarkers"),Q=this.get("showAreaFill"),N=this.get("showLines");Z=Z||[];if(P=="vertical"){W="yAxis";O="yKey";T="xAxis";Y="xKey";}else{W="xAxis";O="xKey";T="yAxis";Y="yKey";}S=Z.length;while(Z&&Z.length>0){M=Z.shift();X=this._getBaseAttribute(M,Y);if(X){K=b.Array.indexOf(L,X);if(K>-1){L.splice(K,1);R.push(X);F.push(M);}else{G.push(M);}}else{G.push(M);}}while(G.length>0){M=G.shift();if(L.length>0){X=L.shift();this._setBaseAttribute(M,Y,X);R.push(X);F.push(M);}else{if(M instanceof b.CartesianSeries){M.destroy(true);}}}if(L.length>0){R=R.concat(L);}S=R.length;for(V=0;V<S;++V){M=F[V]||{type:J};if(M instanceof b.CartesianSeries){this._parseSeriesAxes(M);continue;}M[O]=M[O]||I;M[Y]=M[Y]||L.shift();M[W]=this._getCategoryAxis();M[T]=this._getSeriesAxis(M[Y]);M.type=M.type||J;M.direction=M.direction||P;if((M.type=="combo"||M.type=="stackedcombo"||M.type=="combospline"||M.type=="stackedcombospline")){if(Q!==null){M.showAreaFill=(M.showAreaFill!==null&&M.showAreaFill!==undefined)?M.showAreaFill:Q;}if(U!==null){M.showMarkers=(M.showMarkers!==null&&M.showMarkers!==undefined)?M.showMarkers:U;}if(N!==null){M.showLines=(M.showLines!==null&&M.showLines!==undefined)?M.showLines:N;}}F[V]=M;}if(F){H=this.get("graph");H.set("seriesCollection",F);F=H.get("seriesCollection");}return F;},_parseSeriesAxes:function(G){var K=this.get("axes"),I=G.get("xAxis"),F=G.get("yAxis"),J=b.Axis,H;if(I&&!(I instanceof J)&&r.isString(I)&&K.hasOwnProperty(I)){H=K[I];
if(H instanceof J){G.set("xAxis",H);}}if(F&&!(F instanceof J)&&r.isString(F)&&K.hasOwnProperty(F)){H=K[F];if(H instanceof J){G.set("yAxis",H);}}},_getCategoryAxis:function(){var F,G=this.get("axes"),H=this.get("categoryAxisName")||this.get("categoryKey");F=G[H];return F;},_getSeriesAxis:function(G,K){var J=this.get("axes"),F,I,H;if(J){if(K&&J.hasOwnProperty(K)){H=J[K];}else{for(F in J){if(J.hasOwnProperty(F)){I=J[F].get("keys");if(I&&I.hasOwnProperty(G)){H=J[F];break;}}}}}return H;},_getBaseAttribute:function(G,F){if(G instanceof b.Base){return G.get(F);}if(G.hasOwnProperty(F)){return G[F];}return null;},_setBaseAttribute:function(G,F,H){if(G instanceof b.Base){G.set(F,H);}else{G[F]=H;}},_setAxes:function(G){var K=this._parseAxes(G),O={},I={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",appendLabelFunction:"appendLabelFunction",appendTitleFunction:"appendTitleFunction",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero",title:"title",width:"width",height:"height"},J=this.get("dataProvider"),R,L,S,H,M,Q,P,F,N;for(L in K){if(K.hasOwnProperty(L)){Q=K[L];if(Q instanceof b.Axis){H=Q;}else{H=null;F={};F.dataProvider=Q.dataProvider||J;F.keys=Q.keys;if(Q.hasOwnProperty("roundingUnit")){F.roundingUnit=Q.roundingUnit;}S=Q.position;if(Q.styles){F.styles=Q.styles;}F.position=Q.position;for(R in I){if(I.hasOwnProperty(R)&&Q.hasOwnProperty(R)){F[R]=Q[R];}}if(G){H=this.getAxisByKey(L);}if(H&&H instanceof b.Axis){M=H.get("position");if(S!=M){if(M!="none"){N=this.get(M+"AxesCollection");N.splice(b.Array.indexOf(N,H),1);}if(S!="none"){this._addToAxesCollection(S,H);}}H.setAttrs(F);}else{P=this._getAxisClass(Q.type);H=new P(F);H.after("axisRendered",b.bind(this._itemRendered,this));}}if(H){N=this.get(S+"AxesCollection");if(N&&b.Array.indexOf(N,H)>0){H.set("overlapGraph",false);}O[L]=H;}}}return O;},_addAxes:function(){var K=this.get("axes"),G,I,L,F=this.get("width"),H=this.get("height"),J=b.Node.one(this._parentNode);if(!this._axesCollection){this._axesCollection=[];}for(G in K){if(K.hasOwnProperty(G)){I=K[G];if(I instanceof b.Axis){if(!F){this.set("width",J.get("offsetWidth"));F=this.get("width");}if(!H){this.set("height",J.get("offsetHeight"));H=this.get("height");}this._addToAxesRenderQueue(I);L=I.get("position");if(!this.get(L+"AxesCollection")){this.set(L+"AxesCollection",[I]);}else{this.get(L+"AxesCollection").push(I);}this._axesCollection.push(I);if(I.get("keys").hasOwnProperty(this.get("categoryKey"))){this.set("categoryAxis",I);}I.render(this.get("contentBox"));}}}},_addSeries:function(){var F=this.get("graph"),G=this.get("seriesCollection");F.render(this.get("contentBox"));},_addGridlines:function(){var P=this.get("graph"),G=this.get("horizontalGridlines"),H=this.get("verticalGridlines"),O=this.get("direction"),Q=this.get("leftAxesCollection"),K=this.get("rightAxesCollection"),M=this.get("bottomAxesCollection"),I=this.get("topAxesCollection"),J,F=this.get("categoryAxis"),N,L;if(this._axesCollection){J=this._axesCollection.concat();J.splice(b.Array.indexOf(J,F),1);}if(G){if(Q&&Q[0]){N=Q[0];}else{if(K&&K[0]){N=K[0];}else{N=O=="horizontal"?F:J[0];}}if(!this._getBaseAttribute(G,"axis")&&N){this._setBaseAttribute(G,"axis",N);}if(this._getBaseAttribute(G,"axis")){P.set("horizontalGridlines",G);}}if(H){if(M&&M[0]){L=M[0];}else{if(I&&I[0]){L=I[0];}else{L=O=="vertical"?F:J[0];}}if(!this._getBaseAttribute(H,"axis")&&L){this._setBaseAttribute(H,"axis",L);}if(this._getBaseAttribute(H,"axis")){P.set("verticalGridlines",H);}}},_getDefaultAxes:function(){var F;if(this.get("dataProvider")){F=this._parseAxes();}return F;},_parseAxes:function(V){var O=this.get("categoryKey"),G,T,Q,I={},S=[],H=this.get("categoryAxisName")||this.get("categoryKey"),F=this.get("valueAxisName"),J=this.get("seriesKeys").concat(),W,U,N,M,R,X=this.get("direction"),P,K,L=[],Y=this.get("stacked")?"stacked":"numeric";if(X=="vertical"){P="bottom";K="left";}else{P="left";K="bottom";}if(V){for(W in V){if(V.hasOwnProperty(W)){G=V[W];Q=this._getBaseAttribute(G,"keys");T=this._getBaseAttribute(G,"type");if(T=="time"||T=="category"){H=W;this.set("categoryAxisName",W);if(r.isArray(Q)&&Q.length>0){O=Q[0];this.set("categoryKey",O);}I[W]=G;}else{if(W==H){I[W]=G;}else{I[W]=G;if(W!=F&&Q&&r.isArray(Q)){M=Q.length;for(N=0;N<M;++N){S.push(Q[N]);}L.push(I[W]);}if(!(this._getBaseAttribute(I[W],"type"))){this._setBaseAttribute(I[W],"type",Y);}if(!(this._getBaseAttribute(I[W],"position"))){this._setBaseAttribute(I[W],"position",this._getDefaultAxisPosition(I[W],L,P));}}}}}}R=b.Array.indexOf(J,O);if(R>-1){J.splice(R,1);}U=S.length;for(W=0;W<U;++W){R=b.Array.indexOf(J,S[W]);if(R>-1){J.splice(R,1);}}if(!I.hasOwnProperty(H)){I[H]={};}if(!(this._getBaseAttribute(I[H],"keys"))){this._setBaseAttribute(I[H],"keys",[O]);}if(!(this._getBaseAttribute(I[H],"position"))){this._setBaseAttribute(I[H],"position",K);}if(!(this._getBaseAttribute(I[H],"type"))){this._setBaseAttribute(I[H],"type",this.get("categoryType"));}if(!I.hasOwnProperty(F)&&J&&J.length>0){I[F]={keys:J};L.push(I[F]);}if(S.length>0){if(J.length>0){J=S.concat(J);}else{J=S;}}if(I.hasOwnProperty(F)){if(!(this._getBaseAttribute(I[F],"position"))){this._setBaseAttribute(I[F],"position",this._getDefaultAxisPosition(I[F],L,P));}this._setBaseAttribute(I[F],"type",Y);this._setBaseAttribute(I[F],"keys",J);}if(!this._seriesKeysExplicitlySet){this._seriesKeys=J;}return I;},_getDefaultAxisPosition:function(I,G,F){var J=this.get("direction"),H=b.Array.indexOf(G,I);if(G[H-1]&&G[H-1].position){if(J=="horizontal"){if(G[H-1].position=="left"){F="right";}else{if(G[H-1].position=="right"){F="left";}}}else{if(G[H-1].position=="bottom"){F="top";}else{F="bottom";}}}return F;},getSeriesItems:function(K,J){var L=K.get("xAxis"),H=K.get("yAxis"),I=K.get("xKey"),G=K.get("yKey"),M,F;if(this.get("direction")=="vertical"){M={axis:H,key:G,value:H.getKeyValueAt(G,J)};F={axis:L,key:I,value:L.getKeyValueAt(I,J)};
}else{F={axis:H,key:G,value:H.getKeyValueAt(G,J)};M={axis:L,key:I,value:L.getKeyValueAt(I,J)};}M.displayName=K.get("categoryDisplayName");F.displayName=K.get("valueDisplayName");M.value=M.axis.getKeyValueAt(M.key,J);F.value=F.axis.getKeyValueAt(F.key,J);return{category:M,value:F};},_sizeChanged:function(I){if(this._axesCollection){var H=this._axesCollection,G=0,F=H.length;for(;G<F;++G){this._addToAxesRenderQueue(H[G]);}this._redraw();}},_getTopOverflow:function(K,I,G){var H=0,F,L=0,J;if(K){F=K.length;for(;H<F;++H){J=K[H];L=Math.max(L,Math.abs(J.getMaxLabelBounds().top)-(J.getEdgeOffset(J.get("styles").majorTicks.count,G)*0.5));}}if(I){H=0;F=I.length;for(;H<F;++H){J=I[H];L=Math.max(L,Math.abs(J.getMaxLabelBounds().top)-(J.getEdgeOffset(J.get("styles").majorTicks.count,G)*0.5));}}return L;},_getRightOverflow:function(K,H,J){var G=0,F,L=0,I;if(K){F=K.length;for(;G<F;++G){I=K[G];L=Math.max(L,I.getMaxLabelBounds().right-(I.getEdgeOffset(I.get("styles").majorTicks.count,J)*0.5));}}if(H){G=0;F=H.length;for(;G<F;++G){I=H[G];L=Math.max(L,I.getMaxLabelBounds().right-(I.getEdgeOffset(I.get("styles").majorTicks.count,J)*0.5));}}return L;},_getLeftOverflow:function(K,H,J){var G=0,F,L=0,I;if(K){F=K.length;for(;G<F;++G){I=K[G];L=Math.max(L,Math.abs(I.getMinLabelBounds().left)-(I.getEdgeOffset(I.get("styles").majorTicks.count,J)*0.5));}}if(H){G=0;F=H.length;for(;G<F;++G){I=H[G];L=Math.max(L,Math.abs(I.getMinLabelBounds().left)-(I.getEdgeOffset(I.get("styles").majorTicks.count,J)*0.5));}}return L;},_getBottomOverflow:function(K,I,G){var H=0,F,L=0,J;if(K){F=K.length;for(;H<F;++H){J=K[H];L=Math.max(L,J.getMinLabelBounds().bottom-(J.getEdgeOffset(J.get("styles").majorTicks.count,G)*0.5));}}if(I){H=0;F=I.length;for(;H<F;++H){J=I[H];L=Math.max(L,J.getMinLabelBounds().bottom-(J.getEdgeOffset(J.get("styles").majorTicks.count,G)*0.5));}}return L;},_redraw:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;var S=this.get("width"),ac=this.get("height"),aa=0,K=0,ag=0,G=0,F=this.get("leftAxesCollection"),Q=this.get("rightAxesCollection"),R=this.get("topAxesCollection"),af=this.get("bottomAxesCollection"),ab=0,Y,L,I="visible",J=this.get("graph"),N,T,Z,X,O,P,ae,ad,W=this.get("allowContentOverflow"),U,H,ai,V,M,ah={};if(F){ai=[];Y=F.length;for(ab=Y-1;ab>-1;--ab){ai.unshift(aa);aa+=F[ab].get("width");}}if(Q){H=[];Y=Q.length;ab=0;for(ab=Y-1;ab>-1;--ab){K+=Q[ab].get("width");H.unshift(S-K);}}if(R){V=[];Y=R.length;for(ab=Y-1;ab>-1;--ab){V.unshift(ag);ag+=R[ab].get("height");}}if(af){M=[];Y=af.length;for(ab=Y-1;ab>-1;--ab){G+=af[ab].get("height");M.unshift(ac-G);}}O=S-(aa+K);P=ac-(G+ag);ah.left=aa;ah.top=ag;ah.bottom=ac-G;ah.right=S-K;if(!W){N=this._getTopOverflow(F,Q);T=this._getBottomOverflow(F,Q);Z=this._getLeftOverflow(af,R);X=this._getRightOverflow(af,R);U=N-ag;if(U>0){ah.top=N;if(V){ab=0;Y=V.length;for(;ab<Y;++ab){V[ab]+=U;}}}U=T-G;if(U>0){ah.bottom=ac-T;if(M){ab=0;Y=M.length;for(;ab<Y;++ab){M[ab]-=U;}}}U=Z-aa;if(U>0){ah.left=Z;if(ai){ab=0;Y=ai.length;for(;ab<Y;++ab){ai[ab]+=U;}}}U=X-K;if(U>0){ah.right=S-X;if(H){ab=0;Y=H.length;for(;ab<Y;++ab){H[ab]-=U;}}}}O=ah.right-ah.left;P=ah.bottom-ah.top;ae=ah.left;ad=ah.top;if(R){Y=R.length;ab=0;for(;ab<Y;ab++){L=R[ab];if(L.get("width")!==O){L.set("width",O);}L.get("boundingBox").setStyle("left",ae+"px");L.get("boundingBox").setStyle("top",V[ab]+"px");}if(L._hasDataOverflow()){I="hidden";}}if(af){Y=af.length;ab=0;for(;ab<Y;ab++){L=af[ab];if(L.get("width")!==O){L.set("width",O);}L.get("boundingBox").setStyle("left",ae+"px");L.get("boundingBox").setStyle("top",M[ab]+"px");}if(L._hasDataOverflow()){I="hidden";}}if(F){Y=F.length;ab=0;for(;ab<Y;++ab){L=F[ab];L.get("boundingBox").setStyle("top",ad+"px");L.get("boundingBox").setStyle("left",ai[ab]+"px");if(L.get("height")!==P){L.set("height",P);}}if(L._hasDataOverflow()){I="hidden";}}if(Q){Y=Q.length;ab=0;for(;ab<Y;++ab){L=Q[ab];L.get("boundingBox").setStyle("top",ad+"px");L.get("boundingBox").setStyle("left",H[ab]+"px");if(L.get("height")!==P){L.set("height",P);}}if(L._hasDataOverflow()){I="hidden";}}this._drawing=false;if(this._callLater){this._redraw();return;}if(J){J.get("boundingBox").setStyle("left",ae+"px");J.get("boundingBox").setStyle("top",ad+"px");J.set("width",O);J.set("height",P);J.get("boundingBox").setStyle("overflow",I);}if(this._overlay){this._overlay.setStyle("left",ae+"px");this._overlay.setStyle("top",ad+"px");this._overlay.setStyle("width",O+"px");this._overlay.setStyle("height",P+"px");}},destructor:function(){var J=this.get("graph"),H=0,F,K=this.get("seriesCollection"),G=this._axesCollection,I=this.get("tooltip").node;if(this._description){this._description.empty();this._description.remove(true);}if(this._liveRegion){this._liveRegion.empty();this._liveRegion.remove(true);}F=K?K.length:0;for(;H<F;++H){if(K[H] instanceof b.CartesianSeries){K[H].destroy(true);}}F=G?G.length:0;for(H=0;H<F;++H){if(G[H] instanceof b.Axis){G[H].destroy(true);}}if(J){J.destroy(true);}if(I){I.empty();I.remove(true);}if(this._overlay){this._overlay.empty();this._overlay.remove(true);}},_getAriaMessage:function(P){var I="",L,O,H,N,K=this._seriesIndex,F=this._itemIndex,J=this.get("seriesCollection"),M=J.length,G;if(P%2===0){if(M>1){if(P===38){K=K<1?M-1:K-1;}else{if(P===40){K=K>=M-1?0:K+1;}}this._itemIndex=-1;}else{K=0;}this._seriesIndex=K;L=this.getSeries(parseInt(K,10));I=L.get("valueDisplayName")+" series.";}else{if(K>-1){I="";L=this.getSeries(parseInt(K,10));}else{K=0;this._seriesIndex=K;L=this.getSeries(parseInt(K,10));I=L.get("valueDisplayName")+" series.";}G=L._dataLength?L._dataLength:0;if(P===37){F=F>0?F-1:G-1;}else{if(P===39){F=F>=G-1?0:F+1;}}this._itemIndex=F;O=this.getSeriesItems(L,F);H=O.category;N=O.value;if(H&&N&&H.value&&N.value){I+=H.displayName+": "+H.axis.formatLabel.apply(this,[H.value,H.axis.get("labelFormat")])+", ";I+=N.displayName+": "+N.axis.formatLabel.apply(this,[N.value,N.axis.get("labelFormat")])+", ";}else{I+="No data available.";}I+=(F+1)+" of "+G+". ";}return I;}},{ATTRS:{allowContentOverflow:{value:false},axesStyles:{getter:function(){var H=this.get("axes"),F,G=this._axesStyles;
if(H){for(F in H){if(H.hasOwnProperty(F)&&H[F] instanceof b.Axis){if(!G){G={};}G[F]=H[F].get("styles");}}}return G;},setter:function(H){var G=this.get("axes"),F;for(F in H){if(H.hasOwnProperty(F)&&G.hasOwnProperty(F)){this._setBaseAttribute(G[F],"styles",H[F]);}}}},seriesStyles:{getter:function(){var G=this._seriesStyles,H=this.get("graph"),I,F;if(H){I=H.get("seriesDictionary");if(I){G={};for(F in I){if(I.hasOwnProperty(F)){G[F]=I[F].get("styles");}}}}return G;},setter:function(I){var G,F,H;if(r.isArray(I)){H=this.get("seriesCollection");G=0;F=I.length;for(;G<F;++G){this._setBaseAttribute(H[G],"styles",I[G]);}}else{for(G in I){if(I.hasOwnProperty(G)){H=this.getSeries(G);this._setBaseAttribute(H,"styles",I[G]);}}}}},graphStyles:{getter:function(){var F=this.get("graph");if(F){return(F.get("styles"));}return this._graphStyles;},setter:function(G){var F=this.get("graph");this._setBaseAttribute(F,"styles",G);}},styles:{getter:function(){var F={axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")};return F;},setter:function(F){if(F.hasOwnProperty("axes")){if(this.get("axesStyles")){this.set("axesStyles",F.axes);}else{this._axesStyles=F.axes;}}if(F.hasOwnProperty("series")){if(this.get("seriesStyles")){this.set("seriesStyles",F.series);}else{this._seriesStyles=F.series;}}if(F.hasOwnProperty("graph")){this.set("graphStyles",F.graph);}}},axes:{valueFn:"_getDefaultAxes",setter:function(F){if(this.get("dataProvider")){F=this._setAxes(F);}return F;}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(F){if(this.get("dataProvider")){F=this._parseSeriesCollection(F);}return F;}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:false},direction:{getter:function(){var F=this.get("type");if(F=="bar"){return"vertical";}else{if(F=="column"){return"horizontal";}}return this._direction;},setter:function(F){this._direction=F;return this._direction;}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var F=this.get("graph");if(F){return F.get("horizontalGridlines");}return this._horizontalGridlines;},setter:function(G){var F=this.get("graph");if(G&&!r.isObject(G)){G={};}if(F){F.set("horizontalGridlines",G);}else{this._horizontalGridlines=G;}}},verticalGridlines:{getter:function(){var F=this.get("graph");if(F){return F.get("verticalGridlines");}return this._verticalGridlines;},setter:function(G){var F=this.get("graph");if(G&&!r.isObject(G)){G={};}if(F){F.set("verticalGridlines",G);}else{this._verticalGridlines=G;}}},type:{getter:function(){if(this.get("stacked")){return"stacked"+this._type;}return this._type;},setter:function(F){if(this._type=="bar"){if(F!="bar"){this.set("direction","horizontal");}}else{if(F=="bar"){this.set("direction","vertical");}}this._type=F;return this._type;}},categoryAxis:{}}});b.PieChart=b.Base.create("pieChart",b.Widget,[b.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection){return this._seriesCollection;}var K=this.get("axes"),M=[],L,I=0,H,N=this.get("type"),P,F="categoryAxis",J="categoryKey",G="valueAxis",O="valueKey";if(K){L=K.values.get("keyCollection");P=K.category.get("keyCollection")[0];H=L.length;for(;I<H;++I){M[I]={type:N};M[I][F]="category";M[I][G]="values";M[I][J]=P;M[I][O]=L[I];}}this._seriesCollection=M;return M;},_parseAxes:function(I){if(!this._axes){this._axes={};}var J,O,H,M,F,L,N=this.get("type"),P=this.get("width"),K=this.get("height"),G=b.Node.one(this._parentNode);if(!P){this.set("width",G.get("offsetWidth"));P=this.get("width");}if(!K){this.set("height",G.get("offsetHeight"));K=this.get("height");}for(J in I){if(I.hasOwnProperty(J)){M=I[J];O=N=="pie"?"none":M.position;L=this._getAxisClass(M.type);F={dataProvider:this.get("dataProvider")};if(M.hasOwnProperty("roundingUnit")){F.roundingUnit=M.roundingUnit;}F.keys=M.keys;F.width=P;F.height=K;F.position=O;F.styles=M.styles;H=new L(F);H.on("axisRendered",b.bind(this._itemRendered,this));this._axes[J]=H;}}},_addAxes:function(){var I=this.get("axes"),F,G,H;if(!I){this.set("axes",this._getDefaultAxes());I=this.get("axes");}if(!this._axesCollection){this._axesCollection=[];}for(F in I){if(I.hasOwnProperty(F)){G=I[F];H=G.get("position");if(!this.get(H+"AxesCollection")){this.set(H+"AxesCollection",[G]);}else{this.get(H+"AxesCollection").push(G);}this._axesCollection.push(G);}}},_addSeries:function(){var F=this.get("graph"),G=this.get("seriesCollection");this._parseSeriesAxes(G);F.set("showBackground",false);F.set("width",this.get("width"));F.set("height",this.get("height"));F.set("seriesCollection",G);this._seriesCollection=F.get("seriesCollection");F.render(this.get("contentBox"));},_parseSeriesAxes:function(K){var G=0,F=K.length,I,J=this.get("axes"),H;for(;G<F;++G){I=K[G];if(I){if(I instanceof b.PieSeries){H=I.get("categoryAxis");if(H&&!(H instanceof b.Axis)){I.set("categoryAxis",J[H]);}H=I.get("valueAxis");if(H&&!(H instanceof b.Axis)){I.set("valueAxis",J[H]);}continue;}I.categoryAxis=J.category;I.valueAxis=J.values;if(!I.type){I.type=this.get("type");}}}},_getDefaultAxes:function(){var H=this.get("categoryKey"),G=this.get("seriesKeys").concat(),F="numeric";return{values:{keys:G,type:F},category:{keys:[H],type:this.get("categoryType")}};},getSeriesItems:function(H,G){var I={axis:H.get("categoryAxis"),key:H.get("categoryKey"),displayName:H.get("categoryDisplayName")},F={axis:H.get("valueAxis"),key:H.get("valueKey"),displayName:H.get("valueDisplayName")};I.value=I.axis.getKeyValueAt(I.key,G);F.value=F.axis.getKeyValueAt(F.key,G);return{category:I,value:F};},_sizeChanged:function(F){this._redraw();},_redraw:function(){var H=this.get("graph"),F=this.get("width"),G=this.get("height"),I;if(H){I=Math.min(F,G);H.set("width",I);H.set("height",I);}},_tooltipLabelFunction:function(M,F,I,H,G){var L=g.createElement("div"),J=H.getTotalValues(),K=Math.round((F.value/J)*10000)/100;L.appendChild(g.createTextNode(M.displayName+": "+M.axis.get("labelFunction").apply(this,[M.value,M.axis.get("labelFormat")])));
L.appendChild(g.createElement("br"));L.appendChild(g.createTextNode(F.displayName+": "+F.axis.get("labelFunction").apply(this,[F.value,F.axis.get("labelFormat")])));L.appendChild(g.createElement("br"));L.appendChild(g.createTextNode(K+"%"));return L;},_getAriaMessage:function(R){var H="",G,O,L,N,K=0,F=this._itemIndex,I=this.get("seriesCollection"),M,P,Q,J;L=this.getSeries(parseInt(K,10));J=L.get("markers");M=J&&J.length?J.length:0;if(R===37){F=F>0?F-1:M-1;}else{if(R===39){F=F>=M-1?0:F+1;}}this._itemIndex=F;O=this.getSeriesItems(L,F);G=O.category;N=O.value;P=L.getTotalValues();Q=Math.round((N.value/P)*10000)/100;if(G&&N){H+=G.displayName+": "+G.axis.formatLabel.apply(this,[G.value,G.axis.get("labelFormat")])+", ";H+=N.displayName+": "+N.axis.formatLabel.apply(this,[N.value,N.axis.get("labelFormat")])+", ";H+="Percent of total "+N.displayName+": "+Q+"%,";}else{H+="No data available,";}H+=(F+1)+" of "+M+". ";return H;}},{ATTRS:{ariaDescription:{value:"Use the left and right keys to navigate through items.",setter:function(F){if(this._description){this._description.setContent("");this._description.appendChild(g.createTextNode(F));}return F;}},axes:{getter:function(){return this._axes;},setter:function(F){this._parseAxes(F);}},seriesCollection:{getter:function(){return this._getSeriesCollection();},setter:function(F){return this._setSeriesCollection(F);}},type:{value:"pie"}}});},"@VERSION@",{"requires":["dom","datatype-number","datatype-date","event-custom","event-mouseenter","event-touch","widget","widget-position","widget-stack","graphics"]});