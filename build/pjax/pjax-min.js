YUI.add("pjax",function(f){var e=f.ClassNameManager.getClassName("pjax"),b="error",a="load",c="navigate";function d(){d.superclass.constructor.apply(this,arguments);}f.extend(d,f.Base,{initializer:function(){this.publish(c,{defaultFn:this._defNavigateFn});this._bindUI();},destructor:function(){var g=this.get("controller");this._events&&this._events.detach();if(g&&g._pjaxOwner===this){g.destroy();}},load:function(h,i){var g=this.get("controller");f.io(h,{context:this,headers:{"X-PJAX":"true"},on:{failure:this._onIOFailure,success:this._onIOSuccess},arguments:[i]});g.save(g.removeRoot(h));if(this.get("scrollToTop")&&f.config.win){setTimeout(function(){f.config.win.scroll(0,0);},1);}},_bindUI:function(){if(this.get("controller").html5){this._events=f.one("body").delegate("click",this._onLinkClick,this.get("linkSelector"),this);}},_getContent:function(j){var i={},g=this.get("contentSelector"),l=f.Node.create(j||""),h=this.get("titleSelector"),k;if(g){i.node=f.one(l.all(g).toFrag());}else{i.node=l;}if(h){k=l.one(h);if(k){i.title=k.get("text");}}return i;},_defNavigateFn:function(g){this.load(g.url);},_onIOFailure:function(k,h,g){var j=g[0],i=this._getContent(h.responseText);this.fire(b,{content:i,responseText:h.responseText,status:h.status});j&&j.call(this,h.statusText||h.responseText||"XHR error",i,h);},_onIOSuccess:function(k,h,g){var j=g[0],i=this._getContent(h.responseText);this.fire(a,{content:i,responseText:h.responseText,status:h.status});j&&j.call(this,null,i,h);},_onLinkClick:function(g){if(g.button!==1||g.ctrlKey||g.metaKey){return;}g.preventDefault();this.fire(c,{originEvent:g,url:g.currentTarget.get("href")});}},{NAME:"pjax",ATTRS:{contentSelector:{value:null},controller:{valueFn:function(){var g=new f.Controller();g._pjaxOwner=this;return g;}},linkSelector:{value:"a."+e,writeOnce:"initOnly"},scrollToTop:{value:true},titleSelector:{value:"title"}}});f.Pjax=d;},"@VERSION@",{requires:["classnamemanager","controller","io-base","node-base","node-event-delegate"]});