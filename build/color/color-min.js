YUI.add("color",function(e,t){var n=e.Color.KEYWORDS,r=e.Color.re_hex,i=e.Color.re_hex3,s=e.Color.re_RGB,o=/rgba\(([0-9]{1,3}), ?([0-9]{1,3}), ?([0-9]{1,3}), ?([.0-9]{1,3})\)/,u=/hsl\(([0-9]{1,3}), ?([0-9]*\.?[0-9]+)%, ?([0-9]*\.?[0-9]+)%\)/,a=/hsla\(([0-9]{1,3}), ?([0-9]*\.?[0-9]+)%, ?([0-9]*\.?[0-9]+)%, ?([.0-9]{1,3})\)/,f="hex",l="rgb",c="hsl",h={REGEX:{hex:r,hex3:i,rgbcss:s,rgbacss:o,hslcss:u,hslacss:a},convert:function(e){switch(e.to){case"hex":return h.toHex(e);case"rgb":return h.toRGB(e);case"rgba":return h.toRGBA(e);case"hsl":return h.toHSL(e);case"hsla":return h.toHSLA(e)}},toHex:function(t){return e.Lang.isString(t)&&(t={value:t,css:!0}),t=h._convertTo(t,f),t.css?"#"+t.value.join(""):t.value},toRGB:function(t){return e.Lang.isString(t)&&(t={value:t,css:!0}),t=h._convertTo(t,l),t.css?"rgb("+t.value.join(", ")+")":t.value},toRGBA:function(t){return t=h._convertTo(t,l),t.value.push(e.Lang.isNumber(t.opacity)?t.opacity:1),t.css?"rgba("+t.value.join(", ")+")":t.value},toHSL:function(e){return e=h._convertTo(e,c),e.value[1]=Math.round(e.value[1]*100)/100,e.value[2]=Math.round(e.value[2]*100)/100,e.css?(e.value[1]+="%",e.value[2]+="%","hsl("+e.value.join(", ")+")"):e.value},toHSLA:function(t){return t=h._convertTo(t,c),t.value.push(e.Lang.isNumber(t.opacity)?t.opacity:1),t.css?(t.value[1]+="%",t.value[2]+="%","hsla("+t.value.join(", ")+")"):t.value},_findType:function(t){var h=t.value;if(e.Lang.isArray(h))return t;if(n[h])t.type="keyword";else if(s.exec(h))t.type=l;else if(o.exec(h))t.type=l+"a";else if(u.exec(h))t.type=c;else if(a.exec(h))t.type=c+"a";else if(r.exec(h)||i.exec(h))t.type=f;return t},_toArray:function(t){var f=[],l=null,c=null,p=t.value;if(t.type==="auto"||typeof t.type=="undefined")t=h._findType(t);c=t.type.toLowerCase(),p=e.Lang.isString(p)?p.toLowerCase():p;switch(c){case"keyword":p=n[p],c="hex";case"hex":l=r.exec(p);if(l){f=[l[2],l[3],l[4]];break}l=i.exec(p),l&&(f=[l[2].toString()+l[2],l[3].toString()+l[3],l[4].toString()+l[4]]);break;case"rgb":case"rbgcss":if(e.Lang.isArray(p)&&p.length===3){f=p.concat();break}l=s.exec(p),l&&(f=[l[1],l[2],l[3]]);break;case"rgba":case"rgbacss":if(e.Lang.isArray(p)&&p.length===4){t.opacity=p.pop(),f=p.concat();break}l=o.exec(p),l&&(t.opacity=l[4],f=[l[1],l[2],l[3]]);break;case"hsl":case"hslcss":if(e.Lang.isArray(p)&&p.length===3){f=p.concat();break}l=u.exec(p),l&&(f=[l[1],l[2],l[3]]);break;case"hsla":case"hslacss":if(e.Lang.isArray(p)&&p.length===4){t.opacity=p.pop(),f=p.concat();break}l=a.exec(p),l&&(t.opacity=l[4],f=[l[1],l[2],l[3]]);break;default:return t}return t.type=c.replace(/a?(css)?$/,""),t.value=f,t},_convertTo:function(t,n){var r=e.merge(t),i,s;return r.to=n||r.to,r=h._toArray(r),i=r.type,s=r.value,n=r.to,i===n?r:(i===f?(s=h._fromHexToRGB(s),n===c&&(s=h._fromRGBToHSL(s))):i===l?n===f?s=h._fromRGBToHex(s):n===c&&(s=h._fromRGBToHSL(s)):i===c&&(s=h._fromHSLToRGB(s),n===f&&(s=h._fromRGBToHex(s))),r.type=n,r.value=s,r)},_fromRGBToHSL:function(e){var t=parseFloat(e[0],10)/255,n=parseFloat(e[1],10)/255,r=parseFloat(e[2],10)/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o,u,a,f=!1,l=i-s,c=i+s;return t===n&&n===r&&(f=!0),l===0?o=0:t===i?o=(60*(n-r)/l+360)%360:n===i?o=60*(r-t)/l+120:o=60*(t-n)/l+240,a=c/2,a===0||a===1?u=a:a<=.5?u=l/c:u=l/(2-c),f&&(u=0),o=Math.round(o),u=Math.round(u*100),a=Math.round(a*100),[o,u,a]},_fromHSLToRGB:function(e){var t=parseInt(e[0],10)/360,n=parseInt(e[1],10)/100,r=parseInt(e[2],10)/100,i,s,o,u,a;return r<=.5?a=r*(n+1):a=r+n-r*n,u=2*r-a,i=Math.round(h._hueToRGB(u,a,t+1/3)*255),s=Math.round(h._hueToRGB(u,a,t)*255),o=Math.round(h._hueToRGB(u,a,t-1/3)*255),[i,s,o]},_hueToRGB:function(e,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}};e.mix(h,e.Color),e.Color=h},"@VERSION@",{requires:["color-base"]})