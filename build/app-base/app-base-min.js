YUI.add("app-base",function(c,j){var g=c.Lang,i=c.Object,a=c.PjaxBase,d=c.Router,b=c.View,e=c.ClassNameManager.getClassName,h=c.config.win,f;f=c.Base.create("app",c.Base,[b,d,a],{views:{},initializer:function(l){l||(l={});var k={};function m(n,o){k[o]=c.merge(k[o],n);}i.each(this.views,m);i.each(l.views,m);this.views=k;this._viewInfoMap={};this.after("activeViewChange",c.bind("_afterActiveViewChange",this));if(!this.get("serverRouting")){this._pjaxBindUI();}},createView:function(n,m){var l=this.getViewInfo(n),o=(l&&l.type)||b,p,k;p=g.isString(o)?i.getValue(c,o.split(".")):o;k=new p(m);this._viewInfoMap[c.stamp(k,true)]=l;return k;},getViewInfo:function(k){if(g.isString(k)){return this.views[k];}return k&&this._viewInfoMap[c.stamp(k,true)];},render:function(){var p=c.App.CLASS_NAMES,l=this.get("container"),k=this.get("viewContainer"),m=this.get("activeView"),o=m&&m.get("container"),n=l.compareTo(k);l.addClass(p.app);k.addClass(p.views);if(m&&!k.contains(o)){k.appendChild(o);}if(!l.contains(k)&&!n){l.appendChild(k);}return this;},showView:function(k,n,m,p){var l,o;m||(m={});if(p){m=c.merge(m,{callback:p});}else{if(g.isFunction(m)){m={callback:m};}}if(g.isString(k)){l=this.getViewInfo(k);if(l&&l.preserve&&l.instance){k=l.instance;this._viewInfoMap[c.stamp(k,true)]=l;}else{k=this.createView(k,n);o=true;}}if(m.update&&!o){k.setAttrs(n);}if(m.hasOwnProperty("render")){if(m.render){k.render();}}else{if(o){k.render();}}return this._set("activeView",k,{options:m});},_attachView:function(l,m){if(!l){return;}var n=this.getViewInfo(l),k=this.get("viewContainer");l.addTarget(this);if(n){n.instance=l;}k[m?"prepend":"append"](l.get("container"));},_destroyContainer:function(){var n=c.App.CLASS_NAMES,l=this.get("container"),k=this.get("viewContainer"),m=l.compareTo(k);if(c.one("body").compareTo(l)){this.detachEvents();l.removeClass(n.app);if(m){l.removeClass(n.views);}else{k.remove(true);}return;}k.remove(true);if(!m){l.remove(true);}},_detachView:function(k){if(!k){return;}var l=this.getViewInfo(k)||{};if(l.preserve){k.remove();}else{k.destroy({remove:true});delete this._viewInfoMap[c.stamp(k,true)];if(k===l.instance){delete l.instance;}}k.removeTarget(this);},_getViewContainer:function(k){if(!k&&!this._viewContainer){k=this._viewContainer=this.create();this._set("viewContainer",k);}return k;},_initHtml5:function(){if(this.get("serverRouting")===false){return false;}return d.html5;},_isChildView:function(k,n){var m=this.getViewInfo(k),l=this.getViewInfo(n);if(m&&l){return this.getViewInfo(m.parent)===l;}return false;},_isParentView:function(k,n){var l=this.getViewInfo(k),m=this.getViewInfo(n);if(l&&m){return this.getViewInfo(m.parent)===l;}return false;},_navigate:function(l,k){if(!this.get("serverRouting")){k=c.merge({force:true},k);}return a.prototype._navigate.call(this,l,k);},_save:function(k,l){var m;if(this.get("serverRouting")&&!this.get("html5")){if(!this._hasSameOrigin(k)){c.error("Security error: The new URL must be of the same origin as the current URL.");return this;}if(h){m=this._joinURL(k||"");if(l){h.location.replace(m);}else{h.location=m;}}return this;}return d.prototype._save.apply(this,arguments);},_uiSetActiveView:function(q,o,n){n||(n={});var p=n.callback,k=this._isChildView(q,o),m=!k&&this._isParentView(q,o),l=!!n.prepend||m;if(q===o){return p&&p.call(this,q);}this._attachView(q,l);this._detachView(o);if(p){p.call(this,q);}},_afterActiveViewChange:function(k){this._uiSetActiveView(k.newVal,k.prevVal,k.options);}},{ATTRS:{activeView:{value:null,readOnly:true},container:{valueFn:function(){return c.one("body");}},html5:{valueFn:"_initHtml5"},linkSelector:{value:"a"},serverRouting:{valueFn:function(){return c.App.serverRouting;},writeOnce:"initOnly"},viewContainer:{getter:"_getViewContainer",setter:c.one,writeOnce:true}},_NON_ATTRS_CFG:["views"]});c.namespace("App").Base=f;c.App=c.mix(c.Base.create("app",f,[]),c.App,true);c.App.CLASS_NAMES={app:e("app"),views:e("app","views")};},"@VERSION@",{"requires":["classnamemanager","pjax-base","router","view"]});