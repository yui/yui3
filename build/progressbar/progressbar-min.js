YUI.add("progressbar",function(C){var a="progressbar",B="mask",d="bar",f="tl",c="tr",b="bl",Z="br",A="anim",V="contentBox",D="maskEl",F="barEl",e=C.ClassNameManager.getClassName,E="image",J=e(a,B),P=e(a,d),U=e(a,f),O=e(a,c),N=e(a,b),I=e(a,Z),G=e(a,A),Q='<div class="'+P+'"></div>',K='<table class="'+J+'"><tr><td class="'+U+'"></td><td class="'+O+'"></td></tr><tr><td class="'+N+'"></td><td class="'+I+'"></td></tr></table>',M=C.Lang,S=M.isArray,R=M.isBoolean,T=M.isString,W=M.isNumber,X=M.isNull;var H=function(){H.superclass.constructor.apply(this,arguments);};C.mix(H,{NAME:"progressbar",ATTRS:{barEl:{value:null},maskEl:{value:null},direction:{value:"lr",set:function(L){return this._setDirectionAtt(L);},validator:function(L){return this._validateDirectionAtt(L);}},maxValue:{value:100,validator:function(L){return this._validateMaxValueAtt(L);}},minValue:{value:0,validator:function(L){return this._validateMinValueAtt(L);}},width:{value:null,set:function(L){return this._setWidthAtt(L);}},height:{value:null,set:function(L){return this._setHeightAtt(L);}},barColor:{},backColor:{},border:{},ariaText:{value:"|"},value:{value:50,validator:function(L){return this._validateValueAtt(L);}},anim:{value:{}}}});C.extend(H,C.Widget,{_previousValue:50,_tweenFactor:1,_barFactor:1,_barSpace:0,_rendered:false,_anim:null,initializer:function(L){this.publish("startEvent",{emitFacade:false});this.publish("changingEvent",{emitFacade:false});this.publish("completeEvent",{emitFacade:false});this.after("valueChange",this._redraw);this.after("minValueChange",this.redraw);this.after("maxValueChange",this.redraw);this.after("widthChange",this._onWidthChange);this.after("heightChange",this._onHeightChange);this.after("barColorChange",this._onBarColorChange);this.after("backColorChange",this._onBackColorChange);this.after("borderChange",this._onBorderChange);},renderer:function(){H.superclass.renderer.apply(this,arguments);},renderUI:function(){var L=this.get(V);this.set(F,L.appendChild(C.Node.create(Q)));this.set(D,L.appendChild(C.Node.create(K)));if(X(this.get("width"))){this.set("width",L.getComputedStyle("width"));}if(X(this.get("height"))){this.set("height",L.getComputedStyle("height"));}this._rendered=true;this._onWidthChange();this._onHeightChange();this._onBarColorChange();this._onBackColorChange();this._onBorderChange();var Y=this.get(F);if(C.Anim){Y.plug(C.plugin.NodeFX);this._anim=Y.fx;this._anim.setAtts(this.get("anim"));this._anim.after("tween",function(g){this.fire("changingEvent",Math.floor(this._tweenFactor*this._anim.get("elapsedTime")+this._previousValue));},this,true);this._anim.after("end",function(g){this.fire("completeEvent",this._previousValue=this.get("value"));this.get(F).removeClass(G);},this,true);}},syncUI:function(){this.get(V).setAttribute("tabIndex",1).setAttribute("role","progressbar").setAttribute("aria-valuemin",this.get("minValue")).setAttribute("aria-valuemax",this.get("maxValue")).setAttribute("aria-valuenow",this.get("value")).setAttribute("aria-valuetext",this.get("ariaText").replace("|",this.get("value")));this.redraw();},redraw:function(){this._recalculateConstants();this._redraw();},_redraw:function(){var g=this.get("value");var L=(g-this._mn)*this._barFactor;this.get(V).setAttribute("aria-valuenow",g).setAttribute("aria-valuetext",this.get("ariaText").replace("|",g));this.fire("startEvent",this._previousValue);var Y=this.get(F);if(this._anim){Y.addClass(G);this._tweenFactor=(g-this._previousValue)/(this._anim.get("duration")*1000);switch(this.get("direction")){case"lr":this._anim.set("to",{width:L});break;case"rl":this._anim.set("to",{width:L,left:this._barSpace-L});break;case"tb":this._anim.set("to",{height:L});break;case"bt":this._anim.set("to",{height:L,top:this._barSpace-L});break;}this._anim.run();}else{switch(this.get("direction")){case"lr":Y.setStyle("width",L+"px");break;case"rl":Y.setStyle("width",L+"px");Y.setStyle("left",(this._barSpace-L)+"px");break;case"tb":Y.setStyle("height",(L)+"px");break;case"bt":Y.setStyle("height",L+"px");Y.setStyle("top",(this._barSpace-L)+"px");break;}this.fire("completeEvent",g);}},destructor:function(){},_recalculateConstants:function(){this._mn=this.get("minValue");var L=this.get(F);switch(this.get("direction")){case"lr":case"rl":this._barSpace=parseInt(this.get("width"),10)-parseInt(L.getComputedStyle("marginLeft"),10)-parseInt(L.getComputedStyle("marginRight"),10);break;case"tb":case"bt":this._barSpace=parseInt(this.get("height"),10)-parseInt(L.getComputedStyle("marginTop"),10)-parseInt(L.getComputedStyle("marginBottom"),10);break;}this._barFactor=this._barSpace/(this.get("maxValue")-this._mn);},_onWidthChange:function(){if(!this._rendered){return;}var L=this.get("width");this.get(V).setStyle("width",L);this.get(D).setStyle("width",L);this.get(F).setStyle("width",L);this.redraw();},_onHeightChange:function(L){if(!this._rendered){return;}var Y=this.get("height");this.get(V).setStyle("height",Y);this.get(D).setStyle("height",Y);this.get(F).setStyle("height",Y);this.redraw();},_onBarColorChange:function(){if(!this._rendered){return;}this.get(F).setStyle("backgroundColor",this.get("barColor"));},_onBackColorChange:function(L){if(!this._rendered){return;}this.get(V).setStyle("backgroundColor",this.get("backColor"));},_onBorderChange:function(L){if(!this._rendered){return;}this.get(V).setStyle("border",this.get("border"));},_setDirectionAtt:function(L){return C.Lang.trim(L.toLowerCase());},_validateDirectionAtt:function(L){switch(L){case"lr":case"rl":case"tb":case"bt":return true;default:return false;}},_validateMaxValueAtt:W,_validateMinValueAtt:W,_setWidthAtt:function(L){if(W(L)){L+="px";}return L;},_setHeightAtt:function(L){if(W(L)){L+="px";}return L;},_validateValueAtt:function(L){return W(L)&&L>=this.get("minValue")&&L<=this.get("maxValue");}});C.ProgressBar=H;},"@VERSION@",{requires:["widget"]});