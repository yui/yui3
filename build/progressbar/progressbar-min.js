YUI.add("progressbar",function(D){var K="progressbar",M="mask",O="bar",h="tl",f="tr",e="bl",X="br",m="boundingBox",T="contentBox",F="width",d="height",a="minValue",A="maxValue",l="value",B="anim",U="direction",i="ltr",H="rtl",C="ttb",o="btt",Z="barEl",R="maskEl",j="ariaTextTemplate",W="start",S="progress",k="end",G=D.ClassNameManager.getClassName,g=G(K,M),p=G(K,O),P=G(K,h),N=G(K,f),I=G(K,e),E=G(K,X),V=G(K,B),Q='<div class="'+p+'"></div>',n=['<div class="',g,'"><div class="',P,'"></div><div class="',N,'"></div><div class="',I,'"></div><div class="',E,'"></div></div>'].join(""),J=D.Lang,r="px";var c=function(){c.superclass.constructor.apply(this,arguments);};D.mix(c,{NAME:"progressbar",ATTRS:{barEl:{writeOnce:true},maskEl:{writeOnce:true},direction:{value:i,lazyAdd:false,validator:function(L){return this._validateDirectionAtt(L);}},maxValue:{value:100,validator:function(L){return this._validateMaxValueAtt(L);}},minValue:{value:0,validator:function(L){return this._validateMinValueAtt(L);}},ariaTextTemplate:{value:"{value}"},value:{value:0,validator:function(L){return this._validateValueAtt(L);}},anim:{value:null,lazyAdd:false,setter:function(L){return this._setAnimAtt(L);}}}});D.extend(c,D.Widget,{_previousValue:0,_tweenFactor:1,_barFactor:1,_barSpace:0,initializer:function(L){this.publish(W);this.publish(S);this.publish(k);},renderUI:function(){var L=this.get(T),Y=this.get(m);L.addClass(G(K,this.get(U)));this.set(Z,L.appendChild(D.Node.create(Q)));this.set(R,L.appendChild(D.Node.create(n)));if(this.get(F)===""){this.set(F,Y.getStyle(F));}if(this.get(d)===""){this.set(d,Y.getStyle(d));}Y.setAttrs({role:"progressbar","aria-valuemin":this.get(a),"aria-valuemax":this.get(A)});this._previousValue=this.get(l);this._animChange(this.get(B));},bindUI:function(){this.after("valueChange",this._afterValueChange);this.after("minValueChange",this._afterMinValueChange);this.after("maxValueChange",this._afterMaxValueChange);this.after("animChange",this._afterAnimChange);},syncUI:function(){this._fixEdges();this._recalculateConstants();this._moveBarEl(this.get(l),true);},_afterMinValueChange:function(L){var Y=L.newVal;if(this.get(l)<Y){this.set(l,Y);}this.get(m).setAttribute("aria-valuemin",Y);this.syncUI();},_afterMaxValueChange:function(L){var Y=L.newVal;if(this.get(l)>Y){this.set(l,Y);}this.get(m).setAttribute("aria-valuemax",Y);this.syncUI();},_afterValueChange:function(L){this._moveBarEl(L.newVal);},_moveBarEl:function(s,Y){this._setAriaText(s);var L=Math.floor((s-this.get(a))*this._barFactor),b=this.get(B);if(b&&b.get("running")){b.stop();}this.fire(W,{value:this._previousValue});c._barSizeFunctions[(!Y&&b)?1:0][this.get(U)].call(this,s,L,this.get(Z),b);},destructor:function(){var b=this.get(B);b.stop();b.destroy();this.set(B,false);this.unsubscribeAll();var Y=this.get(m),L=Y.get("parentNode");if(L){L.removeChild(Y);}},_recalculateConstants:function(){var L=this.get(Z);switch(this.get(U)){case i:case H:this._barSpace=parseInt(this.get(F),10)-(parseInt(L.getStyle("marginLeft"),10)||0)-(parseInt(L.getStyle("marginRight"),10)||0);break;case C:case o:this._barSpace=parseInt(this.get(d),10)-(parseInt(L.getStyle("marginTop"),10)||0)-(parseInt(L.getStyle("marginBottom"),10)||0);break;}this._barFactor=this._barSpace/(this.get(A)-(this.get(a)||0))||1;},_fixEdges:function(){if(!this.get("rendered")||D.UA.ie||D.UA.gecko){return;}var s=this.get(R),u=s.one("."+P)[0],b=s.one("."+N)[0],t=s.one("."+I)[0],Y=s.one("."+E)[0],L=(parseInt(s.getStyle(d),10)-parseInt(u.getStyle(d),10))+r;t.setStyle(d,L);Y.setStyle(d,L);L=(parseInt(s.getStyle(F),10)-parseInt(u.getStyle(F),10))+r;b.setStyle(F,L);Y.setStyle(F,L);},_afterWidthChange:function(){c.superclass._afterWidthChange.apply(this,arguments);this.syncUI();},_afterHeightChange:function(){c.superclass._afterHeightChange.apply(this,arguments);this.syncUI();},_validateDirectionAtt:function(L){if(this.get("rendered")){return false;}switch(L){case i:case H:case C:case o:return true;default:return false;}},_validateMinValueAtt:J.isNumber,_validateMaxValueAtt:J.isNumber,_validateValueAtt:function(L){return J.isNumber(L)&&L>=this.get(a)&&L<=this.get(A);},_setAnimAtt:function(L){if(L&&!(L instanceof D.Anim)){return new D.Anim();}},_afterAnimChange:function(L){this._animChange(L.newVal);},_animChange:function(L){if(L){L.set("node",this.get(Z));L.after("tween",D.bind(this._animOnTween,this));L.after("end",D.bind(this._animComplete,this));}else{L=this.get(B);if(L){L.detachAll();}L.destroy();L=null;}},_animComplete:function(){var L=this.get(l);this._previousValue=L;this.get(Z).removeClass(V);this.fire(S,{value:L});this.fire(k,{value:L});},_animOnTween:function(Y){var s=Y.target,b=Math.floor(this._tweenFactor*s.get("elapsedTime")+this._previousValue),L=this.get(Z);switch(this.get(U)){case o:L.setStyle("top",(this._barSpace-parseFloat(L.getStyle(d)))+r);break;case H:L.setStyle("left",(this._barSpace-parseFloat(L.getStyle(F)))+r);break;}this.fire(S,{value:b});},_setAriaText:function(L){this.get(m).setAttrs({"aria-valuenow":L,"aria-valuetext":D.Lang.substitute(this.get(j),{value:L,minValue:this.get(a),maxValue:this.get(A)})});}});var q=[{},{}];c._barSizeFunctions=q;q[0][i]=function(s,L,Y,b){Y.setStyle(F,L+r);this.fire(S,{value:s});this.fire(k,{value:s});};q[0][H]=function(s,L,Y,b){Y.setStyle(F,L+r);Y.setStyle("left",(this._barSpace-L)+r);this.fire(S,{value:s});this.fire(k,{value:s});};q[0][C]=function(s,L,Y,b){Y.setStyle(d,L+r);this.fire(S,{value:s});this.fire(k,{value:s});};q[0][o]=function(s,L,Y,b){Y.setStyle(d,L+r);Y.setStyle("top",(this._barSpace-L)+r);this.fire(S,{value:s});this.fire(k,{value:s});};q[1][i]=function(s,L,Y,b){Y.addClass(V);if(s!==this._previousValue){this._tweenFactor=(s-this._previousValue)/b.get("duration")/1000;}else{this._tweenFactor=0;}b.set("to",{width:L});b.run();};q[1][H]=q[1][i];q[1][C]=function(s,L,Y,b){Y.addClass(V);if(s!==this._previousValue){this._tweenFactor=(s-this._previousValue)/b.get("duration")/1000;}else{this._tweenFactor=0;}b.set("to",{height:L});b.run();
};q[1][o]=q[1][C];D.ProgressBar=c;},"@VERSION@",{requires:["widget","substitute"]});