YUI.add("treeview",function(C){var N="treenode",O="contentBox",W="boundingBox",K="expanded",M="focused",J="content",V=C.ClassNameManager.getClassName,F="toggle",D="leaf",E="plus",R="minus",U="first",L="middle",S="last",H="children",T=V(N,H),A='<ul class ="'+T+'"></ul>',Q="toggle",P="expand",G="collapse";C.TreeNode=C.Base.create(N,C.Widget,[C.WidgetParent,C.WidgetChild],{_lastToggleClass:"",BOUNDING_TEMPLATE:"<li></li>",ROOT_TYPE:C.TreeView,renderUI:function(){var X=C.Node.create(A);this._childrenContainer=X;this.get(W).appendChild(X);this.get(O).setContent(this.get(J));},_contentSetter:function(X){if(C.Lang.isNull(X)){return null;}if(X instanceof C.Node){return X;}if(X.nodeType&&X.nodeType==1){return C.get(X);}if(C.Lang.isString(X)){return X;}return C.Attribute.INVALID_VALUE;},bindUI:function(){this.publish(P,{defaultFn:this._defExpandFn,emitFacade:true});this.publish(G,{defaultFn:this._defCollapseFn,emitFacade:true});this.publish(Q,{defaultFn:this._defToggleFn,emitFacade:true});},syncUI:function(){var X=V(N,F,(this.next()?(this.previous()?L:U):S),(this.isEmpty()?D:(this.get(K)?R:E)));this.get(W).replaceClass(this._lastToggleClass,X);this._lastToggleClass=X;},toggle:function(){if(!this.isEmpty()){this.fire(Q,{node:this});}},_defToggleFn:function(X){if(X.node!==this){return;}if(this.get(K)){this.collapse();}else{this.expand();}X.stopPropagation();},expand:function(){if(this.get(K)){return;}this.fire(P,{node:this});},_defExpandFn:function(X){if(X.node!==this){return;}this.set(K,true);this.syncUI();},collapse:function(){if(!this.get(K)){return;}this.fire(G,{node:this});},_defCollapseFn:function(X){if(X.node!==this){return;}this.set(K,false);this.syncUI();},_onDocFocus:function(Y){var X=this.get(W).contains(Y.target);this._focusTaken=X;this.some(function(Z){if(Z._focusTaken){X=false;return true;}},this);this._hasDOMFocus=X;console.log("focus",this.get(J),this.get(W).contains(Y.target),X,this._focusTaken);this._set(M,X,{src:C.Widget.UI_SRC});}},{ATTRS:{expanded:{value:false},content:{value:null,setter:"_contentSetter"},defaultChildType:{value:"TreeNode"},tabIndex:{value:-1}},HTML_PARSER:{boundingBox:function(X){return X;},content:function(Y){if(Y.hasChildNodes()){var Z=Y.get("firstChild");var X=Z.get("nodeName").toUpperCase();if(X=="UL"||X=="OL"){return"";}if(Z.get("nodeType")==3){return C.Lang.trim(Z.get("textContent"))||undefined;}return Z;}},children:function(Y){this._childrenContainer=Y.one("ul");var X=[];Y.all(">ul>li, >ol>li").each(function(Z){X.push(new C.TreeNode({srcNode:Z}));});return X;},yuiconfig:function(X){return X.getAttribute("yuiconfig");},expanded:function(X){return X.hasClass("expanded");}}});var I="treeview";var B={BACK_SPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,PLUS:43,MINUS:45};C.TreeView=C.Base.create(I,C.Widget,[C.WidgetParent],{CONTENT_TEMPLATE:'<ul class="'+T+"></ul>",bindUI:function(){var X=this.get(W);this.after("treenode:click",this._afterNodeClick);C.on("key",this._onKey,X,"press:"+[B.UP,B.DOWN,B.LEFT,B.RIGHT,B.ENTER,B.PLUS,B.MINUS,B.HOME,B.END].join(","),this);C.on("key",this._onShiftedKey,X,"press:"+[B.PLUS,B.MINUS].join(",")+"+shift",this);},_afterNodeClick:function(Y){var X=Y.target,Z=Y.domEvent.target;if(X.get(W)===Z){Y.halt();X.toggle();}},_onKey:function(X){switch(X.keyCode){case B.UP:break;case B.DOWN:break;case B.LEFT:break;case B.RIGHT:break;case B.ENTER:break;case B.PLUS:break;case B.MINUS:break;case B.HOME:break;case B.END:break;}},_onShiftedKey:function(X){switch(X.keyCode){case B.PLUS:break;case B.MINUS:break;}},getNodeByElement:function(X){},_afterCurrentFocusChange:function(X){if(X.node!==X.newVal){return;}(X.prevVal&&X.prevVal.blur());(X.newVal&&C.Lang.isUndefined(X.node)&&X.newVal.focus());}},{ATTRS:{defaultChildType:{value:"TreeNode"}},HTML_PARSER:{boundingBox:function(X){return X;},contentBox:">ul",children:function(Y){this._childrenContainer=Y.one("ul");var X=[];Y.all(">ul>li, >ol>li").each(function(Z){X.push(new C.TreeNode({srcNode:Z}));});return X;}}});},"@VERSION@",{requires:["widget","widget-child","widget-parent","substitute","selector-css3"]});