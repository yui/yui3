YUI.add("dd-drop",function(a,j){var b="node",g=a.DD.DDM,f="offsetHeight",c="offsetWidth",i="drop:over",h="drop:enter",d="drop:exit",e=function(){this._lazyAddAttrs=false;e.superclass.constructor.apply(this,arguments);a.on("domready",a.bind(function(){a.later(100,this,this._createShim);},this));g._regTarget(this);};e.NAME="drop";e.ATTRS={node:{setter:function(k){var l=a.one(k);if(!l){a.error("DD.Drop: Invalid Node Given: "+k);}return l;}},groups:{value:["default"],getter:function(){if(!this._groups){this._groups={};}var k=[];a.each(this._groups,function(m,l){k[k.length]=l;});return k;},setter:function(k){this._groups={};a.each(k,function(m,l){this._groups[m]=true;},this);return k;}},padding:{value:"0",setter:function(k){return g.cssSizestoObject(k);}},lock:{value:false,setter:function(k){if(k){this.get(b).addClass(g.CSS_PREFIX+"-drop-locked");}else{this.get(b).removeClass(g.CSS_PREFIX+"-drop-locked");}return k;}},bubbles:{setter:function(k){this.addTarget(k);return k;}},useShim:{value:true,setter:function(k){a.DD.DDM._noShim=!k;return k;}}};a.extend(e,a.Base,{_bubbleTargets:a.DD.DDM,addToGroup:function(k){this._groups[k]=true;return this;},removeFromGroup:function(k){delete this._groups[k];return this;},_createEvents:function(){var k=[i,h,d,"drop:hit"];a.each(k,function(m,l){this.publish(m,{type:m,emitFacade:true,preventable:false,bubbles:true,queuable:false,prefix:"drop"});},this);},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(k){this._valid=false;var l=false;a.each(k,function(n,m){if(this._groups[n]){l=true;this._valid=true;}},this);return l;},initializer:function(k){a.later(100,this,this._createEvents);var l=this.get(b),m;if(!l.get("id")){m=a.stamp(l);l.set("id",m);}l.addClass(g.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"));},destructor:function(){g._unregTarget(this);if(this.shim&&(this.shim!==this.get(b))){this.shim.detachAll();this.shim.remove();this.shim=null;}this.get(b).removeClass(g.CSS_PREFIX+"-drop");this.detachAll();},_deactivateShim:function(){if(!this.shim){return false;}this.get(b).removeClass(g.CSS_PREFIX+"-drop-active-valid");this.get(b).removeClass(g.CSS_PREFIX+"-drop-active-invalid");this.get(b).removeClass(g.CSS_PREFIX+"-drop-over");if(this.get("useShim")){this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"});}this.overTarget=false;},_activateShim:function(){if(!g.activeDrag){return false;}if(this.get(b)===g.activeDrag.get(b)){return false;}if(this.get("lock")){return false;}var k=this.get(b);if(this.inGroup(g.activeDrag.get("groups"))){k.removeClass(g.CSS_PREFIX+"-drop-active-invalid");k.addClass(g.CSS_PREFIX+"-drop-active-valid");g._addValid(this);this.overTarget=false;if(!this.get("useShim")){this.shim=this.get(b);}this.sizeShim();}else{g._removeValid(this);k.removeClass(g.CSS_PREFIX+"-drop-active-valid");k.addClass(g.CSS_PREFIX+"-drop-active-invalid");}},sizeShim:function(){if(!g.activeDrag){return false;}if(this.get(b)===g.activeDrag.get(b)){return false;}if(this.get("lock")){return false;}if(!this.shim){a.later(100,this,this.sizeShim);return false;}var q=this.get(b),n=q.get(f),l=q.get(c),s=q.getXY(),r=this.get("padding"),k,o,m;l=l+r.left+r.right;n=n+r.top+r.bottom;s[0]=s[0]-r.left;s[1]=s[1]-r.top;if(g.activeDrag.get("dragMode")===g.INTERSECT){k=g.activeDrag;o=k.get(b).get(f);m=k.get(b).get(c);n=(n+o);l=(l+m);s[0]=s[0]-(m-k.deltaXY[0]);s[1]=s[1]-(o-k.deltaXY[1]);}if(this.get("useShim")){this.shim.setStyles({height:n+"px",width:l+"px",top:s[1]+"px",left:s[0]+"px"});}this.region={"0":s[0],"1":s[1],area:0,top:s[1],right:s[0]+l,bottom:s[1]+n,left:s[0]};},_createShim:function(){if(!g._pg){a.later(10,this,this._createShim);return;}if(this.shim){return;}var k=this.get("node");if(this.get("useShim")){k=a.Node.create('<div id="'+this.get(b).get("id")+'_shim"></div>');k.setStyles({height:this.get(b).get(f)+"px",width:this.get(b).get(c)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});g._pg.appendChild(k);k.on("mouseover",a.bind(this._handleOverEvent,this));k.on("mouseout",a.bind(this._handleOutEvent,this));}this.shim=k;},_handleTargetOver:function(){if(g.isOverTarget(this)){this.get(b).addClass(g.CSS_PREFIX+"-drop-over");g.activeDrop=this;g.otherDrops[this]=this;if(this.overTarget){g.activeDrag.fire("drag:over",{drop:this,drag:g.activeDrag});this.fire(i,{drop:this,drag:g.activeDrag});}else{if(g.activeDrag.get("dragging")){this.overTarget=true;this.fire(h,{drop:this,drag:g.activeDrag});g.activeDrag.fire("drag:enter",{drop:this,drag:g.activeDrag});g.activeDrag.get(b).addClass(g.CSS_PREFIX+"-drag-over");}}}else{this._handleOut();}},_handleOverEvent:function(){this.shim.setStyle("zIndex","999");g._addActiveShim(this);},_handleOutEvent:function(){this.shim.setStyle("zIndex","1");g._removeActiveShim(this);},_handleOut:function(k){if(!g.isOverTarget(this)||k){if(this.overTarget){this.overTarget=false;if(!k){g._removeActiveShim(this);}if(g.activeDrag){this.get(b).removeClass(g.CSS_PREFIX+"-drop-over");g.activeDrag.get(b).removeClass(g.CSS_PREFIX+"-drag-over");this.fire(d,{drop:this,drag:g.activeDrag});g.activeDrag.fire("drag:exit",{drop:this,drag:g.activeDrag});delete g.otherDrops[this];}}}}});a.DD.Drop=e;},"@VERSION@",{"requires":["dd-drag","dd-ddm-drop"]});