YUI.add("widget-parent",function(C){var B=C.Lang;function A(){}A.ATTRS={defaultItemType:{validator:B.isString},activeItem:{readOnly:true},multiple:{value:false,validator:B.isBoolean,writeOnce:true},selection:{readOnly:true,setter:function(D){return this._setSelection(D);}},items:{readOnly:true,valueFn:function(){return[];}}};A.prototype={_afterSelectionChange:function(E){var F=E.prevVal,D=E.newVal;if(D){if(B.isArray(D)){if(D.length===this.get("items").length){this.set("selected",1,{src:this});}else{this.set("selected",2,{src:this});}}else{if(F){F.set("selected",0,{src:this});}}}},_afterParentSelectedChange:function(E){var F=E.newVal,D=this.get("items");if(E.src!=this&&this==E.target&&D.length>0&&(F===0||F===1)){C.each(D,function(G){G.set("selected",F);});}},_setSelection:function(F){var E=null,D=this.get("items");if(this.get("root").get("multiple")&&D.length>0){E=[];C.each(D,function(G){if(G.get("selected")>0){E.push(G);}});}else{if(F.get("selected")>0){E=F;}}return E;},_afterItemSelectedChange:function(D){if(D.src!=this){this._set("selection",D.target);}},_afterItemFocusedChange:function(D){var E=null;if(D.newVal===true){E=D.target;}this._set("activeItem",E);},_createItem:function(E){var F,G,D;if(E.type){G=E.type;delete E[G];}else{G=this.get("defaultItemType");}D=C[G];if(D){F=new D(E);}return F;},_defItemAdded:function(G){var F=G.item,E=G.index,D=this.get("items");if(F.get("parent")){F.remove();}if(B.isNumber(E)){D.splice(E,0,F);}else{D.push(F);}this._set("items",D);F._set("parent",this);F.addTarget(this);if(F.get("selected")){this._set("selection",F);}F.after("selectedChange",C.bind(this._afterItemSelectedChange,this));F.after("focusedChange",C.bind(this._afterItemFocusedChange,this));},_defItemRemoved:function(G){var F=G.item,E=G.index,D=this.get("items");if(F.get("focused")){F.set("focused",false);}if(F.get("selected")){F.set("selected",0);}D.splice(E,1);this._set("items",D);F.removeTarget(this);F._set("parent",null);},add:function(G,E){var D,I,F,H=false;if(B.isArray(G)){D=[];C.each(G,function(J){I=this.add(J);if(I){D.push(I);}},this);if(D.length>0){F=D;}}else{if(G instanceof C.Widget){I=G;}else{I=this._createItem(G);}H=this.fire("itemAdded",{item:I,index:E});F=H?I:null;}return F;},remove:function(E){var D=this.get("items"),F,G=false;if(B.isNumber(E)){F=D[E];if(F){G=this.fire("itemRemoved",{item:F,index:E});}}return G?F:null;},removeAll:function(){var D=this.get("items"),E=[],F;C.each(D,function(H,G){F=this.remove(G);if(F){E.push();}});return(E.length>0?E:null);},item:function(E){var D=this.get("items");return D?D[E]:null;},_renderUIParent:function(){var D=this.get("contentBox");C.each(this.get("items"),function(E){E.render(D);});},initializer:function(D){this.publish("itemAdded",{defaultFn:this._defItemAdded});this.publish("itemRemoved",{defaultFn:this._defItemRemoved});if(D&&D.items){this.add(D.items);}C.after(this._renderUIParent,this,"renderUI");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",this._afterParentSelectedChange);}};C.WidgetParent=A;},"@VERSION@",{requires:["widget"]});