YUI.add("event-delegate",function(B){var I=B.Event,F=B.Lang,E={},A={mouseenter:"mouseover",mouseleave:"mouseout"},H=function(K){try{if(K&&3==K.nodeType){return K.parentNode;}}catch(J){}return K;},D=function(K,P,M){var Q=H((P.target||P.srcElement)),N=E[K],T,O,L,S,R;var J=function(X,U,V){var W;if(!X||X===V){W=false;}else{W=B.Selector.test(X,U)?X:J(X.parentNode,U,V);}return W;};for(T in N){if(N.hasOwnProperty(T)){O=N[T];S=N.fn;L=null;if(B.Selector.test(Q,T,M)){L=Q;}else{if(B.Selector.test(Q,((T.replace(/,/gi," *,"))+" *"),M)){L=J(Q,T,M);}}if(L){if(!R){R=new B.DOMEventFacade(P,M);R.container=R.currentTarget;}R.currentTarget=B.Node.get(L);B.publish(O,{contextFn:function(){return R.currentTarget;}});if(S){S(P,L,O);}else{B.fire(O,R);}}}}},G=function(M,L,K){var O={focus:I._attachFocus,blur:I._attachBlur},N=O[M],J=[M,function(P){D(L,(P||window.event),K);},K];if(N){return N(J,{capture:true,facade:false});}else{return I._attach(J,{facade:false});}},C=B.cached(function(J){return J.replace(/[|,:]/g,"~");});B.Env.evt.plugins.delegate={on:function(O,N,M,J,K){var L=B.Array(arguments,0,true);L.splice(3,1);L[0]=J;return B.delegate.apply(B,L);}};I.delegate=function(Q,T,K,W){if(!W){return false;}var N=B.Array(arguments,0,true),M=K,V;if(F.isString(K)){M=B.Selector.query(K);if(M.length===0){return I.onAvailable(K,function(){I.delegate.apply(I,N);},I,true,false);}}if(I._isValidCollection(M)){V=[];B.each(M,function(Y,X){N[2]=Y;V.push(I.delegate.apply(I,N));});return(V.length===1)?V[0]:V;}M=B.Node.getDOMNode(K);var R=B.stamp(M),L="delegate:"+R+Q+C(W),J=Q+R,P=E[J],S,U,O;if(!P){P={};if(A[Q]){if(!I._fireMouseEnter){return false;}Q=A[Q];P.fn=I._fireMouseEnter;}S=G(Q,J,M);B.after(function(X){if(S.sub==X){delete E[J];B.detachAll(L);}},S.evt,"_delete");P.handle=S;E[J]=P;}O=P.listeners;P.listeners=O?(O+1):1;P[W]=L;N[0]=L;N.splice(2,2);U=B.on.apply(B,N);B.after(function(){P.listeners=(P.listeners-1);if(P.listeners===0){P.handle.detach();}},U,"detach");return U;};B.delegate=I.delegate;},"@VERSION@",{requires:["node-base"]});