YUI.add("datatype-date-advanced-format",function(e,t){function n(e,t,n,r){e=typeof e=="string"?e:String(e);if(e.length>=t)return e;n=n||"0";var i=[];for(var s=e.length;s<t;s++)i.push(n);return i[r?"unshift":"push"](e),i.join("")}function i(e){return e>0?Math.floor(e):Math.ceil(e)}function n(e,t,n,r){e=typeof e=="string"?e:String(e);if(e.length>=t)return e;n=n||"0";var i=[];for(var s=e.length;s<t;s++)i.push(n);return i[r?"unshift":"push"](e),i.join("")}function s(e){var t=new RegExp(/P(\d+Y)?(\d+M)?(\d+D)?T(\d+H)?(\d+M)?(\d+(\.\d+)?S)/),n=e.match(t);if(n==null)throw new YDurationFormat.IllegalArgumentsException("xmlDurationFormat should be in the format: 'PnYnMnDTnHnMnS'");return{hours:parseInt(n[4]||-1),minutes:parseInt(n[5]||-1),seconds:parseFloat(n[6]||-1)}}function o(e){var t={};if(e<0)throw new YDurationFormat.IllegalArgumentsException("TimeValue cannot be negative");return t.hours=i(e/3600),e%=3600,t.minutes=i(e/60),e%=60,t.seconds=e,t}Format=function(e,t){if(arguments.length==0)return;this._pattern=e,this._segments=[],this.Formats=t},Format.prototype._pattern=null,Format.prototype._segments=null,e.mix(Format,{Exception:function(e,t){this.name=e,this.message=t,this.toString=function(){return this.name+": "+this.message}},ParsingException:function(e){Format.ParsingException.superclass.constructor.call(this,"ParsingException",e)},IllegalArgumentsException:function(e){Format.IllegalArgumentsException.superclass.constructor.call(this,"IllegalArgumentsException",e)},FormatException:function(e){Format.FormatException.superclass.constructor.call(this,"FormatException",e)}}),e.extend(Format.ParsingException,Format.Exception),e.extend(Format.IllegalArgumentsException,Format.Exception),e.extend(Format.FormatException,Format.Exception),Format.prototype.format=function(e){var t=[];for(var n=0;n<this._segments.length;n++)t.push(this._segments[n].format(e));return t.join("")},Format.prototype.parse=function(e,t){var n=this._createParseObject(),r=t||0;for(var i=0;i<this._segments.length;i++){var s=this._segments[i];r=s.parse(n,e,r)}if(r<e.length)throw new Format.ParsingException("Input too long");return n},Format.prototype._createParseObject=function(e){throw new Format.ParsingException("Not implemented")},Format.Segment=function(e,t){if(arguments.length==0)return;this._parent=e,this._s=t},Format.Segment.prototype.format=function(e){return this._s},Format.Segment.prototype.parse=function(e,t,n){throw new Format.ParsingException("Not implemented")},Format.Segment.prototype.getFormat=function(){return this._parent},Format.Segment._parseLiteral=function(e,t,n){if(t.length-n<e.length)throw new Format.ParsingException("Input too short");for(var r=0;r<e.length;r++)if(e.charAt(r)!=t.charAt(n+r))throw new Format.ParsingException("Input doesn't match");return n+e.length},Format.Segment._parseInt=function(e,t,n,r,i,s,o){var u=s||r.length-i,a=i;for(var f=0;f<u;f++)if(!r.charAt(i++).match(/\d/)){i--;break}var l=i;if(a==l)throw new Format.ParsingException("Number not present");if(s&&l-a!=s)throw new Format.ParsingException("Number too short");var c=parseInt(r.substring(a,l),o||10);if(t){var h=e||window;typeof t=="function"?t.call(h,c+n):h[t]=c+n}return l},Format.TextSegment=function(e,t){if(arguments.length==0)return;Format.TextSegment.superclass.constructor.call(this,e,t)},e.extend(Format.TextSegment,Format.Segment),Format.TextSegment.prototype.toString=function(){return'text: "'+this._s+'"'},Format.TextSegment.prototype.parse=function(e,t,n){return Format.Segment._parseLiteral(this._s,t,n)},String.prototype.trim==null&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});var r="datatype-date-advanced-format";ShortNames={weekdayMonShort:"M",weekdayTueShort:"T",weekdayWedShort:"W",weekdayThuShort:"T",weekdayFriShort:"F",weekdaySatShort:"S",weekdaySunShort:"S",monthJanShort:"J",monthFebShort:"F",monthMarShort:"M",monthAprShort:"A",monthMayShort:"M",monthJunShort:"J",monthJulShort:"J",monthAugShort:"A",monthSepShort:"S",monthOctShort:"O",monthNovShort:"N",monthDecShort:"D"},DateFormat=function(t,n,r){if(arguments.length==0)return;DateFormat.superclass.constructor.call(this,t,n),this.timeZone=new e.Date.Timezone(r);if(t==null)return;var i,s,o;for(var u=0;u<t.length;u++){var a=t.charAt(u);if(a=="'"){i=u+1;for(u++;u<t.length;u++){a=t.charAt(u);if(a=="'"){if(!(u+1<t.length&&t.charAt(u+1)=="'"))break;t=t.substr(0,u)+t.substr(u+1)}}if(u==t.length)throw new Format.FormatException("unterminated string literal");s=u,o=new Format.TextSegment(this,t.substring(i,s)),this._segments.push(o);continue}i=u;while(u<t.length){a=t.charAt(u);if(DateFormat._META_CHARS.indexOf(a)!=-1||a=="'")break;u++}s=u;if(i!=s){o=new Format.TextSegment(this,t.substring(i,s)),this._segments.push(o),u--;continue}i=u;while(++u<t.length)if(t.charAt(u)!=a)break;s=u--;var f=s-i,l=t.substr(i,f);o=null;switch(a){case"G":o=new DateFormat.EraSegment(this,l);break;case"y":o=new DateFormat.YearSegment(this,l);break;case"M":o=new DateFormat.MonthSegment(this,l);break;case"w":case"W":o=new DateFormat.WeekSegment(this,l);break;case"D":case"d":o=new DateFormat.DaySegment(this,l);break;case"F":case"E":o=new DateFormat.WeekdaySegment(this,l);break;case"a":o=new DateFormat.AmPmSegment(this,l);break;case"H":case"k":case"K":case"h":o=new DateFormat.HourSegment(this,l);break;case"m":o=new DateFormat.MinuteSegment(this,l);break;case"s":case"S":o=new DateFormat.SecondSegment(this,l);break;case"z":case"Z":o=new DateFormat.TimezoneSegment(this,l)}o!=null&&(o._index=this._segments.length,this._segments.push(o))}},e.extend(DateFormat,Format),DateFormat.SHORT=0,DateFormat.MEDIUM=1,DateFormat.LONG=2,DateFormat.DEFAULT=DateFormat.MEDIUM,DateFormat._META_CHARS="GyMwWDdFEaHkKhmsSzZ",DateFormat.prototype.format=function(e,t){var n=!1;t!=null&&t!=""&&(n=!0);var r=[],i=!1;for(var s=0;s<this._segments.length;s++){if(this._segments[s].toString().indexOf('text: "<datePattern>"')==0){n&&r.push(t),i=!0;continue}if(this._segments[s].toString().indexOf('text: "</datePattern>"')==0){i=!1;continue}(!i||!n)&&r.push(this._segments[s].format(e))}return r.join("")},DateFormat.DateSegment=function(e,t){if(arguments.length==0)return;DateFormat.DateSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.DateSegment,Format.Segment),DateFormat.EraSegment=function(e,t){if(arguments.length==0)return;DateFormat.EraSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.EraSegment,DateFormat.DateSegment),DateFormat.EraSegment.prototype.format=function(e){return this.getFormat().AD},DateFormat.YearSegment=function(e,t){if(arguments.length==0)return;DateFormat.YearSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.YearSegment,DateFormat.DateSegment),DateFormat.YearSegment.prototype.toString=function(){return'dateYear: "'+this._s+'"'},DateFormat.YearSegment.prototype.format=function(e){var t=String(e.getFullYear());return this._s.length!=1&&this._s.length<4?t.substr(t.length-2):n(t,this._s.length)},DateFormat.MonthSegment=function(e,t){if(arguments.length==0)return;DateFormat.MonthSegment.superclass.constructor.call(this,e,t),this.initialize()},e.extend(DateFormat.MonthSegment,DateFormat.DateSegment),DateFormat.MonthSegment.prototype.toString=function(){return'dateMonth: "'+this._s+'"'},DateFormat.MonthSegment.prototype.initialize=function(){DateFormat.MonthSegment.MONTHS={},DateFormat.MonthSegment.MONTHS[DateFormat.SHORT]=[ShortNames.monthJanShort,ShortNames.monthFebShort,ShortNames.monthMarShort,ShortNames.monthAprShort,ShortNames.monthMayShort,ShortNames.monthJunShort,ShortNames.monthJulShort,ShortNames.monthAugShort,ShortNames.monthSepShort,ShortNames.monthOctShort,ShortNames.monthNovShort,ShortNames.monthDecShort],DateFormat.MonthSegment.MONTHS[DateFormat.MEDIUM]=[this.getFormat().Formats.monthJanMedium,this.getFormat().Formats.monthFebMedium,this.getFormat().Formats.monthMarMedium,this.getFormat().Formats.monthAprMedium,this.getFormat().Formats.monthMayMedium,this.getFormat().Formats.monthJunMedium,this.getFormat().Formats.monthJulMedium,this.getFormat().Formats.monthAugMedium,this.getFormat().Formats.monthSepMedium,this.getFormat().Formats.monthOctMedium,this.getFormat().Formats.monthNovMedium,this.getFormat().Formats.monthDecMedium],DateFormat.MonthSegment.MONTHS[DateFormat.LONG]=[this.getFormat().Formats.monthJanLong,this.getFormat().Formats.monthFebLong,this.getFormat().Formats.monthMarLong,this.getFormat().Formats.monthAprLong,this.getFormat().Formats.monthMayLong,this.getFormat().Formats.monthJunLong,this.getFormat().Formats.monthJulLong,this.getFormat().Formats.monthAugLong,this.getFormat().Formats.monthSepLong,this.getFormat().Formats.monthOctLong,this.getFormat().Formats.monthNovLong,this.getFormat().Formats.monthDecLong]},DateFormat.MonthSegment.prototype.format=function(e){var t=e.getMonth();switch(this._s.length){case 1:return String(t+1);case 2:return n(t+1,2);case 3:return DateFormat.MonthSegment.MONTHS[DateFormat.MEDIUM][t];case 5:return DateFormat.MonthSegment.MONTHS[DateFormat.SHORT][t]}return DateFormat.MonthSegment.MONTHS[DateFormat.LONG][t]},DateFormat.WeekSegment=function(e,t){if(arguments.length==0)return;DateFormat.WeekSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.WeekSegment,DateFormat.DateSegment),DateFormat.WeekSegment.prototype.format=function(e){var t=e.getYear(),r=e.getMonth(),i=e.getDate(),s=/w/.test(this._s),o=new Date(t,s?0:r,1),u=0;for(;;){u++;if(o.getMonth()>r||o.getMonth()==r&&o.getDate()>=i)break;o.setDate(o.getDate()+7)}return n(u,this._s.length)},DateFormat.DaySegment=function(e,t){if(arguments.length==0)return;DateFormat.DaySegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.DaySegment,DateFormat.DateSegment),DateFormat.DaySegment.prototype.format=function(e){var t=e.getMonth(),r=e.getDate();if(/D/.test(this._s)&&t>0){var i=e.getYear();do{var s=new Date(i,t,1);s.setDate(0),r+=s.getDate(),t--}while(t>0)}return n(r,this._s.length)},DateFormat.WeekdaySegment=function(e,t){if(arguments.length==0)return;DateFormat.WeekdaySegment.superclass.constructor.call(this,e,t),this.initialize()},e.extend(DateFormat.WeekdaySegment,DateFormat.DateSegment),DateFormat.DaySegment.prototype.toString=function(){return'dateDay: "'+this._s+'"'},DateFormat.WeekdaySegment.prototype.initialize=function(){DateFormat.WeekdaySegment.WEEKDAYS={},DateFormat.WeekdaySegment.WEEKDAYS[DateFormat.SHORT]=[ShortNames.weekdaySunShort,ShortNames.weekdayMonShort,ShortNames.weekdayTueShort,ShortNames.weekdayWedShort,ShortNames.weekdayThuShort,ShortNames.weekdayFriShort,ShortNames.weekdaySatShort],DateFormat.WeekdaySegment.WEEKDAYS[DateFormat.MEDIUM]=[this.getFormat().Formats.weekdaySunMedium,this.getFormat().Formats.weekdayMonMedium,this.getFormat().Formats.weekdayTueMedium,this.getFormat().Formats.weekdayWedMedium,this.getFormat().Formats.weekdayThuMedium,this.getFormat().Formats.weekdayFriMedium,this.getFormat().Formats.weekdaySatMedium],DateFormat.WeekdaySegment.WEEKDAYS[DateFormat.LONG]=[this.getFormat().Formats.weekdaySunLong,this.getFormat().Formats.weekdayMonLong,this.getFormat().Formats.weekdayTueLong,this.getFormat().Formats.weekdayWedLong,this.getFormat().Formats.weekdayThuLong,this.getFormat().Formats.weekdayFriLong,this.getFormat().Formats.weekdaySatLong]},DateFormat.WeekdaySegment.prototype.format=function(e){var t=e.getDay();if(/E/.test(this._s)){var r;switch(this._s.length){case 4:r=DateFormat.LONG;break;case 5:r=DateFormat.SHORT;break;default:r=DateFormat.MEDIUM}return DateFormat.WeekdaySegment.WEEKDAYS[r][t]}return n(t,this._s.length)},DateFormat.TimeSegment=function(e,t){if(arguments.length==0)return;DateFormat.TimeSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.TimeSegment,Format.Segment),DateFormat.HourSegment=function(e,t){if(arguments.length==0)return;DateFormat.HourSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.HourSegment,DateFormat.TimeSegment),DateFormat.HourSegment.prototype.toString=function(){return'timeHour: "'+this._s+'"'},DateFormat.HourSegment.prototype.format=function(e){var t=e.getHours();return t>12&&/[hK]/.test(this._s)?t-=12:t==0&&/[h]/.test(this._s)&&(t=12),n(t,this._s.length)},DateFormat.MinuteSegment=function(e,t){if(arguments.length==0)return;DateFormat.MinuteSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.MinuteSegment,DateFormat.TimeSegment),DateFormat.MinuteSegment.prototype.toString=function(){return'timeMinute: "'+this._s+'"'},DateFormat.MinuteSegment.prototype.format=function(e){var t=e.getMinutes();return n(t,this._s.length)},DateFormat.SecondSegment=function(e,t){if(arguments.length==0)return;DateFormat.SecondSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.SecondSegment,DateFormat.TimeSegment),DateFormat.SecondSegment.prototype.format=function(e){var t=/s/.test(this._s)?e.getSeconds():e.getMilliseconds();return n(t,this._s.length)},DateFormat.AmPmSegment=function(e,t){if(arguments.length==0)return;DateFormat.AmPmSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.AmPmSegment,DateFormat.TimeSegment),DateFormat.AmPmSegment.prototype.toString=function(){return'timeAmPm: "'+this._s+'"'},DateFormat.AmPmSegment.prototype.format=function(e){var t=e.getHours();return t<12?this.getFormat().Formats.periodAm:this.getFormat().Formats.periodPm},DateFormat.TimezoneSegment=function(e,t){if(arguments.length==0)return;DateFormat.TimezoneSegment.superclass.constructor.call(this,e,t)},e.extend(DateFormat.TimezoneSegment,DateFormat.TimeSegment),DateFormat.TimezoneSegment.prototype.toString=function(){return'timeTimezone: "'+this._s+'"'},DateFormat.TimezoneSegment.prototype.format=function(e){return/Z/.test(this._s)?this.getFormat().timeZone.getShortName():this._s.length<4?this.getFormat().timeZone.getMediumName():this.getFormat().timeZone.getLongName()},BuddhistDateFormat=function(e,t,n,r){if(arguments.length==0)return;BuddhistDateFormat.superclass.constructor.call(this,e,t,n,r);var i=this._segments;for(var s=0;s<i.length;s++)i[s]instanceof DateFormat.YearSegment?i[s]=new BuddhistDateFormat.YearSegment(i[s]):i[s]instanceof DateFormat.EraSegment&&(i[s]=new BuddhistDateFormat.EraSegment(i[s]))},e.extend(BuddhistDateFormat,DateFormat),BuddhistDateFormat.YearSegment=function(e){if(arguments.length==0)return;BuddhistDateFormat.YearSegment.superclass.constructor.call(this,e._parent,e._s)},e.extend(BuddhistDateFormat.YearSegment,DateFormat.YearSegment),BuddhistDateFormat.YearSegment.prototype.format=function(e){var t=e.getFullYear();return t=String(t+543),this._s.length!=1&&this._s.length<4?t.substr(t.length-2):n(t,this._s.length)},BuddhistDateFormat.EraSegment=function(e){if(arguments.length==0)return;BuddhistDateFormat.EraSegment.superclass.constructor.call(this,e._parent,e._s)},e.extend(BuddhistDateFormat.EraSegment,DateFormat.EraSegment),BuddhistDateFormat.EraSegment.prototype.format=function(e){return"BE"},YDateFormat=function(t,n,i,s){t==null&&(t="Etc/GMT"),this._Formats=e.Intl.get(r);if(!e.Date.Timezone.isValidTimezoneId(t))throw new e.Date.Timezone.UnknownTimeZoneException("Could not find timezone: "+t);this._timeZone=t,this._timeZoneInstance=new e.Date.Timezone(this._timeZone),this._dateFormat=n,this._timeFormat=i,this._timeZoneFormat=s,this._relative=!1,this._pattern=this._generatePattern();var o=e.Intl.getLang(r);o.match(/^th/)&&!o.match(/u-ca-gregory/)?this._dateFormatInstance=new BuddhistDateFormat(this._pattern,this._Formats,this._timeZone):this._dateFormatInstance=new DateFormat(this._pattern,this._Formats,this._timeZone)},e.mix(e.Date,{DATE_FORMATS:{NONE:0,WYMD_LONG:1,WYMD_ABBREVIATED:4,WYMD_SHORT:8,WMD_LONG:16,WMD_ABBREVIATED:32,WMD_SHORT:64,YMD_LONG:128,YMD_ABBREVIATED:256,YMD_SHORT:512,YM_LONG:1024,MD_LONG:2048,MD_ABBREVIATED:4096,MD_SHORT:8192,W_LONG:16384,W_ABBREVIATED:32768,M_LONG:65536,M_ABBREVIATED:131072,YMD_FULL:262144,RELATIVE_DATE:524288},TIME_FORMATS:{NONE:0,HM_ABBREVIATED:1,HM_SHORT:2,H_ABBREVIATED:4},TIMEZONE_FORMATS:{NONE:0,Z_ABBREVIATED:1,Z_SHORT:2},availableLanguages:function(){return e.Intl.getAvailableLangs(r)}}),YDateFormat.prototype._generateDatePattern=function(){var t=this._dateFormat;t&&e.Lang.isString(t)&&(t=e.Date.DATE_FORMATS[t]);if(t==null)return"";t&e.Date.DATE_FORMATS.RELATIVE_DATE&&(this._relative=!0,t^=e.Date.DATE_FORMATS.RELATIVE_DATE);switch(t){case e.Date.DATE_FORMATS.NONE:return this._relative=!1,"";case e.Date.DATE_FORMATS.WYMD_LONG:return this._Formats.WYMD_long;case e.Date.DATE_FORMATS.WYMD_ABBREVIATED:return this._Formats.WYMD_abbreviated;case e.Date.DATE_FORMATS.WYMD_SHORT:return this._Formats.WYMD_short;case e.Date.DATE_FORMATS.WMD_LONG:return this._Formats.WMD_long;case e.Date.DATE_FORMATS.WMD_ABBREVIATED:return this._Formats.WMD_abbreviated;case e.Date.DATE_FORMATS.WMD_SHORT:return this._Formats.WMD_short;case e.Date.DATE_FORMATS.YMD_LONG:return this._Formats.YMD_long;case e.Date.DATE_FORMATS.YMD_ABBREVIATED:return this._Formats.YMD_abbreviated;case e.Date.DATE_FORMATS.YMD_SHORT:return this._Formats.YMD_short;case e.Date.DATE_FORMATS.YM_LONG:return this._relative=!1,this._Formats.YM_long;case e.Date.DATE_FORMATS.MD_LONG:return this._Formats.MD_long;case e.Date.DATE_FORMATS.MD_ABBREVIATED:return this._Formats.MD_abbreviated;case e.Date.DATE_FORMATS.MD_SHORT:return this._Formats.MD_short;case e.Date.DATE_FORMATS.W_LONG:return this._relative=!1,this._Formats.W_long;case e.Date.DATE_FORMATS.W_ABBREVIATED:return this._relative=!1,this._Formats.W_abbreviated;case e.Date.DATE_FORMATS.M_LONG:return this._relative=!1,this._Formats.M_long;case e.Date.DATE_FORMATS.M_ABBREVIATED:return this._relative=!1,this._Formats.M_abbreviated;case e.Date.DATE_FORMATS.YMD_FULL:return this._Formats.YMD_full;default:throw new Format.IllegalArgumentsException("Date format given does not exist")}},YDateFormat.prototype._generateTimePattern=function(){var t=this._timeFormat;t&&e.Lang.isString(t)&&(t=e.Date.TIME_FORMATS[t]);if(t==null)return"";switch(t){case e.Date.TIME_FORMATS.NONE:return"";case e.Date.TIME_FORMATS.HM_ABBREVIATED:return this._Formats.HM_abbreviated;case e.Date.TIME_FORMATS.HM_SHORT:return this._Formats.HM_short;case e.Date.TIME_FORMATS.H_ABBREVIATED:return this._Formats.H_abbreviated;default:throw new Format.IllegalArgumentsException("Time format given does not exist")}},YDateFormat.prototype._generateTimeZonePattern=function(){var t=this._timeZoneFormat;t&&e.Lang.isString(t)&&(t=e.Date.TIMEZONE_FORMATS[t]);if(t==null)return"";switch(t){case e.Date.TIMEZONE_FORMATS.NONE:return"";case e.Date.TIMEZONE_FORMATS.Z_ABBREVIATED:return"z";case e.Date.TIMEZONE_FORMATS.Z_SHORT:return"Z";default:throw new Format.IllegalArgumentsException("Time Zone format given does not exist")}},YDateFormat.prototype._generatePattern=function(){var e=this._generateDatePattern(),t=this._generateTimePattern(),n=this._generateTimeZonePattern();e!=""&&(e="'<datePattern>'"+e+"'</datePattern>'");var r="";return t!=""&&n!=""?r=this._Formats.DateTimeTimezoneCombination:t!=""?r=this._Formats.DateTimeCombination:n!=""?r=this._Formats.DateTimezoneCombination:e!=""&&(r="{1}"),r=r.replace("{0}",t).replace("{1}",e).replace("{2}",n),r=r.replace(/\s\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),r},YDateFormat.prototype.format=function(t){if(t==null||!e.Lang.isDate(t))throw new Format.IllegalArgumentsException("format called without a date.");var n=this._timeZoneInstance.getRawOffset()*1e3;t=new Date(t.getTime()+t.getTimezoneOffset()*60*1e3+n);var r=null;if(this._relative){var i=new Date,s=new Date(i.getTime()+864e5),o=new Date(i.getTime()-864e5);t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()&&(r=this._Formats.today),t.getFullYear()==s.getFullYear()&&t.getMonth()==s.getMonth()&&t.getDate()==s.getDate()&&(r=this._Formats.tomorrow),t.getFullYear()==o.getFullYear()&&t.getMonth()==o.getMonth()&&t.getDate()==o.getDate()&&(r=this._Formats.yesterday)}return this._dateFormatInstance.format(t,r)};var r="datatype-date-advanced-format";YRelativeTimeFormat=function(t){t&&e.Lang.isString(t)&&(t=e.Date.RELATIVE_TIME_FORMATS[t]),t==null&&(t=e.Date.RELATIVE_TIME_FORMATS.ONE_UNIT_LONG),this.patterns=e.Intl.get(r),this.style=t;switch(t){case e.Date.RELATIVE_TIME_FORMATS.ONE_OR_TWO_UNITS_ABBREVIATED:this.numUnits=2,this.abbr=!0;break;case e.Date.RELATIVE_TIME_FORMATS.ONE_OR_TWO_UNITS_LONG:this.numUnits=2,this.abbr=!1;break;case e.Date.RELATIVE_TIME_FORMATS.ONE_UNIT_ABBREVIATED:this.numUnits=1,this.abbr=!0;break;case e.Date.RELATIVE_TIME_FORMATS.ONE_UNIT_LONG:this.numUnits=1,this.abbr=!1;break;default:throw new Format.IllegalArgumentsException("Unknown style: Use a style from Y.Date.RELATIVE_TIME_FORMATS")}},e.mix(e.Date,{currentDate:function(){return new Date},RELATIVE_TIME_FORMATS:{ONE_OR_TWO_UNITS_ABBREVIATED:0,ONE_OR_TWO_UNITS_LONG:1,ONE_UNIT_ABBREVIATED:2,ONE_UNIT_LONG:4}}),YRelativeTimeFormat.prototype.format=function(e,t){if(t==null){t=(new Date).getTime()/1e3;if(e>t)throw new Format.IllegalArgumentsException("timeValue must be in the past")}else if(e>t)throw new Format.IllegalArgumentsException("relativeTo must be greater than or equal to timeValue");var n=new Date((t-e)*1e3),r=[],i=this.numUnits,s=n.getUTCFullYear()-1970,o;s>0&&(this.abbr?(o=s+" "+(s!=1?this.patterns.years_abbr:this.patterns.year_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.years:this.patterns.year),r.push(o)),i--),s=n.getUTCMonth(),i>0&&(i<this.numUnits||s>0)&&(this.abbr?(o=s+" "+(s!=1?this.patterns.months_abbr:this.patterns.month_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.months:this.patterns.month),r.push(o)),i--),s=n.getUTCDate()-1,i>0&&(i<this.numUnits||s>0)&&(this.abbr?(o=s+" "+(s!=1?this.patterns.days_abbr:this.patterns.day_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.days:this.patterns.day),r.push(o)),i--),s=n.getUTCHours(),i>0&&(i<this.numUnits||s>0)&&(this.abbr?(o=s+" "+(s!=1?this.patterns.hours_abbr:this.patterns.hour_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.hours:this.patterns.hour),r.push(o)),i--),s=n.getUTCMinutes(),i>0&&(i<this.numUnits||s>0)&&(this.abbr?(o=s+" "+(s!=1?this.patterns.minutes_abbr:this.patterns.minute_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.minutes:this.patterns.minute),r.push(o)),i--),s=n.getUTCSeconds();if(r.length==0||i>0&&(i<this.numUnits||s>0))this.abbr?(o=s+" "+(s!=1?this.patterns.seconds_abbr:this.patterns.second_abbr),r.push(o)):(o=s+" "+(s!=1?this.patterns.seconds:this.patterns.second),r.push(o)),i--;var u=r.length==1?this.patterns["RelativeTime/oneUnit"]:this.patterns["RelativeTime/twoUnits"];for(var a=0;a<r.length;a++)u=u.replace("{"+a+"}",r[a]);for(a=r.length;a<this.numUnits;a++)u=u.replace("{"+a+"}","");return u=u.replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),u};var r="datatype-date-advanced-format";YDurationFormat=function(t){t&&e.Lang.isString(t)&&(t=e.Date.DURATION_FORMATS[t]),this.style=t,this.patterns=e.Intl.get(r)},e.mix(YDurationFormat,{IllegalArgumentsException:function(e){this.message=e,this.toString=function(){return"IllegalArgumentsException: "+this.message}}}),e.mix(e.Date,{DURATION_FORMATS:{HMS_LONG:0,HMS_SHORT:1}}),String.prototype.trim==null&&(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),YDurationFormat.prototype.format=function(){var t={};if(arguments.length==1){if(arguments[0]==null)throw new YDurationFormat.IllegalArgumentsException("Argument is null");isNaN(arguments[0])?t=s(arguments[0].trim()):t=o(arguments[0])}else{if(arguments.length!=3)throw new YDurationFormat.IllegalArgumentsException("Unexpected number of arguments");if(arguments[2]==null||arguments[1]==null||arguments[0]==null)throw new YDurationFormat.IllegalArgumentsException("One or more arguments are null/undefined");if(isNaN(arguments[2])||isNaN(arguments[1])||isNaN(arguments[0]))throw new YDurationFormat.IllegalArgumentsException("One or more arguments are not numeric");t={hours:parseInt(arguments[0]),minutes:parseInt(arguments[1]),seconds:parseInt(arguments[2])}}if(t.minutes>59||t.seconds>59)throw new YDurationFormat.IllegalArgumentsException("Minutes and Seconds should be less than 60");var r="";return this.style==e.Date.DURATION_FORMATS.HMS_LONG?(r=this.patterns.HMS_long,t.hours<0?t.hours="":t.hours=e.Number.format(t.hours)+" "+(t.hours==1?this.patterns.hour:this.patterns.hours),t.minutes<0?t.minutes="":t.minutes=t.minutes+" "+(t.minutes==1?this.patterns.minute:this.patterns.minutes),t.seconds<0?t.seconds="":t.seconds=t.seconds+" "+(t.seconds==1?this.patterns.second:this.patterns.seconds)):(r=this.patterns.HMS_short,t.hours=e.Number.format(t.hours<0?0:t.hours),t.minutes=t.minutes<0?"00":n(t.minutes,2),t.seconds=t.seconds<0?"00":n(t.seconds,2)),r=r.replace("{0}",t.hours),r=r.replace("{1}",t.minutes),r=r.replace("{2}",t.seconds),r=r.replace(/\s\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),r},e.Date.deprecatedFormat=e.Date.format,e.Date.format=function(t,n){n=n||{};if(n.format&&e.Lang.isString(n.format))return e.Date.deprecatedFormat(t,n);if(!e.Lang.isDate(t))return e.Lang.isValue(t)?t:"";var r;if(n.dateFormat||n.timeFormat||n.timezoneFormat)return r=new YDateFormat(n.timezone,n.dateFormat,n.timeFormat,n.timezoneFormat),r.format(t);var i=typeof e.Date.currentDate=="function"?e.Date.currentDate():e.Date.currentDate;if(n.relativeTimeFormat)return r=new YRelativeTimeFormat(n.relativeTimeFormat,i),r.format(t.getTime()/1e3,e.Date.currentDate.getTime()/1e3);throw new Format.FormatException("Unrecognized format options.")},e.Date.formatDuration=function(t,n){n=n||{},t==null&&(t={});if(e.Lang.isNumber(t)||e.Lang.isString(t))return(new YDurationFormat(n.style)).format(t);if(t.hours!=null||t.minutes!=null||t.seconds!=null)return t.hours==null&&(t.hours=-1),t.minutes==null&&(t.minutes=-1),t.seconds==null&&(t.seconds=-1),(new YDurationFormat(n.style)).format(t.hours||-1,t.minutes||-1,t.seconds||-1);throw new Format.IllegalArgumentsException("Unrecognized duration values")}},"@VERSION@",{lang:["af-NA","af","af-ZA","am-ET","am","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-TN","ar","ar-YE","as-IN","as","az-AZ","az-Cyrl-AZ","az-Cyrl","az-Latn-AZ","az-Latn","az","be-BY","be","bg-BG","bg","bn-BD","bn-IN","bn","bo-CN","bo-IN","bo","ca-ES","ca","cs-CZ","cs","cy-GB","cy","da-DK","da","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","de","el-CY","el-GR","el","en-AU","en-BE","en-BW","en-BZ","en-CA","en-GB","en-HK","en-IE","en-IN","en-JM","en-JO","en-MH","en-MT","en-MY","en-NA","en-NZ","en-PH","en-PK","en-RH","en-SG","en-TT","en","en-US-POSIX","en-US","en-VI","en-ZA","en-ZW","eo","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-ES","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-PY","es-SV","es","es-US","es-UY","es-VE","et-EE","et","eu-ES","eu","fa-AF","fa-IR","fa","fi-FI","fi","fil-PH","fil","fo-FO","fo","fr-BE","fr-CA","fr-CH","fr-FR","fr-LU","fr-MC","fr-SN","fr","ga-IE","ga","gl-ES","gl","gsw-CH","gsw","gu-IN","gu","gv-GB","gv","ha-GH","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","ha-Latn","ha-NE","ha-NG","ha","haw","haw-US","he-IL","he","hi-IN","hi","hr-HR","hr","hu-HU","hu","hy-AM-REVISED","hy-AM","hy","id-ID","id","ii-CN","ii","in-ID","in","is-IS","is","it-CH","it-IT","it","iw-IL","iw","ja-JP-TRADITIONAL","ja-JP","ja","ka-GE","ka","kk-Cyrl-KZ","kk-Cyrl","kk-KZ","kk","kl-GL","kl","km-KH","km","kn-IN","kn","kok-IN","kok","ko-KR","ko","kw-GB","kw","lt-LT","lt","lv-LV","lv","mk-MK","mk","ml-IN","ml","mr-IN","mr","ms-BN","ms-MY","ms","mt-MT","mt","nb-NO","nb","ne-IN","ne-NP","ne","nl-BE","nl-NL","nl","nn-NO","nn","no-NO-NY","no-NO","no","om-ET","om-KE","om","or-IN","or","pa-Arab-PK","pa-Arab","pa-Guru-IN","pa-Guru","pa-IN","pa-PK","pa","pl-PL","pl","ps-AF","ps","pt-BR","pt-PT","pt","ro-MD","ro-RO","ro","ru-RU","ru","ru-UA","sh-BA","sh-CS","sh","sh-YU","si-LK","si","sk-SK","sk","sl-SI","sl","so-DJ","so-ET","so-KE","so-SO","so","sq-AL","sq","sr-BA","sr-CS","sr-Cyrl-BA","sr-Cyrl-CS","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl","sr-Cyrl-YU","sr-Latn-BA","sr-Latn-CS","sr-Latn-ME","sr-Latn-RS","sr-Latn","sr-Latn-YU","sr-ME","sr-RS","sr","sr-YU","sv-FI","sv-SE","sv","sw-KE","sw","sw-TZ","ta-IN","ta","te-IN","te","th-TH-TRADITIONAL","th-TH","th","ti-ER","ti-ET","ti","tl-PH","tl","tr-TR","tr","uk","uk-UA","ur-IN","ur-PK","ur","uz-AF","uz-Arab-AF","uz-Arab","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","uz","uz-UZ","vi","vi-VN","zh-CN","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hans","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zh-Hant","zh-HK","zh-MO","zh-SG","zh-TW","zh","zu","zu-ZA"],requires:["datatype-date-timezone","datatype-date-format","datatype-number-advanced-format"]});
