YUI.add("graphics-svg",function(b,h){var n="svg",m="shape",a=/[a-z][^a-z]*/ig,k=/[-]?[0-9]*[0-9|\.][0-9]*/g,p=b.Lang,l=b.AttributeLite,r,f,i,d,o,g,j,e=b.config.doc,c=b.ClassNameManager.getClassName;function q(){}q.prototype={_pathSymbolToMethod:{M:"moveTo",m:"relativeMoveTo",L:"lineTo",l:"relativeLineTo",C:"curveTo",c:"relativeCurveTo",Q:"quadraticCurveTo",q:"relativeQuadraticCurveTo",z:"closePath",Z:"closePath"},_currentX:0,_currentY:0,_type:"path",curveTo:function(){this._curveTo.apply(this,[b.Array(arguments),false]);},relativeCurveTo:function(){this._curveTo.apply(this,[b.Array(arguments),true]);},_curveTo:function(t,P){var E,L,Q,N,M,v,u,D,C,O,A,B,G,J=0,K,F,s,z=P?"c":"C",I=P?parseFloat(this._currentX):0,H=P?parseFloat(this._currentY):0;this._pathArray=this._pathArray||[];if(this._pathType!==z){this._pathType=z;s=[z];this._pathArray.push(s);}else{s=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!s){s=[];this._pathArray.push(s);}}F=this._pathArray.length-1;this._pathArray[F]=this._pathArray[F].concat(t);K=t.length-5;for(;J<K;J=J+6){N=parseFloat(t[J])+I;M=parseFloat(t[J+1])+H;v=parseFloat(t[J+2])+I;u=parseFloat(t[J+3])+H;D=parseFloat(t[J+4])+I;C=parseFloat(t[J+5])+H;O=Math.max(D,Math.max(N,v));B=Math.max(C,Math.max(M,u));A=Math.min(D,Math.min(N,v));G=Math.min(C,Math.min(M,u));E=Math.abs(O-A);L=Math.abs(B-G);Q=[[this._currentX,this._currentY],[N,M],[v,u],[D,C]];this._setCurveBoundingBox(Q,E,L);this._currentX=D;this._currentY=C;}},quadraticCurveTo:function(){this._quadraticCurveTo.apply(this,[b.Array(arguments),false]);},relativeQuadraticCurveTo:function(){this._quadraticCurveTo.apply(this,[b.Array(arguments),true]);},_quadraticCurveTo:function(t,N){var A,z,D,C,F,s,E,L,O,M,v,B,G,J=0,K,u=N?"q":"Q",I=N?parseFloat(this._currentX):0,H=N?parseFloat(this._currentY):0;if(this._pathType!==u){this._pathType=u;s=[u];this._pathArray.push(s);}else{s=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!s){s=[];this._pathArray.push(s);}}F=this._pathArray.length-1;this._pathArray[F]=this._pathArray[F].concat(t);K=t.length-3;for(;J<K;J=J+4){A=parseFloat(t[J])+I;z=parseFloat(t[J+1])+H;D=parseFloat(t[J+2])+I;C=parseFloat(t[J+3])+H;M=Math.max(D,A);B=Math.max(C,z);v=Math.min(D,A);G=Math.min(C,z);E=Math.abs(M-v);L=Math.abs(B-G);O=[[this._currentX,this._currentY],[A,z],[D,C]];this._setCurveBoundingBox(O,E,L);this._currentX=D;this._currentY=C;}},drawRect:function(s,v,t,u){this.moveTo(s,v);this.lineTo(s+t,v);this.lineTo(s+t,v+u);this.lineTo(s,v+u);this.lineTo(s,v);},drawRoundRect:function(s,A,t,v,u,z){this.moveTo(s,A+z);this.lineTo(s,A+v-z);this.quadraticCurveTo(s,A+v,s+u,A+v);this.lineTo(s+t-u,A+v);this.quadraticCurveTo(s+t,A+v,s+t,A+v-z);this.lineTo(s+t,A+z);this.quadraticCurveTo(s+t,A,s+t-u,A);this.lineTo(s+u,A);this.quadraticCurveTo(s,A,s,A+z);},drawCircle:function(t,v,s){var u=s*2;this._drawingComplete=false;this._trackSize(t,v);this._trackSize(t+u,v+u);this._pathArray=this._pathArray||[];this._pathArray.push(["M",t+s,v]);this._pathArray.push(["A",s,s,0,1,0,t+s,v+u]);this._pathArray.push(["A",s,s,0,1,0,t+s,v]);this._currentX=t;this._currentY=v;return this;},drawEllipse:function(u,A,v,z){var t=v*0.5,s=z*0.5;this._drawingComplete=false;this._trackSize(u,A);this._trackSize(u+v,A+z);this._pathArray=this._pathArray||[];this._pathArray.push(["M",u+t,A]);this._pathArray.push(["A",t,s,0,1,0,u+t,A+z]);this._pathArray.push(["A",t,s,0,1,0,u+t,A]);this._currentX=u;this._currentY=A;return this;},drawDiamond:function(t,z,w,s){var v=w*0.5,u=s*0.5;this.moveTo(t+v,z);this.lineTo(t+w,z+u);this.lineTo(t+v,z+s);this.lineTo(t,z+u);this.lineTo(t+v,z);return this;},drawWedge:function(F,C,K,B,v,w){var J,I,A,O,z,G,E,N,M,u,t,L=0,D=v*2,s,H;w=w||v;if(this._pathType!="M"){this._pathType="M";s=["M"];this._pathArray.push(s);}else{s=this._getCurrentArray();}H=this._pathArray.length-1;this._pathArray[H].push(F);this._pathArray[H].push(F);if(Math.abs(B)>360){B=360;}J=Math.ceil(Math.abs(B)/45);I=B/J;A=-(I/180)*Math.PI;O=(K/180)*Math.PI;if(J>0){G=F+Math.cos(K/180*Math.PI)*v;E=C+Math.sin(K/180*Math.PI)*w;this._pathType="L";H++;this._pathArray[H]=["L"];this._pathArray[H].push(Math.round(G));this._pathArray[H].push(Math.round(E));H++;this._pathType="Q";this._pathArray[H]=["Q"];for(;L<J;++L){O+=A;z=O-(A/2);N=F+Math.cos(O)*v;M=C+Math.sin(O)*w;u=F+Math.cos(z)*(v/Math.cos(A/2));t=C+Math.sin(z)*(w/Math.cos(A/2));this._pathArray[H].push(Math.round(u));this._pathArray[H].push(Math.round(t));this._pathArray[H].push(Math.round(N));this._pathArray[H].push(Math.round(M));}}this._currentX=F;this._currentY=C;this._trackSize(D,D);return this;},lineTo:function(){this._lineTo.apply(this,[b.Array(arguments),false]);},relativeLineTo:function(){this._lineTo.apply(this,[b.Array(arguments),true]);},_lineTo:function(C,t){var E=C[0],v,z,s,B,F,D,u=t?"l":"L",A=t?parseFloat(this._currentX):0,w=t?parseFloat(this._currentY):0;this._pathArray=this._pathArray||[];this._shapeType="path";z=C.length;if(this._pathType!==u){this._pathType=u;B=[u];this._pathArray.push(B);}else{B=this._getCurrentArray();}s=this._pathArray.length-1;if(typeof E==="string"||typeof E==="number"){for(v=0;v<z;v=v+2){F=parseFloat(C[v]);D=parseFloat(C[v+1]);this._pathArray[s].push(F);this._pathArray[s].push(D);F=F+A;D=D+w;this._currentX=F;this._currentY=D;this._trackSize.apply(this,[F,D]);}}else{for(v=0;v<z;++v){F=parseFloat(C[v][0]);D=parseFloat(C[v][1]);this._pathArray[s].push(F);this._pathArray[s].push(D);this._currentX=F;this._currentY=D;F=F+A;D=D+w;this._trackSize.apply(this,[F,D]);}}},moveTo:function(){this._moveTo.apply(this,[b.Array(arguments),false]);},relativeMoveTo:function(){this._moveTo.apply(this,[b.Array(arguments),true]);},_moveTo:function(A,t){var s,z,C=parseFloat(A[0]),B=parseFloat(A[1]),u=t?"m":"M",w=t?parseFloat(this._currentX):0,v=t?parseFloat(this._currentY):0;this._pathArray=this._pathArray||[];this._pathType=u;z=[u];this._pathArray.push(z);s=this._pathArray.length-1;this._pathArray[s]=this._pathArray[s].concat([C,B]);C=C+w;B=B+v;this._currentX=C;this._currentY=B;this._trackSize(C,B);
},end:function(){this._closePath();},clear:function(){this._currentX=0;this._currentY=0;this._width=0;this._height=0;this._left=0;this._right=0;this._top=0;this._bottom=0;this._pathArray=[];this._path="";},_closePath:function(){var t,x,s,A,u,z,y,D="",w=this.node,v=parseFloat(this._left),B=parseFloat(this._top),C=this.get("fill");if(this._pathArray){t=this._pathArray.concat();while(t&&t.length>0){x=t.shift();A=x.length;s=x[0];if(s==="A"){D+=s+x[1]+","+x[2];}else{if(s=="z"||s=="Z"){D+=" z ";}else{if(s=="C"||s=="c"){D+=s+(x[1]-v)+","+(x[2]-B);}else{D+=" "+s+parseFloat(x[1]-v);}}}switch(s){case"L":case"l":case"M":case"Q":case"q":for(y=2;y<A;++y){u=(y%2===0)?B:v;u=x[y]-u;D+=", "+parseFloat(u);}break;case"A":u=" "+parseFloat(x[3])+" "+parseFloat(x[4]);u+=","+parseFloat(x[5])+" "+parseFloat(x[6]-v);u+=","+parseFloat(x[7]-B);D+=" "+u;break;case"C":case"c":for(y=3;y<A-1;y=y+2){u=parseFloat(x[y]-v);u=u+", ";u=u+parseFloat(x[y+1]-B);D+=" "+u;}break;}}if(C&&C.color){D+="z";}b.Lang.trim(D);if(D){w.setAttribute("d",D);}this._path=D;this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}},closePath:function(){this._pathArray.push(["z"]);},_getCurrentArray:function(){var s=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!s){s=[];this._pathArray.push(s);}return s;},getBezierData:function(x,w){var y=x.length,v=[],u,s;for(u=0;u<y;++u){v[u]=[x[u][0],x[u][1]];}for(s=1;s<y;++s){for(u=0;u<y-s;++u){v[u][0]=(1-w)*v[u][0]+w*v[parseInt(u+1,10)][0];v[u][1]=(1-w)*v[u][1]+w*v[parseInt(u+1,10)][1];}}return[v[0][0],v[0][1]];},_setCurveBoundingBox:function(E,A,x){var v=0,u=this._currentX,B=u,z=this._currentY,s=z,y=Math.round(Math.sqrt((A*A)+(x*x))),C=1/y,D;for(;v<y;++v){D=this.getBezierData(E,C*v);u=isNaN(u)?D[0]:Math.min(D[0],u);B=isNaN(B)?D[0]:Math.max(D[0],B);z=isNaN(z)?D[1]:Math.min(D[1],z);s=isNaN(s)?D[1]:Math.max(D[1],s);}u=Math.round(u*10)/10;B=Math.round(B*10)/10;z=Math.round(z*10)/10;s=Math.round(s*10)/10;this._trackSize(B,s);this._trackSize(u,z);},_trackSize:function(s,t){if(s>this._right){this._right=s;}if(s<this._left){this._left=s;}if(t<this._top){this._top=t;}if(t>this._bottom){this._bottom=t;}this._width=this._right-this._left;this._height=this._bottom-this._top;}};b.SVGDrawing=q;f=function(s){this._transforms=[];this.matrix=new b.Matrix();this._normalizedMatrix=new b.Matrix();f.superclass.constructor.apply(this,arguments);};f.NAME="shape";b.extend(f,b.GraphicBase,b.mix({_x:0,_y:0,init:function(){this.initializer.apply(this,arguments);},initializer:function(s){var t=this,v=s.graphic,u=this.get("data");t.createNode();if(v){t._setGraphic(v);}if(u){t._parsePathData(u);}t._updateHandler();},_setGraphic:function(s){var t;if(s instanceof b.SVGGraphic){this._graphic=s;}else{s=b.one(s);t=new b.SVGGraphic({render:s});t._appendShape(this);this._graphic=t;}},addClass:function(s){var t=this.node;t.className.baseVal=p.trim([t.className.baseVal,s].join(" "));},removeClass:function(s){var t=this.node,u=t.className.baseVal;u=u.replace(new RegExp(s+" "),s).replace(new RegExp(s),"");t.className.baseVal=u;},getXY:function(){var v=this._graphic,t=v.getXY(),s=this._x,u=this._y;return[t[0]+s,t[1]+u];},setXY:function(t){var u=this._graphic,s=u.getXY();this._x=t[0]-s[0];this._y=t[1]-s[1];this.set("transform",this.get("transform"));},contains:function(s){return s===b.one(this.node);},compareTo:function(s){var t=this.node;return t===s;},test:function(s){return b.Selector.test(this.node,s);},_getDefaultFill:function(){return{type:"solid",opacity:1,cx:0.5,cy:0.5,fx:0.5,fy:0.5,r:0.5};},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1};},createNode:function(){var u=this,t=e.createElementNS("http://www.w3.org/2000/svg","svg:"+this._type),x=u.get("id"),s=u.name,w=u._camelCaseConcat,v=u.get("pointerEvents");u.node=t;u.addClass(c(m)+" "+c(w(n,m))+" "+c(s)+" "+c(w(n,s)));if(x){t.setAttribute("id",x);}if(v){t.setAttribute("pointer-events",v);}if(!u.get("visible")){b.one(t).setStyle("visibility","hidden");}},on:function(t,s){if(b.Node.DOM_EVENTS[t]){return b.one("#"+this.get("id")).on(t,s);}return b.on.apply(this,arguments);},_strokeChangeHandler:function(x){var v=this.node,w=this.get("stroke"),u,s,y,t;if(w&&w.weight&&w.weight>0){t=w.linejoin||"round";u=parseFloat(w.opacity);s=w.dashstyle||"none";y=p.isArray(s)?s.toString():s;w.color=w.color||"#000000";w.weight=w.weight||1;w.opacity=p.isNumber(u)?u:1;w.linecap=w.linecap||"butt";v.setAttribute("stroke-dasharray",y);v.setAttribute("stroke",w.color);v.setAttribute("stroke-linecap",w.linecap);v.setAttribute("stroke-width",w.weight);v.setAttribute("stroke-opacity",w.opacity);if(t=="round"||t=="bevel"){v.setAttribute("stroke-linejoin",t);}else{t=parseInt(t,10);if(p.isNumber(t)){v.setAttribute("stroke-miterlimit",Math.max(t,1));v.setAttribute("stroke-linejoin","miter");}}}else{v.setAttribute("stroke","none");}},_fillChangeHandler:function(w){var u=this.node,v=this.get("fill"),s,t;if(v){t=v.type;if(t=="linear"||t=="radial"){this._setGradientFill(v);u.setAttribute("fill","url(#grad"+this.get("id")+")");}else{if(!v.color){u.setAttribute("fill","none");}else{s=parseFloat(v.opacity);s=p.isNumber(s)?s:1;u.setAttribute("fill",v.color);u.setAttribute("fill-opacity",s);}}}else{u.setAttribute("fill","none");}},_setGradientFill:function(R){var D,A,P,L,u,I=p.isNumber,H=this._graphic,B=R.type,O=H.getGradientNode("grad"+this.get("id"),B),E=R.stops,F=this.get("width"),V=this.get("height"),N=R.rotation||0,C=Math.PI/180,K=parseFloat(parseFloat(Math.tan(N*C)).toFixed(8)),S,U,G,M,W="0%",T="100%",y="0%",t="0%",x=R.cx,s=R.cy,z=R.fx,v=R.fy,J=R.r,Q=[];if(B=="linear"){x=F/2;s=V/2;if(Math.abs(K)*F/2>=V/2){if(N<180){y=0;t=V;}else{y=V;t=0;}W=x-((s-y)/K);T=x-((s-t)/K);}else{if(N>90&&N<270){W=F;T=0;}else{W=0;T=F;}y=((K*(x-W))-s)*-1;t=((K*(x-T))-s)*-1;}W=Math.round(100*W/F);T=Math.round(100*T/F);y=Math.round(100*y/V);t=Math.round(100*t/V);W=I(W)?W:0;T=I(T)?T:100;y=I(y)?y:0;t=I(t)?t:0;O.setAttribute("spreadMethod","pad");O.setAttribute("width",F);O.setAttribute("height",V);
O.setAttribute("x1",W+"%");O.setAttribute("x2",T+"%");O.setAttribute("y1",y+"%");O.setAttribute("y2",t+"%");}else{O.setAttribute("cx",(x*100)+"%");O.setAttribute("cy",(s*100)+"%");O.setAttribute("fx",(z*100)+"%");O.setAttribute("fy",(v*100)+"%");O.setAttribute("r",(J*100)+"%");}U=E.length;G=0;for(S=0;S<U;++S){if(this._stops&&this._stops.length>0){L=this._stops.shift();u=false;}else{L=H._createGraphicNode("stop");u=true;}M=E[S];A=M.opacity;P=M.color;D=M.offset||S/(U-1);D=Math.round(D*100)+"%";A=I(A)?A:1;A=Math.max(0,Math.min(1,A));G=(S+1)/U;L.setAttribute("offset",D);L.setAttribute("stop-color",P);L.setAttribute("stop-opacity",A);if(u){O.appendChild(L);}Q.push(L);}while(this._stops&&this._stops.length>0){O.removeChild(this._stops.shift());}this._stops=Q;},_stops:null,set:function(){var s=this;l.prototype.set.apply(s,arguments);if(s.initialized){s._updateHandler();}},translate:function(s,t){this._addTransform("translate",arguments);},translateX:function(s){this._addTransform("translateX",arguments);},translateY:function(s){this._addTransform("translateY",arguments);},skew:function(s,t){this._addTransform("skew",arguments);},skewX:function(s){this._addTransform("skewX",arguments);},skewY:function(s){this._addTransform("skewY",arguments);},rotate:function(s){this._addTransform("rotate",arguments);},scale:function(s,t){this._addTransform("scale",arguments);},_addTransform:function(t,s){s=b.Array(s);this._transform=p.trim(this._transform+" "+t+"("+s.join(", ")+")");s.unshift(t);this._transforms.push(s);if(this.initialized){this._updateTransform();}},_updateTransform:function(){var C=this._type=="path",u=this.node,G,t,w,F,D,A,v,E=this.matrix,s=this._normalizedMatrix,z=0,B=this._transforms.length;if(C||(this._transforms&&this._transforms.length>0)){F=this._x;D=this._y;w=this.get("transformOrigin");A=F+(w[0]*this.get("width"));v=D+(w[1]*this.get("height"));if(C){if(!(this instanceof b.SVGPath)){A=this._left+(w[0]*this.get("width"));v=this._top+(w[1]*this.get("height"));}s.init({dx:F+this._left,dy:D+this._top});}s.translate(A,v);for(;z<B;++z){G=this._transforms[z].shift();if(G){s[G].apply(s,this._transforms[z]);E[G].apply(E,this._transforms[z]);}if(C){this._transforms[z].unshift(G);}}s.translate(-A,-v);t="matrix("+s.a+","+s.b+","+s.c+","+s.d+","+s.dx+","+s.dy+")";}this._graphic.addToRedrawQueue(this);if(t){u.setAttribute("transform",t);}if(!C){this._transforms=[];}},_draw:function(){var s=this.node;s.setAttribute("width",this.get("width"));s.setAttribute("height",this.get("height"));s.setAttribute("x",this._x);s.setAttribute("y",this._y);s.style.left=this._x+"px";s.style.top=this._y+"px";this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();},_updateHandler:function(s){this._draw();},_transform:"",getBounds:function(){var z=this._type,A=this.get("stroke"),u=this.get("width"),v=this.get("height"),t=z=="path"?0:this._x,B=z=="path"?0:this._y,s=0;if(z!="path"){if(A&&A.weight){s=A.weight;}u=(t+u+s)-(t-s);v=(B+v+s)-(B-s);t-=s;B-=s;}return this._normalizedMatrix.getContentRect(u,v,t,B);},toFront:function(){var s=this.get("graphic");if(s){s._toFront(this);}},toBack:function(){var s=this.get("graphic");if(s){s._toBack(this);}},_parsePathData:function(u){var s,w,y,A=b.Lang.trim(u.match(a)),v=0,x,z,t=this._pathSymbolToMethod;if(A){this.clear();x=A.length||0;for(;v<x;v=v+1){z=A[v];w=z.substr(0,1),y=z.substr(1).match(k);s=t[w];if(s){if(y){this[s].apply(this,y);}else{this[s].apply(this);}}}this.end();}},destroy:function(){var s=this.get("graphic");if(s){s.removeShape(this);}else{this._destroy();}},_destroy:function(){if(this.node){b.Event.purgeElement(this.node,true);if(this.node.parentNode){this.node.parentNode.removeChild(this.node);}this.node=null;}}},b.SVGDrawing.prototype));f.ATTRS={transformOrigin:{valueFn:function(){return[0.5,0.5];}},transform:{setter:function(s){this.matrix.init();this._normalizedMatrix.init();this._transforms=this.matrix.getTransformArray(s);this._transform=s;return s;},getter:function(){return this._transform;}},id:{valueFn:function(){return b.guid();},setter:function(t){var s=this.node;if(s){s.setAttribute("id",t);}return t;}},x:{getter:function(){return this._x;},setter:function(t){var s=this.get("transform");this._x=t;if(s){this.set("transform",s);}}},y:{getter:function(){return this._y;},setter:function(t){var s=this.get("transform");this._y=t;if(s){this.set("transform",s);}}},width:{value:0},height:{value:0},visible:{value:true,setter:function(t){var s=t?"visible":"hidden";if(this.node){this.node.style.visibility=s;}return t;}},fill:{valueFn:"_getDefaultFill",setter:function(u){var t,s=this.get("fill")||this._getDefaultFill();t=(u)?b.merge(s,u):null;if(t&&t.color){if(t.color===undefined||t.color=="none"){t.color=null;}}return t;}},stroke:{valueFn:"_getDefaultStroke",setter:function(u){var t=this.get("stroke")||this._getDefaultStroke(),s;if(u&&u.hasOwnProperty("weight")){s=parseInt(u.weight,10);if(!isNaN(s)){u.weight=s;}}return(u)?b.merge(t,u):null;}},pointerEvents:{valueFn:function(){var t="visiblePainted",s=this.node;if(s){s.setAttribute("pointer-events",t);}return t;},setter:function(t){var s=this.node;if(s){s.setAttribute("pointer-events",t);}return t;}},node:{readOnly:true,getter:function(){return this.node;}},data:{setter:function(s){if(this.get("node")){this._parsePathData(s);}return s;}},graphic:{readOnly:true,getter:function(){return this._graphic;}}};b.SVGShape=f;o=function(s){o.superclass.constructor.apply(this,arguments);};o.NAME="path";b.extend(o,b.SVGShape,{_left:0,_right:0,_top:0,_bottom:0,_type:"path",_path:""});o.ATTRS=b.merge(b.SVGShape.ATTRS,{path:{readOnly:true,getter:function(){return this._path;}},width:{getter:function(){var s=Math.max(this._right-this._left,0);return s;}},height:{getter:function(){return Math.max(this._bottom-this._top,0);}}});b.SVGPath=o;d=function(){d.superclass.constructor.apply(this,arguments);};d.NAME="rect";b.extend(d,b.SVGShape,{_type:"rect"});d.ATTRS=b.SVGShape.ATTRS;b.SVGRect=d;g=function(s){g.superclass.constructor.apply(this,arguments);
};g.NAME="ellipse";b.extend(g,f,{_type:"ellipse",_draw:function(){var s=this.node,D=this.get("width"),v=this.get("height"),C=this.get("x"),A=this.get("y"),B=D*0.5,z=v*0.5,u=C+B,t=A+z;s.setAttribute("rx",B);s.setAttribute("ry",z);s.setAttribute("cx",u);s.setAttribute("cy",t);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});g.ATTRS=b.merge(f.ATTRS,{xRadius:{setter:function(s){this.set("width",s*2);},getter:function(){var s=this.get("width");if(s){s*=0.5;}return s;}},yRadius:{setter:function(s){this.set("height",s*2);},getter:function(){var s=this.get("height");if(s){s*=0.5;}return s;}}});b.SVGEllipse=g;i=function(s){i.superclass.constructor.apply(this,arguments);};i.NAME="circle";b.extend(i,b.SVGShape,{_type:"circle",_draw:function(){var v=this.node,u=this.get("x"),z=this.get("y"),t=this.get("radius"),s=u+t,w=z+t;v.setAttribute("r",t);v.setAttribute("cx",s);v.setAttribute("cy",w);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});i.ATTRS=b.merge(b.SVGShape.ATTRS,{width:{setter:function(s){this.set("radius",s/2);return s;},getter:function(){return this.get("radius")*2;}},height:{setter:function(s){this.set("radius",s/2);return s;},getter:function(){return this.get("radius")*2;}},radius:{value:0}});b.SVGCircle=i;j=function(){j.superclass.constructor.apply(this,arguments);};j.NAME="svgPieSlice";b.extend(j,b.SVGShape,b.mix({_type:"path",_draw:function(w){var t=this.get("cx"),z=this.get("cy"),v=this.get("startAngle"),u=this.get("arc"),s=this.get("radius");this.clear();this.drawWedge(t,z,v,u,s);this.end();}},b.SVGDrawing.prototype));j.ATTRS=b.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},b.SVGShape.ATTRS);b.SVGPieSlice=j;r=function(s){r.superclass.constructor.apply(this,arguments);};r.NAME="svgGraphic";r.ATTRS={render:{},id:{valueFn:function(){return b.guid();},setter:function(t){var s=this._node;if(s){s.setAttribute("id",t);}return t;}},shapes:{readOnly:true,getter:function(){return this._shapes;}},contentBounds:{readOnly:true,getter:function(){return this._contentBounds;}},node:{readOnly:true,getter:function(){return this._node;}},width:{setter:function(s){if(this._node){this._node.style.width=s+"px";}return s;}},height:{setter:function(s){if(this._node){this._node.style.height=s+"px";}return s;}},autoSize:{value:false},preserveAspectRatio:{value:"xMidYMid"},resizeDown:{value:false},x:{getter:function(){return this._x;},setter:function(s){this._x=s;if(this._node){this._node.style.left=s+"px";}return s;}},y:{getter:function(){return this._y;},setter:function(s){this._y=s;if(this._node){this._node.style.top=s+"px";}return s;}},autoDraw:{value:true},visible:{value:true,setter:function(s){this._toggleVisible(s);return s;}},pointerEvents:{value:"none"}};b.extend(r,b.GraphicBase,{set:function(t,x){var w=this,s={autoDraw:true,autoSize:true,preserveAspectRatio:true,resizeDown:true},v,u=false;l.prototype.set.apply(w,arguments);if(w._state.autoDraw===true&&b.Object.size(this._shapes)>0){if(p.isString&&s[t]){u=true;}else{if(p.isObject(t)){for(v in s){if(s.hasOwnProperty(v)&&t[v]){u=true;break;}}}}}if(u){w._redraw();}},_x:0,_y:0,getXY:function(){var s=b.one(this._node),t;if(s){t=s.getXY();}return t;},initializer:function(){var t=this.get("render"),s=this.get("visible")?"visible":"hidden";this._shapes={};this._contentBounds={left:0,top:0,right:0,bottom:0};this._gradients={};this._node=e.createElement("div");this._node.style.position="absolute";this._node.style.left=this.get("x")+"px";this._node.style.top=this.get("y")+"px";this._node.style.visibility=s;this._contentNode=this._createGraphics();this._contentNode.style.visibility=s;this._contentNode.setAttribute("id",this.get("id"));this._node.appendChild(this._contentNode);if(t){this.render(t);}},render:function(v){var s=b.one(v),t=this.get("width")||parseInt(s.getComputedStyle("width"),10),u=this.get("height")||parseInt(s.getComputedStyle("height"),10);s=s||b.one(e.body);s.append(this._node);this.parentNode=s;this.set("width",t);this.set("height",u);return this;},destroy:function(){this.removeAllShapes();if(this._contentNode){this._removeChildren(this._contentNode);if(this._contentNode.parentNode){this._contentNode.parentNode.removeChild(this._contentNode);}this._contentNode=null;}if(this._node){this._removeChildren(this._node);b.one(this._node).remove(true);this._node=null;}},addShape:function(s){s.graphic=this;if(!this.get("visible")){s.visible=false;}var u=this._getShapeClass(s.type),t=new u(s);this._appendShape(t);return t;},_appendShape:function(t){var u=t.node,s=this._frag||this._contentNode;if(this.get("autoDraw")){s.appendChild(u);}else{this._getDocFrag().appendChild(u);}},removeShape:function(s){if(!(s instanceof f)){if(p.isString(s)){s=this._shapes[s];}}if(s&&s instanceof f){s._destroy();delete this._shapes[s.get("id")];}if(this.get("autoDraw")){this._redraw();}return s;},removeAllShapes:function(){var s=this._shapes,t;for(t in s){if(s.hasOwnProperty(t)){s[t]._destroy();}}this._shapes={};},_removeChildren:function(s){if(s.hasChildNodes()){var t;while(s.firstChild){t=s.firstChild;this._removeChildren(t);s.removeChild(t);}}},clear:function(){this.removeAllShapes();},_toggleVisible:function(v){var u,t=this._shapes,s=v?"visible":"hidden";if(t){for(u in t){if(t.hasOwnProperty(u)){t[u].set("visible",v);}}}if(this._contentNode){this._contentNode.style.visibility=s;}if(this._node){this._node.style.visibility=s;}},_getShapeClass:function(t){var s=this._shapeClass[t];if(s){return s;}return t;},_shapeClass:{circle:b.SVGCircle,rect:b.SVGRect,path:b.SVGPath,ellipse:b.SVGEllipse,pieslice:b.SVGPieSlice},getShapeById:function(t){var s=this._shapes[t];return s;},batch:function(t){var s=this.get("autoDraw");this.set("autoDraw",false);t();this.set("autoDraw",s);},_getDocFrag:function(){if(!this._frag){this._frag=e.createDocumentFragment();}return this._frag;},_redraw:function(){var y=this.get("autoSize"),v=this.get("preserveAspectRatio"),z=this.get("resizeDown")?this._getUpdatedContentBounds():this._contentBounds,x=z.left,E=z.right,C=z.top,s=z.bottom,t=E-x,F=s-C,B,u,A,D,w;
if(y){if(y=="sizeContentToGraphic"){w=b.one(this._node);B=parseFloat(w.getComputedStyle("width"));u=parseFloat(w.getComputedStyle("height"));A=D=0;this._contentNode.setAttribute("preserveAspectRatio",v);}else{B=t;u=F;A=x;D=C;this._state.width=t;this._state.height=F;if(this._node){this._node.style.width=t+"px";this._node.style.height=F+"px";}}}else{B=t;u=F;A=x;D=C;}if(this._contentNode){this._contentNode.style.left=A+"px";this._contentNode.style.top=D+"px";this._contentNode.setAttribute("width",B);this._contentNode.setAttribute("height",u);this._contentNode.style.width=B+"px";this._contentNode.style.height=u+"px";this._contentNode.setAttribute("viewBox",""+x+" "+C+" "+t+" "+F+"");}if(this._frag){if(this._contentNode){this._contentNode.appendChild(this._frag);}this._frag=null;}},addToRedrawQueue:function(s){var u,t;this._shapes[s.get("id")]=s;if(!this.get("resizeDown")){u=s.getBounds();t=this._contentBounds;t.left=t.left<u.left?t.left:u.left;t.top=t.top<u.top?t.top:u.top;t.right=t.right>u.right?t.right:u.right;t.bottom=t.bottom>u.bottom?t.bottom:u.bottom;t.width=t.right-t.left;t.height=t.bottom-t.top;this._contentBounds=t;}if(this.get("autoDraw")){this._redraw();}},_getUpdatedContentBounds:function(){var w,u,t,s=this._shapes,v={};for(u in s){if(s.hasOwnProperty(u)){t=s[u];w=t.getBounds();v.left=p.isNumber(v.left)?Math.min(v.left,w.left):w.left;v.top=p.isNumber(v.top)?Math.min(v.top,w.top):w.top;v.right=p.isNumber(v.right)?Math.max(v.right,w.right):w.right;v.bottom=p.isNumber(v.bottom)?Math.max(v.bottom,w.bottom):w.bottom;}}v.left=p.isNumber(v.left)?v.left:0;v.top=p.isNumber(v.top)?v.top:0;v.right=p.isNumber(v.right)?v.right:0;v.bottom=p.isNumber(v.bottom)?v.bottom:0;this._contentBounds=v;return v;},_createGraphics:function(){var s=this._createGraphicNode("svg"),t=this.get("pointerEvents");s.style.position="absolute";s.style.top="0px";s.style.left="0px";s.style.overflow="auto";s.setAttribute("overflow","auto");s.setAttribute("pointer-events",t);return s;},_createGraphicNode:function(u,s){var w=e.createElementNS("http://www.w3.org/2000/svg","svg:"+u),t=s||"none";if(u!=="defs"&&u!=="stop"&&u!=="linearGradient"&&u!="radialGradient"){w.setAttribute("pointer-events",t);}return w;},getGradientNode:function(u,v){var s=this._gradients,w,t=v+"Gradient";if(s.hasOwnProperty(u)&&s[u].tagName.indexOf(v)>-1){w=this._gradients[u];}else{w=this._createGraphicNode(t);if(!this._defs){this._defs=this._createGraphicNode("defs");this._contentNode.appendChild(this._defs);}this._defs.appendChild(w);u=u||"gradient"+Math.round(100000*Math.random());w.setAttribute("id",u);if(s.hasOwnProperty(u)){this._defs.removeChild(s[u]);}s[u]=w;}return w;},_toFront:function(t){var s=this._contentNode;if(t instanceof b.SVGShape){t=t.get("node");}if(s&&t){s.appendChild(t);}},_toBack:function(t){var s=this._contentNode,u;if(t instanceof b.SVGShape){t=t.get("node");}if(s&&t){u=s.firstChild;if(u){s.insertBefore(t,u);}else{s.appendChild(t);}}}});b.SVGGraphic=r;},"@VERSION@",{"requires":["graphics"]});