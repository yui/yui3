YUI.add("history-base",function(B){var H=B.Lang,E=B.Object,L=YUI.namespace("Env.History"),F=B.config.doc.documentMode,J=B.config.win,C={merge:true},I="change",A="add",G="replace";function D(){this._init.apply(this,arguments);}B.augment(D,B.EventTarget,null,null,{emitFacade:true,prefix:"history",preventable:false,queueable:true});if(!L._state){L._state={};}function K(M){return H.type(M)==="object";}D.NAME="historyBase";D.SRC_ADD=A;D.SRC_REPLACE=G;D.html5=!!(J.history&&J.history.pushState&&J.history.replaceState&&("onpopstate" in J||B.UA.gecko>=2));D.nativeHashChange="onhashchange" in J&&(!F||F>7);B.mix(D.prototype,{_init:function(N){var M=N&&N.initialState;this.publish(I,{broadcast:2,defaultFn:this._defChangeFn});if(K(M)){this.add(B.merge(L._state,M));}},add:function(){var M=B.Array(arguments,0,true);M.unshift(A);return this._change.apply(this,M);},addValue:function(N,P,M){var O={};O[N]=P;return this._change(A,O,M);},get:function(N){var O=L._state,M=K(O);if(N){return M&&E.owns(O,N)?O[N]:undefined;}else{return M?B.mix({},O,true):O;}},replace:function(){var M=B.Array(arguments,0,true);M.unshift(G);return this._change.apply(this,M);},replaceValue:function(N,P,M){var O={};O[N]=P;return this._change(G,O,M);},_change:function(O,N,M){M=M?B.merge(C,M):C;if(M.merge&&K(N)&&K(L._state)){N=B.merge(L._state,N);}this._resolveChanges(O,N,M);return this;},_fireEvents:function(O,N,M){this.fire(I,{_options:M,changed:N.changed,newVal:N.newState,prevVal:N.prevState,removed:N.removed,src:O});E.each(N.changed,function(Q,P){this._fireChangeEvent(O,P,Q);},this);E.each(N.removed,function(Q,P){this._fireRemoveEvent(O,P,Q);},this);},_fireChangeEvent:function(O,M,N){this.fire(M+"Change",{newVal:N.newVal,prevVal:N.prevVal,src:O});},_fireRemoveEvent:function(O,M,N){this.fire(M+"Remove",{prevVal:N,src:O});},_resolveChanges:function(S,Q,N){var R={},M,P=L._state,O={};if(!Q){Q={};}if(!N){N={};}if(K(Q)&&K(P)){E.each(Q,function(T,U){var V=P[U];if(T!==V){R[U]={newVal:T,prevVal:V};M=true;}},this);E.each(P,function(U,T){if(!E.owns(Q,T)||Q[T]===null){delete Q[T];O[T]=U;M=true;}},this);}else{M=Q!==P;}if(M){this._fireEvents(S,{changed:R,newState:Q,prevState:P,removed:O},N);}},_storeState:function(N,M){L._state=M||{};},_defChangeFn:function(M){this._storeState(M.src,M.newVal,M._options);}},true);B.HistoryBase=D;},"@VERSION@",{requires:["event-custom-complex"]});YUI.add("history-hash",function(A){var C=A.HistoryBase,G=A.Lang,F=A.Object,K=YUI.namespace("Env.HistoryHash"),B="hash",E,D,J,I=A.config.win,L=I.location;function H(){H.superclass.constructor.apply(this,arguments);}A.extend(H,C,{_init:function(M){M=M||{};M.initialState=M.initialState||H.parseHash();A.after("hashchange",A.bind(this._afterHashChange,this),I);H.superclass._init.call(this,M);},_storeState:function(O,N){var M=H.createHash(N);H.superclass._storeState.apply(this,arguments);if(H.getHash()!==M){H[O===C.SRC_REPLACE?"replaceHash":"setHash"](M);}},_afterHashChange:function(M){this._resolveChanges(B,H.parseHash(M.newHash),{});}},{NAME:"historyHash",SRC_HASH:B,hashPrefix:"",_REGEX_HASH:/([^\?#&]+)=([^&]+)/g,createHash:function(O){var M=H.encode,N=[];F.each(O,function(Q,P){if(G.isValue(Q)){N.push(M(P)+"="+M(Q));}});return N.join("&");},decode:function(M){return decodeURIComponent(M.replace(/\+/g," "));},encode:function(M){return encodeURIComponent(M).replace(/%20/g,"+");},getHash:(A.UA.gecko?function(){var N=/#(.*)$/.exec(L.href),O=N&&N[1]||"",M=H.hashPrefix;return M&&O.indexOf(M)===0?O.replace(M,""):O;}:function(){var N=L.hash.substr(1),M=H.hashPrefix;return M&&N.indexOf(M)===0?N.replace(M,""):N;}),getUrl:function(){return L.href;},parseHash:function(P){var M=H.decode,Q,T,R,N,O={},S=H.hashPrefix,U;P=G.isValue(P)?P:H.getHash();if(S){U=P.indexOf(S);if(U===0||(U===1&&P.charAt(0)==="#")){P=P.replace(S,"");}}R=P.match(H._REGEX_HASH)||[];for(Q=0,T=R.length;Q<T;++Q){N=R[Q].split("=");O[M(N[0])]=M(N[1]);}return O;},replaceHash:function(M){if(M.charAt(0)==="#"){M=M.substr(1);}L.replace("#"+(H.hashPrefix||"")+M);},setHash:function(M){if(M.charAt(0)==="#"){M=M.substr(1);}L.hash=(H.hashPrefix||"")+M;}});E=YUI.namespace("Env.HistoryHash._hashNotifiers");A.Event.define("hashchange",{on:function(O,M,N){if((O.compareTo(I)||O.compareTo(A.config.doc.body))&&!F.owns(E,N.key)){E[N.key]=N;}},detach:function(O,M,N){if(!N.hasSubs()){delete E[N.key];}}});D=H.getHash();J=H.getUrl();if(C.nativeHashChange){A.Event.attach("hashchange",function(O){var M=H.getHash(),N=H.getUrl();F.each(E,function(P){P.fire({oldHash:D,oldUrl:J,newHash:M,newUrl:N});});D=M;J=N;},I);}else{if(!K._hashPoll){if(A.UA.webkit&&!A.UA.chrome&&navigator.vendor.indexOf("Apple")!==-1){A.on("unload",function(){},I);}K._hashPoll=A.later(50,null,function(){var M=H.getHash(),N;if(D!==M){N=H.getUrl();F.each(E,function(O){O.fire({oldHash:D,oldUrl:J,newHash:M,newUrl:N});});D=M;J=N;}},null,true);}}A.HistoryHash=H;if(!A.History&&(!C.html5||!A.HistoryHTML5)){A.History=H;}},"@VERSION@",{requires:["event-synthetic","history-base","yui-later"]});YUI.add("history-hash-ie",function(G){if(G.UA.ie&&!G.HistoryBase.nativeHashChange){var C=G.Do,D=YUI.namespace("Env.HistoryHash"),B=G.HistoryHash,E=D._iframe,F=G.config.win,A=F.location;B.getHash=function(){return E?E.contentWindow.location.hash.substr(1):A.hash.substr(1);};B.getUrl=function(){var H=B.getHash();if(H&&H!==A.hash.substr(1)){return A.href.replace(/#.*$/,"")+"#"+H;}else{return A.href;}};B._updateIframe=function(I,H){var J=E.contentWindow.document,K=J.location;J.open().close();if(H){K.replace(I.charAt(0)==="#"?I:"#"+I);}else{K.hash=I;}};C.after(B._updateIframe,B,"replaceHash",B,true);C.after(B._updateIframe,B,"setHash");if(!E){G.on("domready",function(){E=D._iframe=G.Node.getDOMNode(G.Node.create('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"/>'));G.config.doc.documentElement.appendChild(E);B._updateIframe(A.hash.substr(1));});G.on("hashchange",function(H){if(A.hash.substr(1)!==H.newHash){A.hash=H.newHash;}},F);}}},"@VERSION@",{requires:["history-base","history-hash","node-base"]});
YUI.add("history-html5",function(F){var B=F.HistoryBase,E=F.config.doc,D=F.config.win,G="popstate",C=B.SRC_REPLACE;function A(){A.superclass.constructor.apply(this,arguments);}F.extend(A,B,{_init:function(){F.on("popstate",this._onPopState,D,this);A.superclass._init.apply(this,arguments);},_storeState:function(J,I,H){if(J!==G){D.history[J===C?"replaceState":"pushState"](I,H.title||E.title||"",H.url||null);}A.superclass._storeState.apply(this,arguments);},_onPopState:function(H){this._resolveChanges(G,H._event.state||{});}},{NAME:"historyhtml5",SRC_POPSTATE:G});if(!F.Node.DOM_EVENTS.popstate){F.Node.DOM_EVENTS.popstate=1;}F.HistoryHTML5=A;if(!F.History&&B.html5){F.History=A;}},"@VERSION@",{requires:["event-base","history-base","node-base"]});YUI.add("history",function(A){},"@VERSION@",{use:["history-base","history-hash","history-hash-ie","history-html5"]});