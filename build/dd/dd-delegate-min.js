YUI.add("dd-delegate",function(F){var E=function(D){E.superclass.constructor.apply(this,arguments);},C="cont",B="nodes",A=F.Node.create("<div>Temp Node</div>");E.NAME="delegate";E.ATTRS={cont:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:""},lastNode:{value:A},currentNode:{value:A},dragNode:{value:A},over:{value:false},target:{value:false},dragConfig:{value:null},handles:{value:null}};F.extend(E,F.Base,{dd:null,_shimState:null,_handleNodeChange:function(D){this.set("dragNode",D.newVal);},_handleDragEnd:function(G){var D=this;F.DD.DDM._noShim=D._shimState;D.set("lastNode",D.dd.get("node"));D.get("lastNode").removeClass(F.DD.DDM.CSS_PREFIX+"-dragging");D.dd._unprep();D.dd.set("node",A);},_handleDelegate:function(I){var G=I.currentTarget,H=this,D=H.dd;if(G.test(H.get(B))&&!G.test(H.get("invalid"))){H._shimState=F.DD.DDM._noShim;F.DD.DDM._noShim=true;H.set("currentNode",G);D.set("node",G);if(D.proxy){D.set("dragNode",F.DD.DDM._proxy);}else{D.set("dragNode",G);}D._prep();D.fire.call(D,"drag:mouseDown",{ev:I});}},_handleMouseEnter:function(D){this._shimState=F.DD.DDM._noShim;F.DD.DDM._noShim=true;},_handleMouseLeave:function(D){F.DD.DDM._noShim=this._shimState;},initializer:function(){var H=this.get("dragConfig")||{},G=this,D=G.get(C);H.node=A.cloneNode(true);H.bubbles=G;if(G.get("handles")){H.handles=G.get("handles");}G.dd=new F.DD.Drag(H);G.addTarget(F.DD.DDM);G.dd.after("drag:end",F.bind(G._handleDragEnd,G));G.dd.on("dragNodeChange",F.bind(G._handleNodeChange,G));F.delegate("mousedown",F.bind(G._handleDelegate,G),D,G.get(B));F.on("mouseenter",F.bind(G._handleMouseEnter,G),D);F.on("mouseleave",F.bind(G._handleMouseLeave,G),D);G.syncTargets();F.DD.DDM.regDelegate(G);},syncTargets:function(I){if(!F.Plugin.Drop){return;}var H,D,G=this;if(G.get("target")){H=F.one(G.get(C)).all(G.get(B));D=G.dd.get("groups");if(I){D=[I];}H.each(function(J){G.createDrop(J,D);});}return G;},createDrop:function(H,D){var G={useShim:false,bubbles:this};if(!H.drop){H.plug(F.Plugin.Drop,G);}H.drop.set("groups",D);return H;},destructor:function(){if(this.dd){this.dd.destroy();}if(F.Plugin.Drop){var D=F.one(this.get(C)).all(this.get(B));D.each(function(G){G.drop.destroy();G.unplug(F.Plugin.Drop);});}}});F.mix(F.DD.DDM,{_delegates:[],regDelegate:function(D){this._delegates.push(D);},getDelegate:function(G){var D=null;G=F.one(G);F.each(this._delegates,function(H){if(G.test(H.get(C))){D=H;}},this);return D;}});F.namespace("DD");F.DD.Delegate=E;},"@VERSION@",{skinnable:false,optional:["dd-drop-plugin"],requires:["dd-drag","event-mouseenter"]});