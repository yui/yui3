if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/datasource-cache/datasource-cache.js']) {
   __coverage__['build/datasource-cache/datasource-cache.js'] = {"path":"build/datasource-cache/datasource-cache.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":28},"end":{"line":1,"column":47}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":31},"end":{"line":14,"column":42}}},"3":{"name":"(anonymous_3)","line":50,"loc":{"start":{"line":50,"column":17},"end":{"line":50,"column":34}}},"4":{"name":"(anonymous_4)","line":68,"loc":{"start":{"line":68,"column":25},"end":{"line":68,"column":37}}},"5":{"name":"(anonymous_5)","line":111,"loc":{"start":{"line":111,"column":27},"end":{"line":111,"column":39}}},"6":{"name":"DataSourceCache","line":129,"loc":{"start":{"line":129,"column":0},"end":{"line":129,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":166,"column":76}},"2":{"start":{"line":14,"column":0},"end":{"line":15,"column":2}},"3":{"start":{"line":17,"column":0},"end":{"line":40,"column":3}},"4":{"start":{"line":42,"column":0},"end":{"line":117,"column":2}},"5":{"start":{"line":51,"column":8},"end":{"line":51,"column":65}},"6":{"start":{"line":52,"column":8},"end":{"line":52,"column":67}},"7":{"start":{"line":70,"column":8},"end":{"line":71,"column":35}},"8":{"start":{"line":73,"column":8},"end":{"line":81,"column":9}},"9":{"start":{"line":74,"column":12},"end":{"line":74,"column":44}},"10":{"start":{"line":75,"column":12},"end":{"line":75,"column":46}},"11":{"start":{"line":76,"column":12},"end":{"line":76,"column":42}},"12":{"start":{"line":78,"column":12},"end":{"line":78,"column":55}},"13":{"start":{"line":80,"column":12},"end":{"line":80,"column":83}},"14":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"15":{"start":{"line":114,"column":12},"end":{"line":114,"column":44}},"16":{"start":{"line":119,"column":0},"end":{"line":119,"column":74}},"17":{"start":{"line":129,"column":0},"end":{"line":135,"column":1}},"18":{"start":{"line":130,"column":4},"end":{"line":132,"column":43}},"19":{"start":{"line":133,"column":4},"end":{"line":133,"column":29}},"20":{"start":{"line":134,"column":4},"end":{"line":134,"column":23}},"21":{"start":{"line":137,"column":0},"end":{"line":160,"column":3}},"22":{"start":{"line":163,"column":0},"end":{"line":163,"column":56}}},"branchMap":{"1":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":21},"end":{"line":70,"column":45}},{"start":{"line":70,"column":50},"end":{"line":70,"column":54}}]},"2":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"3":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":12},"end":{"line":73,"column":17}},{"start":{"line":73,"column":21},"end":{"line":73,"column":35}}]},"4":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"5":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":11},"end":{"line":113,"column":21}},{"start":{"line":113,"column":25},"end":{"line":113,"column":34}}]},"6":{"line":130,"type":"cond-expr","locations":[{"start":{"line":130,"column":41},"end":{"line":130,"column":53}},{"start":{"line":130,"column":56},"end":{"line":130,"column":63}}]},"7":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":16},"end":{"line":130,"column":22}},{"start":{"line":130,"column":26},"end":{"line":130,"column":38}}]}},"code":["(function () { YUI.add('datasource-cache', function (Y, NAME) {","","/**\r"," * Plugs DataSource with caching functionality.\r"," *\r"," * @module datasource\r"," * @submodule datasource-cache\r"," */\r","\r","/**\r"," * DataSourceCache extension binds Cache to DataSource.\r"," * @class DataSourceCacheExtension\r"," */\r","var DataSourceCacheExtension = function() {\r","};\r","\r","Y.mix(DataSourceCacheExtension, {\r","    /**\r","     * The namespace for the plugin. This will be the property on the host which\r","     * references the plugin instance.\r","     *\r","     * @property NS\r","     * @type String\r","     * @static\r","     * @final\r","     * @value \"cache\"\r","     */\r","    NS: \"cache\",\r","\r","    /**\r","     * Class name.\r","     *\r","     * @property NAME\r","     * @type String\r","     * @static\r","     * @final\r","     * @value \"dataSourceCacheExtension\"\r","     */\r","    NAME: \"dataSourceCacheExtension\"\r","});\r","\r","DataSourceCacheExtension.prototype = {\r","    /**\r","    * Internal init() handler.\r","    *\r","    * @method initializer\r","    * @param config {Object} Config object.\r","    * @private\r","    */\r","    initializer: function(config) {\r","        this.doBefore(\"_defRequestFn\", this._beforeDefRequestFn);\r","        this.doBefore(\"_defResponseFn\", this._beforeDefResponseFn);\r","    },\r","\r","    /**\r","     * First look for cached response, then send request to live data.\r","     *\r","     * @method _beforeDefRequestFn\r","     * @param e {Event.Facade} Event Facade with the following properties:\r","     * <dl>\r","     * <dt>tId (Number)</dt> <dd>Unique transaction ID.</dd>\r","     * <dt>request (Object)</dt> <dd>The request.</dd>\r","     * <dt>callback (Object)</dt> <dd>The callback object.</dd>\r","     * <dt>cfg (Object)</dt> <dd>Configuration object.</dd>\r","     * </dl>\r","     * @protected\r","     */\r","    _beforeDefRequestFn: function(e) {\r","        // Is response already in the Cache?\r","        var entry = (this.retrieve(e.request)) || null,\r","            payload = e.details[0];\r","\r","        if (entry && entry.response) {\r","            payload.cached   = entry.cached;\r","            payload.response = entry.response;\r","            payload.data     = entry.data;\r","\r","            this.get(\"host\").fire(\"response\", payload);\r","\r","            return new Y.Do.Halt(\"DataSourceCache extension halted _defRequestFn\");\r","        }\r","    },\r","\r","    /**\r","     * Adds data to cache before returning data.\r","     *\r","     * @method _beforeDefResponseFn\r","     * @param e {Event.Facade} Event Facade with the following properties:\r","     * <dl>\r","     * <dt>tId (Number)</dt> <dd>Unique transaction ID.</dd>\r","     * <dt>request (Object)</dt> <dd>The request.</dd>\r","     * <dt>callback (Object)</dt> <dd>The callback object with the following properties:\r","     *     <dl>\r","     *         <dt>success (Function)</dt> <dd>Success handler.</dd>\r","     *         <dt>failure (Function)</dt> <dd>Failure handler.</dd>\r","     *     </dl>\r","     * </dd>\r","     * <dt>data (Object)</dt> <dd>Raw data.</dd>\r","     * <dt>response (Object)</dt> <dd>Normalized response object with the following properties:\r","     *     <dl>\r","     *         <dt>cached (Object)</dt> <dd>True when response is cached.</dd>\r","     *         <dt>results (Object)</dt> <dd>Parsed results.</dd>\r","     *         <dt>meta (Object)</dt> <dd>Parsed meta data.</dd>\r","     *         <dt>error (Object)</dt> <dd>Error object.</dd>\r","     *     </dl>\r","     * </dd>\r","     * <dt>cfg (Object)</dt> <dd>Configuration object.</dd>\r","     * </dl>\r","     * @protected\r","     */\r","     _beforeDefResponseFn: function(e) {\r","        // Add to Cache before returning\r","        if(e.response && !e.cached) {\r","            this.add(e.request, e.response);\r","        }\r","     }\r","};\r","\r","Y.namespace(\"Plugin\").DataSourceCacheExtension = DataSourceCacheExtension;\r","\r","\r","\r","/**\r"," * DataSource plugin adds cache functionality.\r"," * @class DataSourceCache\r"," * @extends Cache\r"," * @uses Plugin.Base, DataSourceCachePlugin\r"," */\r","function DataSourceCache(config) {\r","    var cache = config && config.cache ? config.cache : Y.Cache,\r","        tmpclass = Y.Base.create(\"dataSourceCache\", cache, [Y.Plugin.Base, Y.Plugin.DataSourceCacheExtension]),\r","        tmpinstance = new tmpclass(config);\r","    tmpclass.NS = \"tmpClass\";\r","    return tmpinstance;\r","}\r","\r","Y.mix(DataSourceCache, {\r","    /**\r","     * The namespace for the plugin. This will be the property on the host which\r","     * references the plugin instance.\r","     *\r","     * @property NS\r","     * @type String\r","     * @static\r","     * @final\r","     * @value \"cache\"\r","     */\r","    NS: \"cache\",\r","\r","    /**\r","     * Class name.\r","     *\r","     * @property NAME\r","     * @type String\r","     * @static\r","     * @final\r","     * @value \"dataSourceCache\"\r","     */\r","    NAME: \"dataSourceCache\"\r","});\r","\r","\r","Y.namespace(\"Plugin\").DataSourceCache = DataSourceCache;\r","","","}, '@VERSION@', {\"requires\": [\"datasource-local\", \"plugin\", \"cache-base\"]});","","}());"]};
}
var __cov_AV4LTKOxS7vZZhd9moF81g = __coverage__['build/datasource-cache/datasource-cache.js'];
__cov_AV4LTKOxS7vZZhd9moF81g.s['1']++;YUI.add('datasource-cache',function(Y,NAME){__cov_AV4LTKOxS7vZZhd9moF81g.f['1']++;__cov_AV4LTKOxS7vZZhd9moF81g.s['2']++;var DataSourceCacheExtension=function(){__cov_AV4LTKOxS7vZZhd9moF81g.f['2']++;};__cov_AV4LTKOxS7vZZhd9moF81g.s['3']++;Y.mix(DataSourceCacheExtension,{NS:'cache',NAME:'dataSourceCacheExtension'});__cov_AV4LTKOxS7vZZhd9moF81g.s['4']++;DataSourceCacheExtension.prototype={initializer:function(config){__cov_AV4LTKOxS7vZZhd9moF81g.f['3']++;__cov_AV4LTKOxS7vZZhd9moF81g.s['5']++;this.doBefore('_defRequestFn',this._beforeDefRequestFn);__cov_AV4LTKOxS7vZZhd9moF81g.s['6']++;this.doBefore('_defResponseFn',this._beforeDefResponseFn);},_beforeDefRequestFn:function(e){__cov_AV4LTKOxS7vZZhd9moF81g.f['4']++;__cov_AV4LTKOxS7vZZhd9moF81g.s['7']++;var entry=(__cov_AV4LTKOxS7vZZhd9moF81g.b['1'][0]++,this.retrieve(e.request))||(__cov_AV4LTKOxS7vZZhd9moF81g.b['1'][1]++,null),payload=e.details[0];__cov_AV4LTKOxS7vZZhd9moF81g.s['8']++;if((__cov_AV4LTKOxS7vZZhd9moF81g.b['3'][0]++,entry)&&(__cov_AV4LTKOxS7vZZhd9moF81g.b['3'][1]++,entry.response)){__cov_AV4LTKOxS7vZZhd9moF81g.b['2'][0]++;__cov_AV4LTKOxS7vZZhd9moF81g.s['9']++;payload.cached=entry.cached;__cov_AV4LTKOxS7vZZhd9moF81g.s['10']++;payload.response=entry.response;__cov_AV4LTKOxS7vZZhd9moF81g.s['11']++;payload.data=entry.data;__cov_AV4LTKOxS7vZZhd9moF81g.s['12']++;this.get('host').fire('response',payload);__cov_AV4LTKOxS7vZZhd9moF81g.s['13']++;return new Y.Do.Halt('DataSourceCache extension halted _defRequestFn');}else{__cov_AV4LTKOxS7vZZhd9moF81g.b['2'][1]++;}},_beforeDefResponseFn:function(e){__cov_AV4LTKOxS7vZZhd9moF81g.f['5']++;__cov_AV4LTKOxS7vZZhd9moF81g.s['14']++;if((__cov_AV4LTKOxS7vZZhd9moF81g.b['5'][0]++,e.response)&&(__cov_AV4LTKOxS7vZZhd9moF81g.b['5'][1]++,!e.cached)){__cov_AV4LTKOxS7vZZhd9moF81g.b['4'][0]++;__cov_AV4LTKOxS7vZZhd9moF81g.s['15']++;this.add(e.request,e.response);}else{__cov_AV4LTKOxS7vZZhd9moF81g.b['4'][1]++;}}};__cov_AV4LTKOxS7vZZhd9moF81g.s['16']++;Y.namespace('Plugin').DataSourceCacheExtension=DataSourceCacheExtension;__cov_AV4LTKOxS7vZZhd9moF81g.s['17']++;function DataSourceCache(config){__cov_AV4LTKOxS7vZZhd9moF81g.f['6']++;__cov_AV4LTKOxS7vZZhd9moF81g.s['18']++;var cache=(__cov_AV4LTKOxS7vZZhd9moF81g.b['7'][0]++,config)&&(__cov_AV4LTKOxS7vZZhd9moF81g.b['7'][1]++,config.cache)?(__cov_AV4LTKOxS7vZZhd9moF81g.b['6'][0]++,config.cache):(__cov_AV4LTKOxS7vZZhd9moF81g.b['6'][1]++,Y.Cache),tmpclass=Y.Base.create('dataSourceCache',cache,[Y.Plugin.Base,Y.Plugin.DataSourceCacheExtension]),tmpinstance=new tmpclass(config);__cov_AV4LTKOxS7vZZhd9moF81g.s['19']++;tmpclass.NS='tmpClass';__cov_AV4LTKOxS7vZZhd9moF81g.s['20']++;return tmpinstance;}__cov_AV4LTKOxS7vZZhd9moF81g.s['21']++;Y.mix(DataSourceCache,{NS:'cache',NAME:'dataSourceCache'});__cov_AV4LTKOxS7vZZhd9moF81g.s['22']++;Y.namespace('Plugin').DataSourceCache=DataSourceCache;},'@VERSION@',{'requires':['datasource-local','plugin','cache-base']});
