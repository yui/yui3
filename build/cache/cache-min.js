YUI.add("cache-base",function(C){var A=C.Lang,B=function(){B.superclass.constructor.apply(this,arguments);};C.mix(B,{NAME:"cache",ATTRS:{max:{value:0,setter:"_setMax"},size:{readOnly:true,getter:"_getSize"},uniqueKeys:{value:false,validator:function(D){return(A.isBoolean(D));}},entries:{readOnly:true,getter:"_getEntries"}}});C.extend(B,C.Base,{_entries:null,initializer:function(D){this.publish("add",{defaultFn:this._defAddFn});this.publish("flush",{defaultFn:this._defFlushFn});this._entries=[];},destructor:function(){this._entries=null;},_setMax:function(E){var D=this._entries;if(E>0){if(D){while(D.length>E){D.shift();}}}else{E=0;this._entries=[];}return E;},_getSize:function(){return this._entries.length;},_getEntries:function(){return this._entries;},_defAddFn:function(G){var E=this._entries,D=this.get("max"),F=G.entry;if(this.get("uniqueKeys")&&(this.retrieve(G.entry.request))){E.shift();}while(D&&E.length>=D){E.shift();}E[E.length]=F;},_defFlushFn:function(D){this._entries=[];},_isMatch:function(E,D){return(E===D.request);},add:function(E,D){if(this.get("entries")&&((this.get("max")===null)||this.get("max")>0)&&(A.isValue(E)||A.isNull(E)||A.isUndefined(E))){this.fire("add",{entry:{request:E,response:D,cached:new Date()}});}else{}},flush:function(){this.fire("flush");},retrieve:function(H){var D=this._entries,G=D.length,F=null,E=G-1;if((G>0)&&((this.get("max")===null)||(this.get("max")>0))){this.fire("request",{request:H});for(;E>=0;E--){F=D[E];if(this._isMatch(H,F)){this.fire("retrieve",{entry:F});if(E<G-1){D.splice(E,1);D[D.length]=F;}return F;}}}return null;}});C.Cache=B;},"@VERSION@",{requires:["base"]});YUI.add("cache-offline",function(F){function E(){E.superclass.constructor.apply(this,arguments);}F.mix(E,{NAME:"cacheOffline",ATTRS:{expires:{value:86400000,validator:function(G){return F.Lang.isDate(G)||(F.Lang.isNumber(G)&&G>=0);}},max:{value:null,readonly:true,setter:function(){return null;}},uniqueKeys:{value:true,readonly:true,setter:function(){return true;}}}});var A=F.config.win.localStorage,C=F.Lang.isDate,D=F.JSON,B=A?{_getSize:function(){return A.length;},_getEntries:function(){var G=this._entries,I=0,H=this._getSize();if(G){for(;I<H;++I){G[I]=D.parse(A.key(I));}}return G;},_defAddFn:function(J){var I=J.entry,H=I.request,G=this.get("expires");I.expires=C(G)?G:(G?new Date(new Date().getTime()+this.get("expires")):null);A.setItem(D.stringify({"request":H}),D.stringify(I));},_defFlushFn:function(I){var G=A,H;if(G){if(G.clear){G.clear();}else{for(H in G){if(G.hasOwnProperty(H)){G.removeItem(H);delete G[H];}}}}},retrieve:function(J){this.fire("request",{request:J});var I,G,H;try{J=D.stringify({"request":J});try{I=D.parse(A.getItem(J));}catch(L){}}catch(K){}if(I){I.cached=new Date(I.cached);G=I.expires;G=!G?null:new Date(G);if(!G||new Date()<G){I.expires=G;this.fire("retrieve",{entry:I});return I;}}return null;}}:{_defAddFn:function(H){var G=this.get("expires");H.entry.expires=C(G)?G:(G?new Date(new Date().getTime()+this.get("expires")):null);E.superclass._defAddFn.call(this,H);},_isMatch:function(H,G){if(!G.expires||new Date()<G.expires){return(H===G.request);}return false;}};F.extend(E,F.Cache,B);F.CacheOffline=E;},"@VERSION@",{requires:["cache-base","json"]});YUI.add("cache",function(A){},"@VERSION@",{use:["cache-base","cache-offline"]});