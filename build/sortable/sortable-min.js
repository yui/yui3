YUI.add("sortable",function(a,l){var c=function(m){c.superclass.constructor.apply(this,arguments);},f="currentNode",d="opacityNode",i="container",e="id",j="zIndex",k="opacity",h="parentNode",g="nodes",b="node";a.extend(c,a.Base,{delegate:null,drop:null,initializer:function(){var o="sortable-"+a.guid(),n={container:this.get(i),nodes:this.get(g),target:true,invalid:this.get("invalid"),dragConfig:{groups:[o]}},m;if(this.get("handles")){n.handles=this.get("handles");}m=new a.DD.Delegate(n);this.set(e,o);m.dd.plug(a.Plugin.DDProxy,{moveOnEnd:false,cloneNode:true});this.drop=new a.DD.Drop({node:this.get(i),bubbleTarget:m,groups:m.dd.get("groups")});this.drop.on("drop:over",a.bind(this._onDropOver,this));m.on({"drag:start":a.bind(this._onDragStart,this),"drag:end":a.bind(this._onDragEnd,this),"drag:over":a.bind(this._onDragOver,this),"drag:drag":a.bind(this._onDrag,this)});this.delegate=m;c.reg(this);},_up:null,_y:null,_onDrag:function(m){if(m.pageY<this._y){this._up=true;}else{if(m.pageY>this._y){this._up=false;}}this._y=m.pageY;},_onDropOver:function(m){if(!m.drop.get(b).test(this.get(g))){m.drop.get(b).append(m.drag.get(b));}},_onDragOver:function(s){if(!s.drop.get(b).test(this.get(g))){return;}if(s.drag.get(b)==s.drop.get(b)){return;}if(s.drag.get(b).contains(s.drop.get(b))){return;}var t=false,n,r,p,o,m,q=this.get("moveType").toLowerCase();if(s.drag.get(b).get(h).contains(s.drop.get(b))){t=true;}if(t&&q=="move"){q="insert";}switch(q){case"insert":n=((this._up)?"before":"after");m=s.drop.get(b);if(a.Sortable._test(m,this.get(i))){m.append(s.drag.get(b));}else{m.insert(s.drag.get(b),n);}break;case"swap":a.DD.DDM.swapNode(s.drag,s.drop);break;case"move":case"copy":o=a.Sortable.getSortable(s.drop.get(b).get(h));if(!o){return;}a.DD.DDM.getDrop(s.drag.get(b)).addToGroup(o.get(e));if(t){a.DD.DDM.swapNode(s.drag,s.drop);}else{if(this.get("moveType")=="copy"){r=s.drag.get(b);p=r.cloneNode(true);p.set(e,"");s.drag.set(b,p);o.delegate.createDrop(p,[o.get(e)]);r.setStyles({top:"",left:""});}s.drop.get(b).insert(s.drag.get(b),"before");}break;}this.fire(q,{same:t,drag:s.drag,drop:s.drop});this.fire("moved",{same:t,drag:s.drag,drop:s.drop});},_onDragStart:function(o){var m=this.delegate,n=m.get("lastNode");if(n&&n.getDOMNode()){n.setStyle(j,"");}m.get(this.get(d)).setStyle(k,this.get(k));m.get(f).setStyle(j,"999");},_onDragEnd:function(m){this.delegate.get(this.get(d)).setStyle(k,1);this.delegate.get(f).setStyles({top:"",left:""});this.sync();},plug:function(m,n){if(m&&m.NAME.substring(0,4).toLowerCase()==="sort"){this.constructor.superclass.plug.call(this,m,n);}else{this.delegate.dd.plug(m,n);}return this;},sync:function(){this.delegate.syncTargets();return this;},destructor:function(){this.drop.destroy();this.delegate.destroy();c.unreg(this);},join:function(n,m){if(!(n instanceof a.Sortable)){a.error("Sortable: join needs a Sortable Instance");return this;}if(!m){m="full";}m=m.toLowerCase();var o="_join_"+m;if(this[o]){this[o](n);}return this;},_join_none:function(m){this.delegate.dd.removeFromGroup(m.get(e));m.delegate.dd.removeFromGroup(this.get(e));},_join_full:function(m){this.delegate.dd.addToGroup(m.get(e));m.delegate.dd.addToGroup(this.get(e));},_join_outer:function(m){this.delegate.dd.addToGroup(m.get(e));},_join_inner:function(m){m.delegate.dd.addToGroup(this.get(e));},getOrdering:function(n){var m=[];if(!a.Lang.isFunction(n)){n=function(o){return o;};}a.one(this.get(i)).all(this.get(g)).each(function(o){m.push(n(o));});return m;}},{NAME:"sortable",ATTRS:{handles:{value:false},container:{value:"body"},nodes:{value:".dd-draggable"},opacity:{value:".75"},opacityNode:{value:"currentNode"},id:{value:null},moveType:{value:"insert"},invalid:{value:""}},_sortables:[],_test:function(n,o){var m;if(o instanceof a.Node){m=(o===n);}else{m=n.test(o);}return m;},getSortable:function(n){var m=null;n=a.one(n);a.each(a.Sortable._sortables,function(o){if(a.Sortable._test(n,o.get(i))){m=o;}});return m;},reg:function(m){a.Sortable._sortables.push(m);},unreg:function(m){a.each(a.Sortable._sortables,function(o,n){if(o===m){a.Sortable._sortables[n]=null;delete c._sortables[n];}});}});a.Sortable=c;},"@VERSION@",{"requires":["dd-delegate","dd-drop-plugin","dd-proxy"]});