YUI.add("sortable",function(G){var D=function(I){D.superclass.constructor.apply(this,arguments);},C="dragNode",E="currentNode",B="id",F="opacity",H="parentNode",A="node";D.NAME="sortable";D.ATTRS={cont:{value:"body"},nodes:{value:".dd-draggable"},opacity:{value:".75"},id:{value:null},moveType:{value:"swap"}};D._sortables=[];D.getSortable=function(J){var I=null;J=G.one(J);G.each(D._sortables,function(K){if(J.test(K.get("cont"))){I=K;}});return I;};D.regSortable=function(I){D._sortables.push(I);};G.extend(D,G.Base,{delegate:null,initializer:function(){var K="sortable-"+G.stamp({}),J,I=new G.DD.Delegate({cont:this.get("cont"),nodes:this.get("nodes"),target:true,dragConfig:{groups:[K]}});this.set(B,K);I.plugdd(G.Plugin.DDProxy,{moveOnEnd:false,cloneNode:true});J=new G.DD.Drop({node:this.get("cont"),bubbles:I,groups:I.dd.get("groups")}).on("drop:over",G.bind(this._handleDropOver,this));I.on("drag:start",G.bind(this._handleDragStart,this));I.on("drag:end",G.bind(this._handleDragEnd,I));I.on("drag:over",G.bind(this._handleDragOver,this));this.delegate=I;D.regSortable(this);},_handleDropOver:function(J){if(!J.drop.get(A).test(this.get("nodes"))){var I=J.drop.get(A).all(this.get("nodes"));if(I.size()===0){J.drop.get(A).append(J.drag.get(A));}}},_handleDragOver:function(L){if(!L.drop.get(A).test(this.get("nodes"))){return;}if(L.drag.get(A)==L.drop.get(A)){return;}switch(this.get("moveType")){case"swap":G.DD.DDM.swapNode(L.drag,L.drop);break;case"move":case"copy":if(L.drag.get(A).get(H).contains(L.drop.get(A))){G.DD.DDM.swapNode(L.drag,L.drop);}else{if(this.get("moveType")=="copy"){var K=L.drag.get(A),J=K.cloneNode(true),I=G.Sortable.getSortable(L.drop.get(A).get(H));J.set(B,"");L.drag.set(A,J);I.delegate.createDrop(J,[I.get(B)]);K.setStyles({top:"",left:""});}L.drop.get(A).get(H).insertBefore(L.drag.get(A),L.drop.get(A));}break;}},_handleDragStart:function(I){this.delegate.get("lastNode").setStyle("zIndex","");this.delegate.get(C).setStyle(F,this.get(F));this.delegate.get(E).setStyle("zIndex","999");},_handleDragEnd:function(I){this.get(C).setStyle(F,1);this.get(E).setStyles({top:"",left:""});},plug:function(I,J){this.delegate.plugdd(I,J);return this;},sync:function(){this.delegate.syncTargets(this.get(B));return this;},destructor:function(){},join:function(J,I){if(!(J instanceof G.Sortable)){G.error("Sortable: join needs a Sortable Instance");return this;}if(!I){I="full";}switch(I.toLowerCase()){case"none":this.delegate.dd.removeFromGroup(J.get(B));J.delegate.dd.removeFromGroup(this.get(B));break;case"out":case"outside":case"outter":case"outer":this.delegate.dd.addToGroup(J.get(B));break;case"in":case"inside":case"inner":J.delegate.dd.addToGroup(this.get(B));break;default:this.delegate.dd.addToGroup(J.get(B));J.delegate.dd.addToGroup(this.get(B));break;}return this;}});G.Sortable=D;},"@VERSION@",{requires:["dd-delegate"]});