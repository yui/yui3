<?php 
$title="The Get Utility";
$section="get";
$component="Get Utility";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>
<div id="yui-main">
	<div class="yui-b">
		<div class="yui-ge">
			<div class="yui-u first" id="main">
			<!-- main column -->
			
				<h2><?php echo $component;?></h2>
<div id="promo" class="component">
<p>The Get Utility provides a mechanism for attaching script and css resources
&mdash; including cross-domain resources &mdash; to the DOM after the page has
loaded.</p>


<p>There are two common use cases for the Get Utility:</p>



<ol>

  <li><strong>Cross-site data retrieval:</strong> Because XMLHttpRequest (and
  <a href="http://developer.yahoo.com/yui/3/io/">YUI IO Utility</a>, which uses 
  XMLHttpRequest) adheres to a strict <a
  href="http://en.wikipedia.org/wiki/Same_origin_policy">same-origin
  policy</a>, the retrieval of third-party data via XHR requires a server-side
  proxy.  Where you control or absolutely trust a cross-domain source, you can
  eliminate the server-side proxy by loading a script file directly from the
  external domain; that script file, which would typically contain
  JSON-formatted data, is executed immediately upon load. It is crucial to
  understand that if there is malicious code present in the loaded script there
  is no safe way to innoculate your users from that malicious code...the
  browser will execute the code with full privileges.  <strong>Never expose
  your users to JavaScript whose source is not absolutely
  trustworthy.</strong>
  

  </li>

  <li><strong>Progressive loading of functionality:</strong> In rich web
  applications, it's often useful to load some script and CSS resources only
  when they become necessary (based on user action).  The Get Utility provides
  a flexible mechanism for bringing additional resources on-demand.
  (<strong>Note:</strong> If you're loading YUI resources specifically, use <a
  href="http://developer.yahoo.com/yui/3/yui/#loader">the YUI Loader Utility</a>;
  the YUI Loader employs the Get Utility under the hood to bring in YUI
  components and has an intrinsic understanding of the YUI dependency
  tree.)</li>

</ol>



<h3>What Is the Difference Between the Get Utility and the IO Utility?</h3>



<p>The Get Utility inserts new content into a window by creating new nodes and
supplying a <code>src</code> attribute.  Files inserted into the window in this
manner are processed (and, in the case of scripts, executed) immediately upon
load.  While querystring parameters can be passed in the <code>src</code>
attribute URL, no data can be sent to the server via HTTP POST using this
method.  The Get Utility can only make HTTP GET requests.  It can, however,
interact with disparate domains. As noted above, the Get Utility is ideal for
loading your own scripts or CSS progressively (lazy-loading) or for retrieving
cross-domain JSON data from sources in which you have total trust.</p>



<p>The <a href="http://developer.yahoo.com/yui/3/io/">YUI IO Utility</a>, by contrast, uses the XMLHttpRequest object to interact with the
server.  XMLHttpRequest is limited by a strict <a
href="http://en.wikipedia.org/wiki/Same_origin_policy">same origin policy</a>,
but it supports a greater range of HTTP methods (including POST).  Moreover,
script data retrieved via XMLHttpRequest can be validated on the server side or
in JavaScript (using, for example, the <a
href="http://developer.yahoo.com/yui/3/json/">JSON Utility</a>) prior to being
executed. As a result, IO Utility is a more appropriate choice for rich
two-way communication between browser and server and gives you more control
over data before it's processed within the browser.
</p>
<p>

Version 3.0 of the IO Utility now supports cross domain requests.  There are specific trust requirements as described
in documentation for the <a href="http://developer.yahoo.com/yui/3/io/#xdr">IO Utility</a>.  This may be a better choice
if the service you are accessing can be configured to trust the server that is hosting your application.
</p>
			
					<div class="yui-g">
						<div class="yui-u first">
							<div id="jumps">
								<h4>On This Page</h4>
<ul>
      <li><a href="#start">Getting Started</a></li>
      <li><a href="#config">Configuring a Get Utility Transaction</a> </li>
      <li><a href="#args">Making Use of Arguments Supplied to Your Callback</a> </li>
      <li><a href="#script">Using the Get Utility to Insert Script Nodes</a> </li>
      <li><a href="#css">Using the Get Utilty to Insert CSS Files</a></li>
      <li><a href="#mobile">YUI on Mobile Devices</a></li>
      <li><a href="#support">Support &amp; Community</a></li>
	  <li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
							</div>
						</div>
						<div class="yui-u">
							<?php include('../inc/quicklinks.inc'); ?>
						</div>
					</div>				
					<div class="clear"></div>
				</div><!-- /promo -->
				
  <h3 class="first">Getting Started<a name="start"></a></h3>

  <p>The Get Utility is included in the default YUI bundle:
  
  <a href="http://developer.yahoo.com/yui/3/yui/">the YUI Global Object</a>.  

  To use the Get Utility, include the following source files in your web page:</p>

<textarea name="code" class="HTML" cols="60" rows="1">
    &lt;script type="text/javascript" src=../../build/yui/yui-min.js" &gt;&lt;/script&gt;
</textarea>


<p>With the Get Utility present, you can make use of it to fetch script (<code>Y.Get.script()</code>) and/or CSS (<code>Y.Get.css()</code>) resources to the page.  The <code>script</code> and <code>css</code> methods each take the following arguments:</p>

<ol>
  <li><strong>URL(s):</strong> A string or an array of strings designating the URL(s) you wish to load into the page;</li>
  <li><strong>options:</strong> An optional object containing configuration
  information for the transaction; see the <a href="#config">Configuring a Get
  Utility Transaction section</a> below for the full list of configuraton
  members you can include here.</li> </ol>



<p>A sample request for a file might look like this:</p>



<textarea name="code" class="JScript" cols="60" rows="1">var Y = YUI();
        var objTransaction = Y.Get.script("http://json.org/json.js",
											{ onSuccess: function() {
                                            	alert("file loaded");
                                            });

//objTransaction will be an object with a single field, tId, 
//which is a unique identifier of the transaction following the pattern
//"q0", "q1", "q2"..."qn".</textarea>

<h3 id="config">Configuring a Get Utility Transaction</h3>


<p>The Get Utility is configured via the second argument to the
<code>script</code> or <code>css</code> method.  This optional argument
comprises an object containing one or more of the following fields:</p>


<div class="apisummary">
<table>
    <thead>
		<tr>
			<th>Configuration Option</th>
			<th>Purpose</th>
		</tr>
    </thead>
	<tbody>
        <tr >
            <td>onSuccess</td>
            <td>(function) Callback method invoked by Get Utility when the requested file(s) have loaded successfully.</td>
        </tr>
        <tr>
            <td>onFailure</td>
            <td>(function) Callback method invoked by Get Utility when an error is detected or <code>abort</code> is called.</td>
        </tr>
        <tr>
            <td>onProgress</td>
            <td>(function) Callback method invoked by Get Utility after each node is inserted.</td>
        </tr>
        <tr>
            <td>onTimeout</td>
            <td>(function) Callback method invoked by Get Utility if a timeout is detected.</td>
        </tr>
        <tr >
            <td>win</td>
            <td>(obj) The <code>window</code> into which the loaded resource(s) will be inserted.  Default: the current <code>window</code>.</td>
        </tr>
        <tr>
            <td>scope</td>
            <td>(object) The execution scope in which the <code>onSuccess</code> or <code>onFailure</code> callback will run.  Default: the current <code>window</code>.</td>
        </tr>

        <tr >
            <td>data</td>
            <td>(any) Data to pass as an argument to <code>onSuccess</code> or <code>onFailure</code> callbacks.  Default: <code>null</code>.</td>
        </tr>
        <tr >
            <td>autopurge</td>
            <td>(boolean) If set to true, script nodes will automatically be
            removed every 20 transactions (this number is globally configurable
            via the <code>Y.Get.PURGE_THRESH</code> property); script
            nodes can be safely removed in most cases, as their contents
            (having executed) remain available. CSS nodes should not have this
            set to true as it will remove the CSS rules. Default:
            <code>true</code> for script nodes, <code>false</code> for CSS
            nodes.</td> </tr> 
         <tr > 
            <td>timeout</td> 
            <td>(int) Number of milliseconds to wait for a script to finish loading before timing out</td> 
         </tr>
            </tbody>

</table>
</div>

<h3 id="args">Making Use of Arguments Supplied to Your Callback</h3>

<p>As noted <a href="#config">in the section above</a>, your callback method
(whether <code>onSuccess</code> or <code>onFailure</code>) will have access to
the <code>data</code> member supplied in the configuration object, assuming you
provided one.  But the <code>data</code> member is just one of several fields
included in the object passed to your callback.  Here's a summary of the fields
contained in that argument object:</p>

<div class="apisummary">
<table>
    <thead>
		<tr>
			<th>Field</th>
			<th>Contents</th>
		</tr>
    </thead>
	<tbody>
        <tr >
            <td>tId</td>
            <td>(string) The unique identifier for this transaction; this string is available as the <code>tId</code> member of the object returned to you upon calling the <code>script</code> or <code>css</code> method.</td>
        </tr>        
        <tr>
            <td>data</td>
            <td>(any) The <code>data</code> field you passed in your configuration object when the <code>script</code> or <code>css</code> method was called. Default: <code>null</code>.</td>
        </tr>
        <tr >
            <td>nodes</td>
            <td>(array) An array containing references to node(s) created in processing the transaction.  These will be script nodes for JavaScript and link nodes for CSS.</td>
        </tr>
        <tr>
            <td>win</td>
            <td>(obj) The window object in which the nodes were created.</td>
        </tr>
        <tr >
            <td>purge()</td>
            <td>(function) Calling the returned <code>purge()</code> method will immediately remove the created nodes. This is safe and prudent for JavaScript nodes, which do not need to persist.  If CSS nodes are purged, the rules they contain are no longer available and the page will repaint accordingly.</td>
        </tr>
	</tbody>
</table>
</div>

<p>All of these fields are accessible on the object passed to your <code>onSuccess</code> callback:</p>

<textarea name="code" class="JScript" cols="60" rows="1">var successHandler = function(o) {
	//Here, o contains all of the fields described in the table
    //above:
	o.purge(); //removes the script node immediately after executing;
    Y.log(o.data); //the data you passed in your configuration
    	 			   //object

}

var objTransaction = Y.Get.script("http://json.org/json.js",
											{ onSuccess: successHandler,
                                              data: {field1: value1,
                                                     field2: value2}
                                            });</textarea>

<h3 id="script">Using the Get Utility to Insert Script Nodes</h3>

<p>When you use the <code>Y.Get.script()</code> method to add one or more script nodes to the page, the Get Utility implements the following steps:</p>

<ol>
  <li>A script node is appended to the target <code>window</code> for the first script file requested;</li>
  <li>the <code>src</code> attribute of the new script node is set to the specified URL;</li>
  <li>the script, in a successful transaction, is loaded and executed;</li>
  <li>the script node's <code>load</code> event fires;</li>
  <li>the Get Utility checks to see if more URLs remain to be loaded; if so, it recurses to step 1;</li>
  <li>if this was the last of the URLs specified for this transaction, the Get Utility invokes the <code>onSuccess</code> callback (if one has been specified);</li>
</ol>

<p>The following is the general code pattern used to get scripts:</p>

<textarea name="code" class="JScript" cols="60" rows="1">var handlerData = {
	//data you wish to pass to your success or failure
    //handlers.
}

var successHandler = function(oData) {
	//code to execute when all requested scripts have been
    //loaded; this code can make use of the contents of those
    //scripts, whether it's functional code or JSON data.
}

var aURLs = [
	"/url1.js",
    "/url2.js",
    "/url3.js" //and so on
];

Y.Get.script(aURLs, {
				onSuccess: successHandler,
                data:	   handlerData
});</textarea>



<h3 id="script">Using the Get Utility to Insert CSS Files</h3>



<p>When you use the <code>Y.Get.css()</code> method to add one or more CSS
files to the page, the Get Utility follows the same steps described above for
scripts.  Generally speaking, the same code pattern holds as well.  Note that
Firefox and Safari at present do not support the load event on link nodes, so it is
possible for CSS requests to load out of order in that browser.  This can
result in a different progressive display of styled in these browsers versus other
browsers during CSS loading.</p>


<?php # include "../inc/mobileSection.inc";?>

<?php include "../inc/support.inc"; ?>

		</div>
<div class="yui-u sidebar">

	<?php 
	//include "../inc/cheatsheet.inc";
	?>
			
			<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
		   </div>
		   
		   	<!--div id="morereading">
				<h3>More Reading about the YUI <?php echo $component;?>:</h3>
				
				<ul>
					<li><a href="http://informationr.net/ir/12-2/TB0701.html">Artisinal Animation</a>, by Terrence Brooks</li>
				  	<li>From <a href="http://simon.incutio.com/slides/2006/xtech/yui-notes.html#animation">The Yahoo! User Interface Library</a>, by Simon Willison</li>
					<li><a href="http://www.hedgerwow.com/360/mwd/accordion/demo.php?page=1">Accordion Menu made with YUI</a>, by Hedger Wang</li>

			   </ul>
		   </div-->
		   
		<!-- delicious module -->
		<?php require('../inc/mod-delicious.inc'); ?>
		<!-- /delicious module -->


		 </div>
      </div>

</div>
</div>

<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>




