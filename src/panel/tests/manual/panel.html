<!DOCTYPE html>

<html>
    <head>

        <style>
            body {
                font-family: sans-serif;
                font-size:12px;
                line-height:18px;
            }

            #desc {
              margin-bottom:20px;
              border-bottom:1px dotted #333;
            }
            #desc span {
              background:#a3350d;
              padding:2px;
              color:#f27243;
            }


           .yui3-widget-mask {
                background:rgba(0,0,0,0.6);
            }

            .yui3-panel-content {
                box-shadow: 0 0 5px #333;
                padding:15px;
                border-radius:2px;

            }

        </style>
        <script type="text/javascript" src="http://localhost:8888/yui3/build/yui/yui-debug.js"></script> 
    </head>

    <body class='yui3-skin-night'>

      <div id="desc">
      <h1><code>Y.WidgetModality</code> Manual Tests</h1>
      <span><code>Y.WidgetModality</code> is a widget extension that can be implemented when creating a new Widget. It makes that widget appear modally, through the <code>modal</code> attribute. By default, this attribute is set to <code>false</code></span>
      </div>

        <div id="nestedPanel"></div>
        <div id="overlay" class="yui3-loading">
          <div class="yui3-widget-hd">The new YUI3 Panel...</div>
           <div class="yui3-widget-bd">Here's some content that should go into a modal overlay. Let's see if it works...</div>
            <div class="yui3-widget-ft">
              <ul>
                <li id="closePanelBtn">Close Panel</li>
                <li id="openNestedPanelBtn">Open Nested Panel</li>
              </ul>
            </div>
          </div>

        <p>
        Enable modality for main panel: <input id="modalMain" type="checkbox" name="main" value="main"/>
        <br/>
        Enable modality for nested panel: <input id="modalNest" type="checkbox" name="main" value="nest"/>
        <br/>
        <!-- <input type="button" id="openChartBtn" value="Launch Modal Chart"> -->
        <p><input type="button" id="OpenPanelBtn" value="Launch Modal Panel"></p>
        </p>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec elit mi, tempus in tincidunt non, imperdiet sed augue. Nullam turpis magna, gravida vel venenatis at, dignissim non augue. Phasellus posuere erat nec ligula consectetur nec facilisis purus consectetur. Integer ipsum nisi, aliquam at ultrices quis, dictum a mauris. Ut posuere ultrices justo non convallis. Nunc a diam et est pretium fermentum. Nunc eget nunc non odio vestibulum vehicula et faucibus neque. Praesent turpis ligula, pharetra id vehicula a, sollicitudin sit amet lectus. Pellentesque pellentesque ante sed leo congue ullamcorper. Praesent at metus nisl. Vivamus at tortor sed sapien aliquet volutpat. Suspendisse vehicula, dolor ac vestibulum dapibus, nisi nulla ultrices odio, ac fermentum dolor risus congue tortor. Sed vel ligula in justo lacinia condimentum vel id est. Suspendisse interdum ligula quis odio congue consequat. Suspendisse potenti. Cras id accumsan eros. Duis gravida metus ac diam volutpat et dignissim justo pulvinar. Duis semper ornare dui, non condimentum nibh pretium id. Aenean dapibus purus eu nisl hendrerit a malesuada dolor vehicula.</p>

        <p>Nullam et enim id lectus rhoncus convallis. Vivamus molestie diam sed est hendrerit condimentum. Phasellus fringilla libero a ligula aliquet placerat. Aliquam consectetur dignissim purus non scelerisque. Integer vel sem eu lacus tincidunt auctor. Vivamus vitae lobortis urna. Suspendisse potenti. Donec hendrerit viverra felis, in faucibus odio scelerisque eu. Vestibulum sem velit, posuere at pulvinar semper, ornare ut felis. Etiam at consectetur mi. Sed id nisi est, ac feugiat eros. Nulla facilisi. Ut porttitor tellus sit amet diam consequat ac sagittis lacus porta. Suspendisse nibh justo, fringilla a congue id, faucibus sed nibh. Sed vitae lorem mattis lectus ultrices suscipit eu ac mauris.</p>

        <a href="#a" class="randomLinks">Random Link 1</a>
        <a href="#b" class="randomLinks">Random Link 2</a>
        <a href="#c" class="randomLinks">Random Link 3</a>
        <a href="#d" class="randomLinks">Random Link 4</a>
                
        <script>
            YUI({filter:'raw'}).use('panel', function(Y) {
              
              var isMainPanelModal, isNestedPanelModal, panel, nest;


              //overlay.plug(Y.Plugin.Modal);
              panel = new Y.Panel({
                 srcNode: "#overlay",
                 width: 300,
                 height: 300,
                 visible: false,
                 centered:true
          
              });

              panel.render();

               Y.one("#OpenPanelBtn").on('click', function(e){
                    isMainPanelModal = Y.one('#modalMain').get('checked');
                    
                    panel.set('modal', isMainPanelModal);
                    //panel.render();

                    Y.log('modality on panel changed to ' + isMainPanelModal);

                    panel.show();
               });

               Y.one("#closePanelBtn").on('click', function(e) {
                    panel.hide();
               });

               Y.one('#openNestedPanelBtn').on('click', function(e) {
                  isNestedPanelModal = Y.one('#modalNest').get('checked');

                  if (!(nest instanceof Y.Panel)) {
                    nest = new Y.Panel({
                      headerContent:"My Panel Header",
                      bodyContent:"My Panel Body <a href='closeNest.html' id='closeNest'>Close</a>",
                      footerContent:"My Footer Content",
                      visible:false,
                      width:350,
                      height:150,
                      zIndex: 2,
                      centered: true
                    });

                    nest.after('render', function(){
                      Y.one("#closeNest").on('click', function(e){
                         e.preventDefault();
                         nest.hide();
                      });
                    });  

                    nest.render('#nestedPanel');  
                  }
 

                  nest.set('modal', isNestedPanelModal);
                  nest.show();

               });

               

               
     

            });
        </script>
    </body>

</html>