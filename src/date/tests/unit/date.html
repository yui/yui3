<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Date Tests</title>
</head>
<body lang="en" class="yui3-skin-sam">

    <div id="testbed"></div>

    <script src="../../../../build/yui/yui.js"></script>
    <script src="./assets/date-tests.js"></script>
    <script src="./assets/date-fr-tests.js"></script>
    <script src="./assets/date-ko-tests.js"></script>

    <script>

        var curLang, dateUS, dateFR, dateKR;
        var langs = ['fr-FR', 'ko-KR'];
        var YLog;

        YUI({
            coverage: ['datatype-date-format','datatype-date-parse'],
            lang: 'en-US,pa-IN',
            filter: (window.location.search.match(/[?&]filter=([^&]+)/) || [])[1] || 'raw'
        }).use('test-console', 'date-tests', function (Y){

            YLog = Y.log;
            new Y.Test.Console().render();

            var TestRunner = Y.Test.Runner;

            TestRunner.subscribe(TestRunner.COMPLETE_EVENT, function (e) {
                Y.Test.Runner.clear();
                next();
            });

            curLang = 'en-US';
            dateUS = Y.Date;
            Y.Test.Runner.run();
        });


        function next() {
            var lang, test;

            if (langs.length) {
                lang = langs.shift();

                YLog('Switching to language ' + lang, 'info');

                switch (lang) {
                    case 'fr-FR':
                        test = 'date-fr-tests';
                        break;
                    case 'ko-KR':
                        test = 'date-ko-tests';
                        break;
                }

                YUI({
                    combine: false, filter: 'raw',
                    lang: 'en-US,' + lang + ',en-US,pa-IN'
                }).use(test, 'lang/datatype-date-format_' + lang, function (Y) {
                    curLang = lang;

                    Y.Intl.setLang('datatype-date-format', lang);

                    switch (lang) {
                        case 'fr-FR':
                            dateFR = Y.Date;
                            break;
                        case 'ko-KR':
                            dateKR = Y.Date;
                            break;
                    }

                    Y.Test.Runner.run();
                });
            }
        }

    </script>
</body>
</html>

