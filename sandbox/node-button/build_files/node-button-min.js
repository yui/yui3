YUI.add("node-button",function(A){var I=A.UA,C=A.ClassNameManager.getClassName;var H=function(){H.superclass.constructor.apply(this,arguments);};var B={};var K=function(P){var Q=this,N,M,O=function(R){this.button._set("active",false);M.detach();};if(Q.get("nodeName").toLowerCase()=="label"){N=Q._button;N.button._blockClearActive=true;}else{N=Q;}N.button._button.focus();N.button._set("active",true);M=N.get("ownerDocument").on("mouseup",O,N);P.preventDefault();};var G=function(M){this.button._set("hover",(M.type=="mouseover"?true:false));};var F=function(M){this.button._set("focused",true);};var D=function(M){this.button._set("focused",false);if(!this.button._blockClearActive&&this.button.get("active")){this.button._set("active",false);}this.button._blockClearActive=false;};var E=function(N){var M=this.button._button,O;if(this.button._checkable&&N.target.get("nodeName").toLowerCase()!="label"){if(N.target==M){M.set("checked",M.get("checked"));}else{M.set("checked",(!M.get("checked")),{src:"proxy"});}if(this.button._type=="radio"){O=this.button.get("container").all("[name="+M.get("name")+"]");O.each(function(P){if(P!=M){P.set("checked",false);}});}}};var L=function(O){var N=this.button,M=[];M[32]=true;if(!N._checkable){M[13]=true;}if(M[O.keyCode]){N._set("active",(O.type=="keydown"?true:false));}};var J=function(P){var O=this.button,N=this.button._button,M={37:1,38:1,39:1,40:1};if(O._type=="radio"&&M[P.keyCode]){N.set("checked",N.get("checked"));}L.call(this,P);};H.ATTRS={active:{value:false,readOnly:true},hover:{value:false,readOnly:true},focused:{value:false,readOnly:true},rootClassName:{setter:function(M){return C(M);},value:"button",writeOnce:true},container:{getter:function(M){return A.one(M)||this.get("host").get("parentNode");},writeOnce:true}};A.extend(H,A.Plugin.Base,{_blockClearActive:false,_stateClasses:{},_checkable:false,_styleStates:function(P,N,R){var M=[this._type],O=this._host;var Q=function(W,V){var U,X,S,T;if(P.newVal){if(N=="checked"&&V=="checked"&&P.src=="proxy"){U=P.newVal;}else{U=W.get(V);}if(U){M.push((V=="focused"?"focus":V));if(M.length>=3){X=C.apply(A.ClassNameManager,M);O.addClass(X);S=this._stateClasses[N];if(!S){S=[];this._stateClasses[N]=S;}S.push(X);}}}else{S=this._stateClasses[N];if(S){A.each(S,function(Z,Y){O.removeClass(Z);});this._stateClasses[N]=null;}T=new RegExp(N,"gi");A.each(this._stateClasses,function(Y){if(Y){A.each(Y,function(a,Z){if(a.search(T)!==-1){O.removeClass(a);}});}});}};if(this._button.get("disabled")){M.push("disabled");Q.call(this,this._button,"checked");}else{Q.call(this,this._button,"checked");Q.call(this,this,"active");Q.call(this,this,"focused");Q.call(this,this,"hover");}},_uiUpdateState:function(N,O){var M=N.newVal?"addClass":"removeClass",P=C(this._type,(O=="focused"?"focus":O));this._host[M](P);this._styleStates(N,O,P);},_uiUpdateDisabled:function(M){if(M.newVal){this._set("active",false);this._button.blur();this._set("focused",false);this._set("hover",false);}this._uiUpdateState(M,"disabled");},_addListeners:function(P){var S=this._type,O=this._button,M=this.get("container"),N=M.get("id"),Q=this.get("rootClassName"),R=N+Q;if(this._checkable){O.on("checkedChange",this._uiUpdateState,this,"checked");}O.after("disabledChange",this._uiUpdateDisabled,this);this.after("activeChange",this._uiUpdateState,this,"active");this.after("hoverChange",this._uiUpdateState,this,"hover");this.after("focusedChange",this._uiUpdateState,this,"focused");if(!B[R]){B[R]=M;M.delegate("mousedown",K,(P+",label"));M.delegate("mouseenter",G,P);M.delegate("mouseleave",G,P);M.delegate("focus",F,P);M.delegate("blur",D,P);M.delegate("click",E,P);M.delegate("keydown",J,P);M.delegate("keyup",L,P);}},initializer:function(N){var P=this.get("host"),O=P.one("input,button"),M=this.get("container").one("label[for="+O.get("id")+"]"),Q=O.get("type");A.augment(O,A.Attribute);this._host=P;this._button=O;if(M){M._button=P;}this._type=Q;this._checkable=(Q=="checkbox"||Q=="radio");this._addListeners(("."+this.get("rootClassName")));P.addClass(C(Q));if(O.get("disabled")){this._uiUpdateState({newVal:true},"disabled");}if(O.get("checked")){this._uiUpdateState({newVal:true},"checked");}},destructor:function(){}});H.NAME="nodeButton";H.NS="button";A.namespace("Plugin");A.Plugin.NodeButton=H;},"@VERSION@",{requires:["attribute","node","plugin","event-focus","classnamemanager","event-mouseenter"]});