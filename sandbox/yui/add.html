<html debug="true">
    <head>
        <title>YUI 3.0</title>
        <!--
        <script type='text/javascript' src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script>
        -->
        <script type="text/javascript" src="../../build/yui/yui-debug.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            (function () {

                YUI.add('mywidget', function(Y) {

                    function MyWidget(config) {
                        MyWidget.superclass.constructor.apply(this, arguments);
                    }

                    MyWidget.NAME = "mywidget";
                    MyWidget.ATTRS = {};

                    Y.extend(MyWidget, Y.Widget);

                    Y.MyWidget = MyWidget;

                }, '3.0.0b1', {requires:['widget']});
            })();

            var config1 = {
                a: 1,
                modules: {
                    'yui2-yde': {
                        fullpath: "http://yui.yahooapis.com/2.5.2/build/yahoo-dom-event/yahoo-dom-event.js"
                    }
                }
            },
            config2 = {
                a: 2,
                b: 1,
                modules: {
                    'yui2-calendar': {
                        fullpath: "http://yui.yahooapis.com/2.5.2/build/calendar/calendar-min.js",
                        requires: ['yui2-yde', 'yui2-calendarcss']
                    }
                }
            },
            config3 = {
                a: 3,
                b: 2,
                c: 1,
                modules: {
                    'yui2-calendarcss': {
                        fullpath: "http://yui.yahooapis.com/2.5.2/build/calendar/assets/skins/sam/calendar.css",
                        type: 'css'
                    }
                }
            };
        </script>
        
        <div id="my"/>
        
        <script type="text/javascript">
            // Works
            // YUI().use('widget', function(Y) {
            //     new Y.Widget().render();
            //     Y.log("use 'widget' - No Exceptions");
            // })

            // *was* broken
            // YUI( { filter: 'debug' }, config1, config2, config3).use('dump', 'mywidget', function(Y) {
            //     new Y.MyWidget().render();
            //     Y.log("use 'mywidget', custom module - No Exceptions");
            //     Y.log("config: " + Y.dump(Y.config));
            //     Y.log("modules: " + Y.dump(Y.config.modules, 0));
            //     Y.log("DOM element: " + Y.dump(document.getElementById('my')));
            //     Y.log("document.location: " + Y.dump(document.location));
            // })

            YUI().add('bacon-dom', function(Y) {
                Y.log("Loading bacon-dom",'debug',"bacon-dom");
            }, '@VERSION@', { requires: ['event'] });

            YUI({ filter: 'debug' }).use('bacon-dom', 'console-filters', function(Y) {
                // alert('usinghello' + Y.Event + ' - ' + Y.Selector);
                Y.log('used backon-dom: ' + Y.Event + ' - ' + Y.Selector);
            });
        </script>

    </body>
</html>
